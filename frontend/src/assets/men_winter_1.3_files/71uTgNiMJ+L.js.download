'use strict';mix_d("SBVideoCards__multi-brand-video-desktop:multi-brand-video-desktop__DiWQ36E3","require exports tslib @p/A @c/metrics @c/pagemarker @c/scoped-dom @c/dom @p/a-ajax @c/logger @p/a-carousel-constants @p/a-carousel-framework @p/a-carousel-strategies @c/aui-carousel @c/aui-truncate @c/aui-utils @c/weblabs @c/browser-operations @c/aui-modal @c/aui-untrusted-ajax".split(" "),function(xc,Ia,p,yc,F,zc,Ac,Ja,Bc,hb,Cc,Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc){function M(b){return b&&"object"===typeof b&&
"default"in b?b:{"default":b}}function Mc(b){if(b&&b.__esModule)return b;var g=Object.create(null);b&&Object.keys(b).forEach(function(h){if("default"!==h){var f=Object.getOwnPropertyDescriptor(b,h);Object.defineProperty(g,h,f.get?f:{enumerable:!0,get:function(){return b[h]}})}});g["default"]=b;return g}var y=M(yc),wa=M(zc),x=M(Ac),fa=M(Ja),Nc=M(Bc),ka=M(hb),z=M(Cc),pa=M(Dc),qa=M(Ec),ib=M(Fc),Oc=M(Ic),jb=M(Jc),Pc=M(Kc),Qc=M(Lc),kb={},Ka=function(b,g,h){void 0===g&&(g="");void 0===h&&(h=1);g=b+g;kb.hasOwnProperty(g)||
(kb[g]=!0,F.count(b,(F.count(b)||0)+h))},Rc=function(b){Ka(y["default"].capabilities.mobile?"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var g=function(f,a){f={$event:{preventDefault:y["default"].$.noop,stopPropagation:y["default"].$.noop},$target:f.getContent().find('[data-a-tab-name="'+a+'"]'),data:{name:"energyEfficiencyTabSet"}};y["default"].trigger("a:declarative:a-tabs:click",f)},h=function(f,a){var c=f&&f.$event,d=f&&f.data||{},e=d.activeTabName,k=d.modalHeight,
l=d.name;c&&c.preventDefault&&c.preventDefault();c&&c.stopPropagation&&c.stopPropagation();c=a.get(l);c||(y["default"].on("a:popover:beforeShow:"+l,function(n){n.popover&&n.popover.getContent&&(n=n.popover.getContent(),n.find(".a-manually-loaded").parent().css("min-height",k),y["default"].loadDescendantImagesManually(n))}),c=a.create(f.$target,d));c.show();g(c,e)};b.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(f){y["default"].declarative("card-energy-efficiency-secondary-view",
"click",function(a){Ka("Card:EERU:SharedLib:mobile:click",a&&a.data&&a.data.name||"");h(a,f)})});b.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(f){y["default"].declarative("card-energy-efficiency-modal","click",function(a){Ka("Card:EERU:SharedLib:desktop:click",a&&a.data&&a.data.name||"");h(a,f)})})},Sc=function(b){b.when("ready").execute("EEBadgeProductFicheResize",function(g){var h=y["default"].$;h(".energyEfficiencyContainer").each(function(f,a){f=h(a).find(".energyEfficiencyProductFicheLabel").first();
a=h(a).find("svg").first();f.parent().outerHeight()>a.outerHeight()&&(f.removeClass("a-size-small"),f.addClass("a-size-micro"),f.parent().outerHeight()>a.outerHeight()&&f.parent().css("line-height","10px"))})})},lb=function(){var b=window.P;Rc(b);Sc(b)},N;(function(b){b.VIDEO_SINGLE_PRODUCT="video-single-product";b.CONFIGURABLE="configurable-horizontal-video";b.MULTI_BRAND_VIDEO="multi-brand-video";b.VIDEO_SINGLE_BRAND="video-single-brand";b.VIDEO_STORE="video-store";b.VIDEO_STORE_PRODUCT_FEATURE=
"video-store-product-feature";b.VIDEO_PRODUCT_COLLECTION="video-product-collection";b.SHORT_FORM_VIDEO="short-form-video";b.VIDEO_SPLIT="video-split";b.HOMEPAGE_WINDOW_DISPLAY="video-homepage-wd"})(N||(N={}));var mb;(function(b){b.SPARKLE_MOBILE="loom-mobile-top-slot";b.SPARKLE_DESKTOP="loom-desktop-top-slot";b.INLINE_MOBILE="loom-mobile-inline-slot";b.INLINE_DESKTOP="loom-desktop-inline-slot";b.BOTTOM_MOBILE="loom-mobile-bottom-slot";b.BOTTOM_DESKTOP="loom-desktop-bottom-slot";b.MOBILE_HQP="mobile-hero-quick-promo";
b.BRAND_DISCOVERY_FEEDS_MOBILE="brand-discovery-feeds-mobile";b.HOMEPAGE_WINDOW_DISPLAY="mobile-gateway-atf"})(mb||(mb={}));var ra=function(b,g){g=g||x["default"].cardRoot;return!b||g.matches(b)?g:g.querySelector(b)},La=function(b,g){return(g=ra("["+b+"]",g))?g.getAttribute(b):null},Y=function(){return fa["default"].cardRoot.ownerDocument},U=function(){return Y().defaultView},Tc=function(b){var g,h;return null===(h=null===(g=U())||void 0===g?void 0:g.matchMedia)||void 0===h?void 0:h.call(g,b)},Uc=
function(b,g){b.forEach(function(h){h.classList.remove(g)})},nb=function(){},Vc=function(b){var g=b.url,h=b.onSuccess,f=b.onError;g?Nc["default"].get(g,{success:function(a){a&&"ok"===a.status?h(a):f()},error:f,abort:f}):f()},Wc=function(b){var g=b.url,h=b.payload,f=b.onSuccess,a=void 0===f?nb:f;b=b.onError;b=void 0===b?nb:b;g?fetch(g,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:h}).then(function(c){if(!c.ok&&0!==c.status)throw Error(c.status+" "+c.statusText);a(c)}).catch(b):
b()},Xc=function(b,g,h){var f=new Promise(function(a,c){var d=setTimeout(function(){clearTimeout(d);a()},g)});b=fetch(b,h);return Promise.race([b,f])},Yc=function(b){try{var g=encodeURIComponent,h=JSON,f=h.stringify,a=JSON.parse(b);var c={adCreativeMetaData:{adId:a.feedbackRequestAdId,advertiserId:a.feedbackRequestAdvertiserId,adNetwork:"aax",adProgramId:1010,adCreativeDetails:[{advertiserIdNS:a.feedbackRequestAdvertiserIdNS,campaignId:a.feedbackRequestCampaignId,selectionSignals:ob(a.feedbackRequestSelectionSignals)}]},
adPlacementMetaData:{adElementId:a.adElementId,pageType:a.pageType,slotName:a.slotName}};return"/af/feedback-link?pl="+g(f.call(h,c))}catch(d){return null}},Ma=function(){var b=ra('[data-id="afb-sponsored"]');b&&(b.style.display="block")},pb=function(b,g){return p.__awaiter(void 0,void 0,void 0,function(){var h,f,a,c;return p.__generator(this,function(d){switch(d.label){case 0:h=g.cardName;f=g.isAdFeedbackForCards;if(!f)return[3,1];Zc(g).then(function(){b.reportAdFeedbackLoadSucceeded()}).catch(function(e){b.reportAdFeedbackLoadFailedFromErr(e.message||
"")});return[3,4];case 1:return d.trys.push([1,3,,4]),[4,$c()];case 2:return d.sent(),b.reportAdFeedbackLoadSucceeded(),(a=x["default"].cardRoot.querySelector('[data-id="afb-content"]'))?a.querySelectorAll("a").forEach(function(e){e.addEventListener("click",b.reportAdFeedbackPopoverOpened)}):F.count(h+"-AdfeedbackElementNotFound"),[3,4];case 3:return c=d.sent(),b.reportAdFeedbackLoadFailedFromErr(c.message||""),[3,4];case 4:return[2]}})})},Zc=function(b){return p.__awaiter(void 0,void 0,void 0,function(){var g,
h,f,a,c;return p.__generator(this,function(d){switch(d.label){case 0:g=La("data-ad-feedback");h=La("data-ad-feedback-label-id");f=b.enableAdFeedback;if(!g||!h)return[2,Promise.reject(Error("data-ad-feedback attributes not found"))];a=JSON.parse(g);c=function(){return{adFeedbackLabelId:h,adCreativeMetaData:{adCreativeDetails:a.creativeDetails.map(function(e,k){var l=e.adId,n=e.advertiserId,m=e.advertiserIdNS,q=e.campaignId,v=ob(e.selectionSignals),u=e.title;(e=e.imageUrl)?(e={url:e,width:0,height:0},
e={lowResolutionImage:e,highResolutionImages:[e]}):e=void 0;return{adId:l,advertiserId:n,adCreativeIndex:k,adNetwork:"aax",advertiserIdNS:m,campaignId:q,selectionSignals:v,title:u,adCreativeImage:e}})}}};d.label=1;case 1:return d.trys.push([1,3,,4]),[4,f(c)];case 2:return d.sent(),[3,4];case 3:return d.sent(),[2,Promise.reject(Error("enableAdFeedbackClient call failed"))];case 4:return[2,Promise.resolve("success")]}})})},$c=function(){var b=La("data-ad-feedback");if(b){var g=Yc(b);return new Promise(function(h,
f){Vc({url:g,onSuccess:function(a){try{var c=a.html,d=ra('[data-id="afb-content"]');if(d&&c){var e=ra('[data-id="afb-sponsored"]');e&&(e.style.display="none");d.innerHTML=c}var k=a.script;if(k){var l=Y().createElement("script");l.type="text/javascript";l.innerHTML=k;ra().appendChild(l)}}catch(n){Ma(),f(Error("setHtml or setScript failed"))}h("success")},onError:function(){Ma();f(Error("get ad feedback request failed"))}})})}return Promise.reject(Error("data-ad-feedback attributes not found"))},ob=
function(b){var g;if(b){switch(null===(g=b.pastActivity)||void 0===g?void 0:g.toUpperCase()){case "STORE_ONLY":g=1;break;case "AMAZON_AND_OTHER":g=3;break;case "AMAZON_ONLY":g=2;break;default:g=0}return p.__assign(p.__assign({},b),{pastActivity:g})}},la;(function(b){b.BETA="beta";b.GAMMA="gamma";b.PROD="prod"})(la||(la={}));var Na=function(){function b(){}b.getStage=function(){var g=U();return(g=g&&g.location&&g.location.hostname)?"localhost"===g||"mix.corp.amazon.com"===g||"development.amazon.com"===
g||/^[a-z]{2}-development\.amazon\.com$/.test(g)?la.BETA:/^pre-prod\.amazon\.(com|[a-z]{2})$/.test(g)||/^pre-prod\.amazon\.com?\.[a-z]{2}$/.test(g)||/^[a-z]{2}-pre-prod\.amazon\.com$/.test(g)?la.GAMMA:la.PROD:la.PROD};return b}(),D=function(){function b(){}b.eventListeners={};b.addEventListener=function(g,h,f,a){b.setupListenerIfItDoesntExist(g,h);b.addCallbackWithPriority(g,h,f,a)};b.removeEventListener=function(g,h,f,a){b.removeCallbackWithPriority(g,h,f,a)&&b.removeListenerIfNoLongerNeeded(g,h)};
b.removeEventListenerSafely=function(g,h,f,a){b.removeCallbackWithPriority(g,h,f,a)&&b.removeListenerWithoutDeletingElement(g,h)};b.removeListenerWithoutDeletingElement=function(g,h){0===b.eventListeners[g][h].listeners.length&&(g.removeEventListener(h,b.eventListeners[g][h].generatedCallback),delete b.eventListeners[g][h])};b.removeListenerIfNoLongerNeeded=function(g,h){0===b.eventListeners[g][h].listeners.length&&(g.removeEventListener(h,b.eventListeners[g][h].generatedCallback),delete b.eventListeners[g][h],
Object.keys(b.eventListeners[g]).length&&delete b.eventListeners[g])};b.removeCallbackWithPriority=function(g,h,f,a){if(!b.eventListeners[g]||!b.eventListeners[g][h])return!1;b.eventListeners[g][h].listeners=b.eventListeners[g][h].listeners.filter(function(c){return c.priority!==f||c.callback!==a});return!0};b.setupListenerIfItDoesntExist=function(g,h){b.eventListeners[g]||(b.eventListeners[g]={});b.eventListeners[g][h]||(b.eventListeners[g][h]={generatedCallback:b.generateCallback(g,h),listeners:[]},
g.addEventListener(h,b.eventListeners[g][h].generatedCallback))};b.addCallbackWithPriority=function(g,h,f,a){b.eventListeners[g][h].listeners.push({callback:a,priority:f});b.eventListeners[g][h].listeners.sort(function(c,d){return c.priority-d.priority})};b.generateCallback=function(g,h){return function(f){b.eventListeners[g][h].listeners.forEach(function(a){a.callback&&a.callback(f)})}};return b}(),ad=["messageId","timestamp"],bd=function(b){var g=function(){},h=function(){var a=function(){if(b.XDomainRequest){var c=
new b.XDomainRequest;c.onerror=g;c.ontimeout=g;c.onprogress=g;c.onload=g;c.timeout=0;return c}if(b.XMLHttpRequest){c=new b.XMLHttpRequest;if(!("withCredentials"in c))throw"";return c}return null};return{isSupported:!0,send:function(c,d){if(d&&c){var e=a();if(!e)throw"";e.open("POST",c,!0);e.setRequestHeader&&e.setRequestHeader("Content-type","text/plain");e.send(d)}}}}(),f=function(){return{isSupported:!!b.navigator.sendBeacon,send:function(a,c){if(a&&c&&!b.navigator.sendBeacon(a,c))throw"";}}}();
return{ajaxClient:h,beaconClient:f}},cd=function(){return function(b,g){var h=this;this.flush=function(a){void 0===a&&(a=!1);h.eventsQueue.length&&(a||!1!==h.browserWindow.navigator.onLine)&&(a=h.eventsQueue.length,h.sendWithPriority(h.transportationClient.beaconClient,h.transportationClient.ajaxClient),h.resetBatch(),h.ueCount("EventsSent",a))};this.processEvent=function(a,c){void 0===c&&(c={n:1});var d=h.unloadHandlerCalled=!1;h.isValidAPICall(a)&&(d=h.addEvent(a,c));d?h.ueCount("ClientEventsSuccess"):
h.ueCount("ClientEventsFailed");return d};this.getEventQueueCount=function(){return h.eventsQueue.length};this.buildCompressor=function(){var a=function(k){return k.length>("#"+h.dictionaryIndex).length||"#"===k.charAt(0)},c=function(k){if(k)switch(typeof k){case "number":return!(isNaN(k)||Infinity===k)&&a(k.toString());case "boolean":break;case "string":return a(k);default:return!0}return!1},d=function(k){h.eventsDictionary[k]="#"+h.dictionaryIndex++;h.reverseEventsDictionary[h.eventsDictionary[k]]=
k;return h.eventsDictionary[k]},e=function(k){if(c(k)){var l=0;k instanceof Array?l=2:k instanceof Function?l=null:k instanceof Object&&(l=1);switch(l){case 0:return h.eventsDictionary[k]?h.eventsDictionary[k]:d(k);case 2:var n=[];for(l=0;l<k.length;l++)n[l]=e(k[l]);return n;case 1:l={};for(n in k)Object.prototype.hasOwnProperty.call(k,n)&&(l[h.eventsDictionary[n]?h.eventsDictionary[n]:d(n)]=-1===ad.indexOf(n)?e(k[n]):k[n]);return l}}return k};return{buildPOSTObject:function(){return h.stringify({cs:{dct:h.reverseEventsDictionary},
events:h.eventsQueue})},compressData:e}};this.onBeforeUnload=function(){!0!==h.unloadHandlerCalled&&(h.flush(),h.unloadHandlerCalled=!0)};this.stringify=function(a){try{return JSON.stringify(a)}catch(c){return null}};this.resetBatch=function(){h.eventsQueue=[];h.eventsDictionary={};h.reverseEventsDictionary={};h.dictionaryIndex=0;h.batchSize=0;h.lowPriorityTimer=0;h.highPriorityTimer=0};this.sendWithClient=function(a){if(null==h.endpoint||""===h.endpoint)h.ueCount("SushiClientEndpointMissing");else{if(a.isSupported){var c=
h.compressor.buildPOSTObject();return a.send(h.endpoint,c)}throw"";}};this.sendWithPriority=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];for(c=0;c<a.length;c++){var d=a[c];try{return h.sendWithClient(d)}catch(e){}}return null};this.startHighPriorityQueueTimer=function(){0===h.highPriorityFlushInterval?h.flush():h.highPriorityTimer||(h.highPriorityTimer=setTimeout(h.flush,h.highPriorityFlushInterval,h,!1))};this.startLowPriorityQueueTimer=function(){h.lowPriorityTimer||(h.lowPriorityTimer=
setTimeout(h.flush,h.lowPriorityFlushInterval,h,!1))};this.generateMessageId=function(a,c){return a+"-"+c+"-"+h.eventSequence};this.getCurrentISODate=function(){var a=new Date,c=function(d){return 10>d?"0"+d:d};return"function"===typeof Date.prototype.toISOString?a.toISOString():a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"};this.decorateEvent=
function(a){a.timestamp=h.getCurrentISODate();a.sequence=h.eventSequence;a.messageId=h.generateMessageId(a.request_id,Date.now?Date.now():(new Date).getTime())};this.startTimers=function(a){a.n?h.startHighPriorityQueueTimer():h.startLowPriorityQueueTimer()};this.encodeEvent=function(a,c,d){c=c.length;(499===h.eventsQueue.length||524288<h.batchSize+c)&&h.flush(!0);h.batchSize+=c;a={data:h.compressor.compressData(a)};h.eventsQueue.push(a);h.startTimers(d)};this.addEvent=function(a,c){h.decorateEvent(a);
var d=h.stringify(a);return d?(h.encodeEvent(a,d,c),!0):!1};this.isValidAPIParam=function(a,c){return a&&-1<a.constructor.toString().indexOf(c)};this.isMaxCallsReached=function(){h.eventSequence++;1E3<h.eventSequence&&h.ueCount("SushiClientMaxCallsReached");return 1E3<h.eventSequence};this.isValidAPICall=function(a){return!h.isMaxCallsReached()&&h.isValidAPIParam(a,"Object")};this.ueCount=function(a,c){try{var d=0===c?0:c||(F.count(h.metricsTag+":"+a)||0)+1;F.count(h.metricsTag+":"+a,d);return d}catch(e){return hb.log("SushiClient.ueCount error: "+
e,"ERROR"),0}};this.browserWindow=U();this.endpoint=b;this.metricsTag=g;this.eventsQueue=[];this.eventsDictionary={};this.reverseEventsDictionary={};this.eventSequence=this.lowPriorityTimer=this.highPriorityTimer=this.dictionaryIndex=this.batchSize=0;this.unloadHandlerCalled=!1;this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.transportationClient=bd(this.browserWindow);this.compressor=this.buildCompressor();D.addEventListener(this.browserWindow,"beforeunload",100,this.onBeforeUnload);
D.addEventListener(Y(),"visibilitychange",100,this.onBeforeUnload);D.addEventListener(this.browserWindow,"blur",100,this.onBeforeUnload);D.addEventListener(this.browserWindow,"pagehide",100,this.onBeforeUnload);this.browserWindow.app||(this.browserWindow.app={});var f=this.browserWindow.app.willDisappear;this.browserWindow.app.willDisappear=function(){f&&f();h.onBeforeUnload()}}}(),Z;(function(b){b.VIEWED="VIEWED";b.PROGRESS_FIVE_SECONDS="PROGRESS_5_SEC";b.FIRST_QUARTILE="FIRST_QUARTILE";b.MIDPOINT=
"MIDPOINT";b.THIRD_QUARTILE="THIRD_QUARTILE";b.COMPLETE="COMPLETE";b.UNMUTE="UNMUTE"})(Z||(Z={}));var V;(function(b){b.ICON_TAP="IconTap";b.VIDEO_OFF_SCREEN="VideoOffScreen";b.INHERIT="Inherit";b.WEBKIT_MUTED="WebkitMuted"})(V||(V={}));var xa;(function(b){b.ICON_TAP="IconTap";b.DEFAULT_OFF="DefaultOff"})(xa||(xa={}));var qb;(function(b){b.SINGLE_PAGE="SINGLE_PAGE";b.CROSS_PAGE="CROSS_PAGE"})(qb||(qb={}));var rb;(function(b){b.CONTENT_HASH="CONTENT_HASH";b.CAMPAIGN_AND_ADV_ID="CAMPAIGN_AND_ADV_ID"})(rb||
(rb={}));var t;(function(b){b.ACE_VIDEO_RESPONSE_RECEIVED="AceVideoResponseReceived";b.ADBLOCK_DETECTED="AdBlockDetected";b.AD_FEEDBACK_LOAD_FAILED_FROM_ERR="AdFeedbackLoadFailedFromErr";b.AD_FEEDBACK_LOAD_SUCCEEDED="AdFeedbackLoadSucceeded";b.AD_FEEDBACK_LOAD_POPOVER_OPENED="AdFeedbackPopoverOpened";b.AUDIO_TOGGLE_ICON_DISPLAYED="AudioToggleIconDisplayed";b.BACKGROUND_CLICKED="BackgroundClicked";b.PAUSE_ICON_DISPLAYED="PauseIconDisplayed";b.BRAND_LOGO_CLICKED="BrandLogoClicked";b.BRAND_CTA_LINK_CLICKED=
"BrandCtaLinkClicked";b.BRAND_NAME_CLICKED="BrandNameClicked";b.CREATOR_LOGO_CLICKED="CreatorLogoClicked";b.CREATOR_CTA_LINK_CLICKED="CreatorCtaLinkClicked";b.CARD_ITEM_RECEIVED="CardItemReceived";b.CAROUSEL_PAGE_CHANGED="CarouselPageChanged";b.CAPTIONS_ENABLED="CaptionsEnabled";b.CAPTIONS_DISABLED="CaptionsDisabled";b.CAPTIONS_LOAD_FAILURE="CaptionsLoadFailure";b.CC_ICON_DISPLAYED="CcIconDisplayed";b.CTA_BANNER_CLICKED="CtaBannerClicked";b.DUPE="Dupe";b.DUPE_BY_ADVID_CAMPAIGNID="DupeByAdvIdCampaignId";
b.DUPE_BY_CONTENT_HASH="DupeByContentHash";b.EVENT_BANNER_DISPLAYED="EventBannerDisplayed";b.EVENT_BANNER_CLICKED="EventBannerClicked";b.HEADLINE_CLICKED="HeadlineClicked";b.IMMERSIVE_VIDEO_FAILED="ImmersiveVideoFailed";b.IMMERSIVE_VIDEO_LOADED="ImmersiveVideoLoaded";b.MISSING_BACKGROUND_ELEMENT="MissingBackgroundElement";b.MISSING_BRAND_ELEMENT="MissingBrandElement";b.MISSING_PRODUCT_ELEMENT="MissingProductElement";b.MISSING_PRODUCT_ELEMENTS="MissingProductElements";b.MISSING_VIDEO_ELEMENT="MissingVideoElement";
b.MISSING_CREATOR_ELEMENT="MissingCreatorElement";b.NO_AD_ERROR="NoAdError";b.NO_VIDEO_SRC_ON_ELEMENT="NoVideoSrcOnElement";b.NUMBER_OF_ADS_LESS_THAN_MIN_ERR="NumberOfAdsLessThanMin";b.PLAYBACK_COMPLETED="PlaybackCompleted";b.PLAYBACK_FAILED_TO_START_AFTER_PLAY="PlaybackFailedToStartAfterPlay";b.PRODUCT_CLICKED="ProductClicked";b.PRODUCT_RECEIVED="ProductReceived";b.PRODUCT_TWISTER_VARIATION="ProductTwisterVariation";b.MULTI_PRODUCT_COLLECTION="MultiProductCollection";b.TIME_TO_FIRST_FRAME="TimeToFirstFrame";
b.TIME_TO_FIRST_INTERRUPT="TimeToFirstInterrupt";b.CLIENT_LOAD_TO_FIRST_FRAME="ClientLoadToFirstFrame";b.VIDEO_ABORTED="VideoAborted";b.VIDEO_BUFFERING_ENDED="VideoBufferingEnded";b.VIDEO_BUFFERING_STARTED="VideoBufferingStarted";b.VIDEO_CLEARED_ON_HIDDEN_BROWSER="VideoClearedOnHiddenBrowser";b.VIDEO_CLICKED="VideoClicked";b.VIDEO_DURATION_PLAYED="VideoDurationPlayed";b.VIDEO_LOADED_ON_VISIBLE_BROWSER="VideoLoadedOnVisibleBrowser";b.VIDEO_OFF_SCREEN="VideoOffScreen";b.VIDEO_ON_SCREEN="VideoOnScreen";
b.VIDEO_PAUSED="VideoPaused";b.VIDEO_PAUSED_INITIATED="VideoPausedInitiated";b.VIDEO_PAUSE_BUTTON_TRIGGERED="VideoPauseButtonTriggered";b.VIDEO_PLAY_BUTTON_TRIGGERED="VideoPlayButtonTriggered";b.VIDEO_PLAY_FROM_PAUSE="VideoPlayFromPause";b.VIDEO_PAUSED_ON_AUTOPLAY_DISABLED="VideoPausedOnAutoplayDisabled";b.VIDEO_PLAYBACK_FAILURE="VideoPlaybackFailure";b.VIDEO_PLAYBACK_INITIATED="VideoPlaybackInitiated";b.VIDEO_PLAYBACK_STARTED="VideoPlaybackStarted";b.VIDEO_PLAY_PROMISE_NOT_SUPPORTED="VideoPlayPromiseNotSupported";
b.VIDEO_PREVIEW_IMAGE_NOT_MEDIA_AMAZON="VideoPreviewImageNotMediaAmazon";b.VIDEO_PLAY_PROMISE_REJECTED="VideoPlayPromiseRejected";b.VIDEO_READY_FOR_PLAYBACK="VideoReadyForPlayback";b.VIDEO_SOUND_OFF="VideoSoundOff";b.VIDEO_SOUND_ON="VideoSoundOn";b.VIDEO_VIEW="VideoView";b.VM_AD_UNIT_VIEWED="ViewMetricsAdUnitViewed";b.VM_VIDEO_VIEWED="ViewMetricsVideoViewed";b.VM_VIDEO_PROGRESS_FIVE_SECONDS="ViewMetricsVideoProgressFiveSeconds";b.VM_VIDEO_FIRST_QUARTILE="ViewMetricsVideoFirstQuartile";b.VM_VIDEO_MIDPOINT=
"ViewMetricsVideoMidpoint";b.VM_VIDEO_THIRD_QUARTILE="ViewMetricsVideoThirdQuartile";b.VM_VIDEO_COMPLETE="ViewMetricsVideoComplete";b.VM_VIDEO_UNMUTE="ViewMetricsVideoUnmute";b.VM_POST_FAILURE="ViewMetricsPostFailure";b.WIDGET_ON_SCREEN="WidgetOnScreen";b.MULTI_ASIN_ADS_RECEIVED="MultiAsinAdsReceived";b.PDP_RENDERED_AS_PC="PDPRenderedAsPC"})(t||(t={}));var r;(function(b){b.APP_VERSION="appVersion";b.ADVERTISER_ID="advertiserId";b.AUTO_SCROLLED="autoScrolled";b.CAMPAIGN_ID="campaignId";b.CAROUSEL_ITEM_INDEX=
"carouselItemIndex";b.CAROUSEL_PAGE_NUMBER="carouselPageNumber";b.CC_TOGGLE_CAUSE="ccToggleCause";b.CC_MANDATORY="ccMandatory";b.CC_SRC="ccSrc";b.CLIENT_ID="clientId";b.CLIENT_EXECUTION_MODE="clientExecutionMode";b.CONTINUOUS_PLAYBACK_DURATION_MS="continuousPlaybackDurationMs";b.CURRENT_PAGE_URL="currentPageUrl";b.DEVICE_ENV="deviceEnv";b.DEVICE_MAKE="deviceMake";b.DEVICE_MODEL="deviceModel";b.DEVICE_OS="deviceOs";b.DEVICE_PLATFORM_VERSION="devicePlatformVersion";b.DEVICE_TYPE="deviceType";b.DROPPED_FRAMES=
"droppedFrames";b.ERROR_CODE="errorCode";b.ERROR_MESSAGE="errorMessage";b.EVENT_TYPE="eventType";b.LAYOUT="layout";b.EXPERIENCE="experience";b.EXPERIENCE_VARIATION="experienceVariation";b.HAS_BRAND_INFO="hasBrandInfo";b.HEADLINE="headline";b.HEIGHT="height";b.IMAGE_URL="imageUrl";b.LANGUAGE="language";b.LINK_URL="linkUrl";b.LOAD_TIME_MS="loadTimeMs";b.LOGIC="logic";b.MARKETPLACE_ID="marketplaceId";b.METRICS_IDENTIFIER="metricsIdentifier";b.METRICS_SEQUENCE_NUMBER="metricsSequenceNumber";b.NETWORK_TYPE=
"networkType";b.NUMBER_OF_ADS="numberOfAds";b.NUMBER_OF_ASINS="numberOfAsins";b.PAGE_NUMBER="pageNumber";b.PAGE_TYPE="pageType";b.PERCENT_DOWNLOADED="percentDownloaded";b.PREV_CAROUSEL_PAGE_NUMBER="prevCarouselPageNumber";b.PRODUCT_COMPONENTS="productComponents";b.PRODUCT_INDEX="productIndex";b.PRODUCT_ASIN="asin";b.TWISTER_VARIATIONS_REQUESTED="twisterVariationsRequested";b.TWISTER_VARIATIONS_REQUEST_SUCCEEDED="twisterVariationsRequestSuceeded";b.TWISTER_VARIATIONS_DETAIL_REQUESTED="twisterVariationsDetailRequested";
b.TWISTER_VARIATIONS_CHOSEN="twisterVariationsChosen";b.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED="numberOfTwisterVariationsReceived";b.REASON="reason";b.REQUEST_ID="requestId";b.RETRY_COUNT="retryCount";b.SEARCH_QUERY="searchQuery";b.SOUND_TOGGLE_METHOD="soundToggleMethod";b.STAGE="stage";b.STATUS_CODE="statusCode";b.STORE_CTA="storeCta";b.STORE_NAME="storeName";b.STORE_URL="storeUrl";b.TIME_ON_SCREEN_MS="timeOnScreenMs";b.USER_AGENT="userAgent";b.VIDEO_BOUNDARY_CROSSED_TIME_MS="videoBoundaryCrossedTimeMs";
b.VIDEO_CURRENT_TIME_MS="videoCurrentTimeMs";b.VIDEO_ORIENTATION="videoOrientation";b.VIDEO_PREVIEW_IMAGE_SRC="videoPreviewImageSrc";b.VIDEO_SRC="videoSrc";b.VIDEO_TOTAL_LENGTH_MS="videoTotalLengthMs";b.VIDEO_TYPE="videoType";b.VIEWPORT_HEIGHT="viewportHeight";b.VIEWPORT_WIDTH="viewportWidth";b.WAS_BUFFERING="wasBuffering";b.WEBLABS="weblabs";b.WIDGET_GROUP_ID="widgetGroupId";b.WIDGET_INDEX="widgetIndex";b.WIDGET_TYPE="widgetType";b.WIDTH="width";b.VIEW_METRICS_FAILURE="viewMetricsFailure";b.MULTI_ASIN_ADS_COUNT=
"MultiAsinAdsCount"})(r||(r={}));var sb={shouldLogViewMetrics:!1,shouldBillViewMetrics:!0},tb=function(){return function(b,g,h){var f=this;void 0===h&&(h=sb);this.reportPDPRenderedAsPC=function(a){a=f.newEvent(t.PDP_RENDERED_AS_PC,a);f.recordEvent(a)};this.setClientMetricsContext=function(a){f.clientMetricsContext=a};this.reportWidgetOnScreen=function(){var a=f.newEvent(t.WIDGET_ON_SCREEN,f.resetVideoAdAttributes());f.recordEvent(a)};this.reportResponseReceived=function(a,c){var d=f.newEvent(t.ACE_VIDEO_RESPONSE_RECEIVED,
f.resetVideoAdAttributes());d[r.NUMBER_OF_ADS]=null!==a&&void 0!==a?a:1;c&&(d[r.CLIENT_EXECUTION_MODE]=c);f.recordEvent(d)};this.reportNumAsins=function(a){var c=f.newEvent(t.MULTI_ASIN_ADS_RECEIVED);c[r.MULTI_ASIN_ADS_COUNT]=a;f.recordEvent(c)};this.reportNoAdError=function(){var a=f.newEvent(t.NO_AD_ERROR,f.resetVideoAdAttributes());f.recordEvent(a)};this.reportNumOfAdsLessThanMinRequirement=function(){var a=f.newEvent(t.NUMBER_OF_ADS_LESS_THAN_MIN_ERR,f.resetVideoAdAttributes());f.recordEvent(a)};
this.reportAdFeedbackLoadFailedFromErr=function(a){var c=f.newEvent(t.AD_FEEDBACK_LOAD_FAILED_FROM_ERR,f.resetVideoAdAttributes());c[r.ERROR_MESSAGE]=a;f.recordEvent(c)};this.reportAdFeedbackLoadSucceeded=function(){var a=f.newEvent(t.AD_FEEDBACK_LOAD_SUCCEEDED,f.resetVideoAdAttributes());f.recordEvent(a)};this.reportAdFeedbackPopoverOpened=function(){var a=f.newEvent(t.AD_FEEDBACK_LOAD_POPOVER_OPENED,f.resetVideoAdAttributes());f.recordEvent(a)};this.reportImmersiveVideoLoaded=function(a){a=f.newEvent(t.IMMERSIVE_VIDEO_LOADED,
a);f.recordEvent(a)};this.reportImmersiveVideoFailed=function(a,c){c=f.newEvent(t.IMMERSIVE_VIDEO_FAILED,c);c[r.ERROR_MESSAGE]=a;f.recordEvent(c)};this.reportVideoReadyForPlayback=function(a,c,d,e,k){var l=f.newEvent(t.VIDEO_READY_FOR_PLAYBACK,e);l[r.LOAD_TIME_MS]=a;l[r.RETRY_COUNT]=c;l[r.PERCENT_DOWNLOADED]=d;l[r.VIDEO_TOTAL_LENGTH_MS]=k;l[r.VIDEO_ORIENTATION]=e.videoOrientation;f.recordEvent(l)};this.reportVideoPlaybackInitiated=function(a,c){c=f.newEvent(t.VIDEO_PLAYBACK_INITIATED,c);c[r.VIDEO_CURRENT_TIME_MS]=
a;f.recordEvent(c)};this.reportVideoPlaybackStarted=function(a,c,d,e){e=f.newEvent(t.VIDEO_PLAYBACK_STARTED,e);e[r.VIDEO_CURRENT_TIME_MS]=a;e[r.PERCENT_DOWNLOADED]=c;e[r.DROPPED_FRAMES]=d;f.recordEvent(e)};this.reportTimeToFirstFrame=function(a,c,d,e){e=f.newEvent(t.TIME_TO_FIRST_FRAME,e);e[r.LOAD_TIME_MS]=a;e[r.PERCENT_DOWNLOADED]=c;e[r.DROPPED_FRAMES]=d;f.recordEvent(e)};this.reportTimeToFirstInterrupt=function(a,c,d,e){e=f.newEvent(t.TIME_TO_FIRST_INTERRUPT,e);e[r.LOAD_TIME_MS]=a;e[r.PERCENT_DOWNLOADED]=
c;e[r.DROPPED_FRAMES]=d;f.recordEvent(e)};this.reportClientLoadToFirstFrame=function(a,c,d,e){e=f.newEvent(t.CLIENT_LOAD_TO_FIRST_FRAME,e);e[r.LOAD_TIME_MS]=a;e[r.PERCENT_DOWNLOADED]=c;e[r.DROPPED_FRAMES]=d;f.recordEvent(e)};this.reportVideoBufferingStarted=function(a,c,d,e){e=f.newEvent(t.VIDEO_BUFFERING_STARTED,e);e[r.VIDEO_CURRENT_TIME_MS]=a;e[r.PERCENT_DOWNLOADED]=c;e[r.DROPPED_FRAMES]=d;f.recordEvent(e)};this.reportVideoBufferingEnded=function(a,c,d,e){e=f.newEvent(t.VIDEO_BUFFERING_ENDED,e);
e[r.VIDEO_CURRENT_TIME_MS]=a;e[r.PERCENT_DOWNLOADED]=c;e[r.DROPPED_FRAMES]=d;f.recordEvent(e)};this.reportVideoPlaybackFailure=function(a,c,d,e){e=f.newEvent(t.VIDEO_PLAYBACK_FAILURE,e);e[r.VIDEO_CURRENT_TIME_MS]=a;e[r.ERROR_MESSAGE]=c;e[r.ERROR_CODE]=d;f.recordEvent(e)};this.reportVideoDurationPlayed=function(a,c,d,e){e=f.newEvent(t.VIDEO_DURATION_PLAYED,e);e[r.VIDEO_BOUNDARY_CROSSED_TIME_MS]=a;e[r.PERCENT_DOWNLOADED]=c;e[r.DROPPED_FRAMES]=d;f.recordEvent(e)};this.reportPlaybackCompleted=function(a,
c,d){d=f.newEvent(t.PLAYBACK_COMPLETED,d);d[r.VIDEO_CURRENT_TIME_MS]=a;d[r.DROPPED_FRAMES]=c;f.recordEvent(d)};this.reportVideoOnScreen=function(a,c){c=f.newEvent(t.VIDEO_ON_SCREEN,c);c[r.PERCENT_DOWNLOADED]=a;f.recordEvent(c)};this.reportVideoClearedOnHiddenBrowser=function(a){a=f.newEvent(t.VIDEO_CLEARED_ON_HIDDEN_BROWSER,a);f.recordEvent(a)};this.reportVideoLoadedOnVisibleBrowser=function(a){a=f.newEvent(t.VIDEO_LOADED_ON_VISIBLE_BROWSER,a);f.recordEvent(a)};this.reportVideoOffScreen=function(a,
c,d,e){e=f.newEvent(t.VIDEO_OFF_SCREEN,e);e[r.TIME_ON_SCREEN_MS]=a;e[r.WAS_BUFFERING]=c;e[r.VIDEO_CURRENT_TIME_MS]=d;f.recordEvent(e)};this.reportVideoView=function(a,c,d){void 0===c&&(c=!1);d=f.newEvent(t.VIDEO_VIEW,d);d[r.CONTINUOUS_PLAYBACK_DURATION_MS]=a;f.recordEvent(d);c&&f.sushiClient.flush(!0)};this.reportVideoPauseInitiated=function(a,c){c=f.newEvent(t.VIDEO_PAUSED_INITIATED,c);c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};this.reportVideoPlayFromPause=function(a,c){c=f.newEvent(t.VIDEO_PLAY_FROM_PAUSE,
c);c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};this.reportVideoPaused=function(a,c,d,e){e=f.newEvent(t.VIDEO_PAUSED,e);e[r.VIDEO_CURRENT_TIME_MS]=a;e[r.PERCENT_DOWNLOADED]=c;e[r.DROPPED_FRAMES]=d;f.recordEvent(e)};this.reportVideoSoundOn=function(a,c,d){d=f.newEvent(t.VIDEO_SOUND_ON,d);d[r.VIDEO_CURRENT_TIME_MS]=a;d[r.SOUND_TOGGLE_METHOD]=c;f.recordEvent(d)};this.reportVideoSoundOff=function(a,c,d){d=f.newEvent(t.VIDEO_SOUND_OFF,d);d[r.VIDEO_CURRENT_TIME_MS]=a;d[r.SOUND_TOGGLE_METHOD]=c;f.recordEvent(d)};
this.reportCaptionsOn=function(a,c,d){c=f.newEvent(t.CAPTIONS_ENABLED,c);c[r.LANGUAGE]=d;c[r.CC_TOGGLE_CAUSE]=a;f.recordEvent(c)};this.reportCaptionsOff=function(a,c,d){c=f.newEvent(t.CAPTIONS_DISABLED,c);c[r.LANGUAGE]=d;c[r.CC_TOGGLE_CAUSE]=a;f.recordEvent(c)};this.reportCaptionsLoadFailure=function(a,c,d){var e=f.newEvent(t.CAPTIONS_LOAD_FAILURE,d);e[r.CC_SRC]=d.ccSrc;e[r.ERROR_MESSAGE]=a;e[r.ERROR_CODE]=c;f.recordEvent(e)};this.reportDupe=function(a,c,d){a=f.newEvent(t.DUPE,a);a[r.LOGIC]=c;a[r.REASON]=
d;f.recordEvent(a)};this.reportDupeByCampaignAndAdvertiserId=function(a){a=f.newEvent(t.DUPE_BY_ADVID_CAMPAIGNID,a);f.recordEvent(a)};this.reportDupeByContentHash=function(a){a=f.newEvent(t.DUPE_BY_CONTENT_HASH,a);f.recordEvent(a)};this.reportVideoClicked=function(a,c){c=f.newEvent(t.VIDEO_CLICKED,c,f.getDynamicMetricsAttributes());c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};this.reportProductClicked=function(a,c,d){c=f.newEvent(t.PRODUCT_CLICKED,c,f.getDynamicMetricsAttributes());c[r.VIDEO_CURRENT_TIME_MS]=
a;if(d){a=d.productComponents;var e=d.productIndex;c[r.PRODUCT_ASIN]=d.asin;c[r.PRODUCT_INDEX]=e;c[r.PRODUCT_COMPONENTS]=a}f.recordEvent(c)};this.reportBackgroundClicked=function(a,c){c=f.newEvent(t.BACKGROUND_CLICKED,c,f.getDynamicMetricsAttributes());c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};this.reportProductReceived=function(a,c,d){c=f.newEvent(t.PRODUCT_RECEIVED,c,f.getDynamicMetricsAttributes());c[r.VIDEO_CURRENT_TIME_MS]=a;if(d){a=d.productComponents;var e=d.productIndex;c[r.PRODUCT_ASIN]=
d.asin;c[r.PRODUCT_COMPONENTS]=a;c[r.PRODUCT_INDEX]=e}f.recordEvent(c)};this.reportProductTwisterVariations=function(a,c){a=f.newEvent(t.PRODUCT_TWISTER_VARIATION,a);if(c&&c.twisterVariationProperties){var d=c.twisterVariationProperties;c=d.twisterVariationsRequested;var e=d.twisterVariationsRequestSucceeded,k=d.twisterVariationDetailsRequested,l=d.numberOfTwisterVariationsAvailable;d=d.asinForTwisterChosen;a[r.TWISTER_VARIATIONS_REQUESTED]=null!==c&&void 0!==c?c:!1;a[r.TWISTER_VARIATIONS_REQUEST_SUCCEEDED]=
null!==e&&void 0!==e?e:!1;a[r.NUMBER_OF_TWISTER_VARIATIONS_RECEIVED]=l;a[r.TWISTER_VARIATIONS_DETAIL_REQUESTED]=null!==k&&void 0!==k?k:!1;a[r.TWISTER_VARIATIONS_CHOSEN]=d}f.recordEvent(a)};this.reportProductAttributes=function(a,c){a=f.newEvent(t.MULTI_PRODUCT_COLLECTION,a);if(c){var d=c.productUrl;a[r.PRODUCT_ASIN]=c.asin;a[r.LINK_URL]=d}f.recordEvent(a)};this.reportPlaybackFailedToStartAfterPlay=function(a){a=f.newEvent(t.PLAYBACK_FAILED_TO_START_AFTER_PLAY,a);f.recordEvent(a)};this.reportAudioToggleIconDisplayed=
function(a){a=f.newEvent(t.AUDIO_TOGGLE_ICON_DISPLAYED,a);f.recordEvent(a)};this.reportPauseIconDisplayed=function(a){a=f.newEvent(t.PAUSE_ICON_DISPLAYED,a);f.recordEvent(a)};this.reportCcIconDisplayed=function(a){a=f.newEvent(t.CC_ICON_DISPLAYED,a);f.recordEvent(a)};this.reportVideoPauseButtonTriggered=function(a,c){c=f.newEvent(t.VIDEO_PAUSE_BUTTON_TRIGGERED,c);c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};this.reportVideoPausedOnAutoplayDisabled=function(a){a=f.newEvent(t.VIDEO_PAUSED_ON_AUTOPLAY_DISABLED,
a);f.recordEvent(a)};this.reportAdblockDetected=function(a){a=f.newEvent(t.ADBLOCK_DETECTED,a);f.recordEvent(a)};this.reportVideoAborted=function(a,c){c=f.newEvent(t.VIDEO_ABORTED,c);c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};this.reportVideoPlayPromiseRejected=function(a,c){c=f.newEvent(t.VIDEO_PLAY_PROMISE_REJECTED,c);c[r.ERROR_MESSAGE]=a;f.recordEvent(c)};this.reportVideoPreviewImageNotMediaAmazon=function(a){a=f.newEvent(t.VIDEO_PREVIEW_IMAGE_NOT_MEDIA_AMAZON,a);f.recordEvent(a)};this.reportVideoPlayPromiseNotSupported=
function(a){a=f.newEvent(t.VIDEO_PLAY_PROMISE_NOT_SUPPORTED,a);f.recordEvent(a)};this.reportMissingVideoElement=function(a){a=f.newEvent(t.MISSING_VIDEO_ELEMENT,a);f.recordEvent(a)};this.reportMissingProductElement=function(a){a=f.newEvent(t.MISSING_PRODUCT_ELEMENT,a);f.recordEvent(a)};this.reportMissingProductElements=function(a){a=f.newEvent(t.MISSING_PRODUCT_ELEMENTS,a);f.recordEvent(a)};this.reportMissingBackgroundElement=function(a){a=f.newEvent(t.MISSING_BACKGROUND_ELEMENT,a);f.recordEvent(a)};
this.reportMissingBrandElement=function(a,c){var d,e,k;a=f.newEvent(t.MISSING_BRAND_ELEMENT,a);a[r.STORE_NAME]=null!==(d=null===c||void 0===c?void 0:c.storeName)&&void 0!==d?d:void 0;a[r.STORE_URL]=null!==(e=null===c||void 0===c?void 0:c.storeUrl)&&void 0!==e?e:void 0;a[r.STORE_CTA]=null!==(k=null===c||void 0===c?void 0:c.storeCta)&&void 0!==k?k:void 0;f.recordEvent(a)};this.reportBrandCtaLinkClicked=function(a,c){c=f.newEvent(t.BRAND_CTA_LINK_CLICKED,c);c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};
this.reportBrandLogoClicked=function(a,c){c=f.newEvent(t.BRAND_LOGO_CLICKED,c);c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};this.reportBrandNameClicked=function(a,c){c=f.newEvent(t.BRAND_NAME_CLICKED,c);c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};this.reportCreatorLogoClicked=function(a,c){c=f.newEvent(t.CREATOR_LOGO_CLICKED,c);c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};this.reportCreatorCtaClicked=function(a,c){c=f.newEvent(t.CREATOR_CTA_LINK_CLICKED,c);c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};
this.reportCtaBannerClicked=function(a,c){c=f.newEvent(t.CTA_BANNER_CLICKED,c);c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};this.reportHeadlineClicked=function(a,c){c=f.newEvent(t.HEADLINE_CLICKED,c);c[r.VIDEO_CURRENT_TIME_MS]=a;f.recordEvent(c)};this.reportEventBannerDisplayed=function(a,c){c=f.newEvent(t.EVENT_BANNER_DISPLAYED,c);c[r.LAYOUT]=a;f.recordEvent(c)};this.reportEventBannerClicked=function(a,c){c=f.newEvent(t.EVENT_BANNER_CLICKED,c);c[r.LAYOUT]=a;f.recordEvent(c)};this.reportMissingCreatorElement=
function(a){a=f.newEvent(t.MISSING_CREATOR_ELEMENT,a);f.recordEvent(a)};this.reportCarouselPageChanged=function(a,c,d){void 0===d&&(d=!1);var e=f.newEvent(t.CAROUSEL_PAGE_CHANGED);e[r.CAROUSEL_PAGE_NUMBER]=a;e[r.PREV_CAROUSEL_PAGE_NUMBER]=c;e[r.AUTO_SCROLLED]=d;f.recordEvent(e)};this.reportCardItemReceived=function(a,c){c=f.newEvent(t.CARD_ITEM_RECEIVED,c);c[r.CAROUSEL_PAGE_NUMBER]=a;f.recordEvent(c)};this.reportVideoPlayButtonTriggered=function(a,c){c=f.newEvent(t.VIDEO_PLAY_BUTTON_TRIGGERED,c);
c[r.CAROUSEL_ITEM_INDEX]=a;f.recordEvent(c)};this.reportViewMetricsAdUnitViewed=function(a,c,d){if(f.getShouldLogViewMetrics()){var e=f.newEvent(t.VM_AD_UNIT_VIEWED,a);f.recordEvent(e);c={p:Math.round(100*d),t:parseFloat((c/1E3).toFixed(3))};f.emitViewMetrics(Z.VIEWED,a,c)}};this.reportViewMetricsVideoViewed=function(a,c,d){f.getShouldLogViewMetrics()&&(a=f.newEvent(t.VM_VIDEO_VIEWED,a),f.recordEvent(a))};this.reportViewMetricsVideoProgressFiveSeconds=function(a){if(f.getShouldLogViewMetrics()){var c=
f.newEvent(t.VM_VIDEO_PROGRESS_FIVE_SECONDS,a);f.recordEvent(c);f.emitViewMetrics(Z.PROGRESS_FIVE_SECONDS,a)}};this.reportViewMetricsVideoFirstQuartile=function(a){if(f.getShouldLogViewMetrics()){var c=f.newEvent(t.VM_VIDEO_FIRST_QUARTILE,a);f.recordEvent(c);f.emitViewMetrics(Z.FIRST_QUARTILE,a)}};this.reportViewMetricsVideoMidpoint=function(a){if(f.getShouldLogViewMetrics()){var c=f.newEvent(t.VM_VIDEO_MIDPOINT,a);f.recordEvent(c);f.emitViewMetrics(Z.MIDPOINT,a)}};this.reportViewMetricsVideoThirdQuartile=
function(a){if(f.getShouldLogViewMetrics()){var c=f.newEvent(t.VM_VIDEO_THIRD_QUARTILE,a);f.recordEvent(c);f.emitViewMetrics(Z.THIRD_QUARTILE,a)}};this.reportViewMetricsVideoComplete=function(a){if(f.getShouldLogViewMetrics()){var c=f.newEvent(t.VM_VIDEO_COMPLETE,a);f.recordEvent(c);f.emitViewMetrics(Z.COMPLETE,a)}};this.reportViewMetricsVideoUnmute=function(a){if(f.getShouldLogViewMetrics()){var c=f.newEvent(t.VM_VIDEO_UNMUTE,a);f.recordEvent(c);f.emitViewMetrics(Z.UNMUTE,a)}};this.reportViewMetricsPostRequestFailure=
function(a,c,d){d=f.newEvent(t.VM_POST_FAILURE,d);d[r.VIEW_METRICS_FAILURE]=a;d[r.ERROR_MESSAGE]=c;f.recordEvent(d)};this.emitViewMetrics=function(a,c,d){void 0===d&&(d={});if(f.getShouldBillViewMetrics()){var e=c.instrumentationPixelUrl;void 0===e||""===e?f.reportViewMetricsPostRequestFailure(a,"instrumentationPixelUrl is empty or undefined",c):(d=JSON.stringify({v:p.__assign(p.__assign({},d),{def:"iab",event:a}),programType:"SBV"}),e="/"===e.substr(-1)?e+"v/":e+"/v/",Wc({onError:function(k){f.reportViewMetricsPostRequestFailure(a,
k.message,c)},payload:d,url:e+encodeURI(d)}))}};this.getShouldLogViewMetrics=function(){return f.viewMetricOptions.shouldLogViewMetrics};this.getShouldBillViewMetrics=function(){return f.viewMetricOptions.shouldLogViewMetrics&&f.viewMetricOptions.shouldBillViewMetrics};this.recordEvent=function(a){f.sushiClient.processEvent(a)};this.resetVideoAdAttributes=function(){return{advertiserId:void 0,campaignId:void 0,contentHash:void 0,headline:void 0,storeCta:void 0,imageUrl:void 0,instrumentationPixelUrl:void 0,
linkUrl:void 0,metricsIdentifier:void 0,videoPreviewImageSrc:void 0,videoSrc:void 0}};this.getDynamicMetricsAttributes=function(){var a,c;return null===(c=null===(a=f.clientMetricsContext)||void 0===a?void 0:a.getDynamicMetricsAttributes)||void 0===c?void 0:c.call(a)};this.newEvent=function(a,c,d){var e=f.getDynamicMetricsAttributes(),k=p.__assign,l=p.__assign,n=p.__assign,m=p.__assign,q=U(),v=q.innerWidth;q=q.innerHeight;var u=x["default"].cardRoot.getBoundingClientRect(),w=u.width;u=u.height;c=
k.call(p,l.call(p,n.call(p,m.call(p,{},{width:void 0===w?0:w,height:void 0===u?0:u,viewportWidth:v,viewportHeight:q}),f.defaultAttributes),c),d||e);c[r.EVENT_TYPE]=a;c[r.METRICS_SEQUENCE_NUMBER]=f.metricsSequenceNumber++;c[r.NETWORK_TYPE]=navigator&&navigator.connection&&navigator.connection.type;return c};this.browserWindow=U();this.metricsSequenceNumber=0;this.sushiClient=new cd(g,"SBVClientMetrics");this.defaultAttributes=p.__assign({},b);this.defaultAttributes[r.USER_AGENT]=navigator.userAgent;
this.viewMetricOptions=p.__assign(p.__assign({},sb),h);(g=this.browserWindow&&this.browserWindow.location&&this.browserWindow.location.href)&&(this.defaultAttributes[r.CURRENT_PAGE_URL]=g);b.pageNumber&&(b=parseInt(b.pageNumber,10),isNaN(b)||(this.defaultAttributes[r.PAGE_NUMBER]=b))}}(),ub=function(b){var g=Na.getStage();switch(b){default:return"https://unagi-na.amazon.com/1/events/com.amazon.eel.sbv.client."+g+".events";case "A1F83G8C2ARO7P":case "A1PA6795UKMFR9":case "A13V1IB3VIYZZH":case "APJ6JRA9NG5V4":case "A3HOBANJMCMD83":case "A1RKKUPIHCS9HS":case "AJZF8LZ1EJVJN":case "A21TJRUUN4KGV":case "A2XZLSVIQ0F4JT":return"https://unagi-eu.amazon.com/1/events/com.amazon.eel.sbv.client."+
g+".eu";case "A1VC38T7YXB528":return"https://unagi-fe.amazon.com/1/events/com.amazon.eel.sbv.client."+g+".fe"}},dd=["motorola edge","Moto"],vb=function(){return y["default"].capabilities.isAmazonApp?"app":"web"},wb=function(){var b=y["default"].capabilities.android?"android":y["default"].capabilities.ios?"ios":"unrecognized";"unrecognized"===b&&dd.forEach(function(g){navigator.userAgent.includes(g)&&(b="android")});return"desktop"===ya()?"unrecognized":b},ya=function(){return y["default"].capabilities.mobile?
"mobile":y["default"].capabilities.tablet?"tablet":"desktop"},ma;(ma||(ma={})).SEARCH_GRID="sbv-transition-search-grid";var S;(function(b){b.SEARCH_GRID="sbv-search-grid";b.SINGLE_ELEMENT="single-element"})(S||(S={}));var ed=y["default"].$,hd=function(){function b(){this.strategy={init:this.init,repaint:this.repaint,resize:this.resize}}b.prototype.register=function(){qa["default"].display[S.SEARCH_GRID]||pa["default"].registerStrategy("display",S.SEARCH_GRID,this.strategy)};b.prototype.init=function(g){var h=
g.getAttr(z["default"].FIRST_VISIBLE_ITEM);g.setAttr(z["default"].MIN_GUTTER,0);g.setAttr("currentGutter",0);this.repaint(g);1<h&&(h=Math.ceil(h/g.getAttr(z["default"].PAGE_SIZE)),g.gotoPage(h));fd(g)};b.prototype.repaint=function(g){var h=g.getDimensions().viewport.width,f=g.dom.$carousel.children("li").get(0).getBoundingClientRect();f=f.width?f.width:f.right-f.left;var a=gd(g,h,f);var c=g.dom.$carousel;var d=c.children("li"),e=d.length,k=g.getAttr(z["default"].PAGE_SIZE),l=g.getAttr(z["default"].SET_SIZE);
d=d.first().outerWidth(!0);h=k>=l?h:e*d;c.css("width",h+"px");h={carousel:{outerWidth:c.outerWidth(),width:h},items:[]};for(c=0;c<e;c++)h.items.push({outerWidth:d,width:f});g.updateDimensionsCache(h);g.gotoIndex(a,{animationDuration:0,ignorePause:!0});g.triggerEvent("repaint")};b.prototype.resize=function(g,h){h.viewport&&void 0!==h.viewport.width&&this.repaint(g)};b.prototype.getStrategy=function(){return this.strategy};return b}(),fd=function(b){b.onChange(z["default"].PAGE_NUMBER,function(){b.getAttr(z["default"].HIDE_OFF_SCREEN)&&
b.dom.$carousel.children("li").css("visibility","")});b.onChange(z["default"].ANIMATING,function(g){if(!g&&b.getAttr(z["default"].HIDE_OFF_SCREEN)){var h=b.getAttr(z["default"].FIRST_VISIBLE_ITEM)-1;var f=h+b.getAttr(z["default"].PAGE_SIZE)-1;b.dom.$carousel.children("li").each(function(a,c){a=a>=h&&a<=f;ed(c).css("visibility",a?"":"hidden")})}})},gd=function(b,g,h){var f=b.getAttr(z["default"].TOTAL_PAGES),a=b.getAttr(z["default"].PAGE_NUMBER),c=b.getAttr(z["default"].FIRST_VISIBLE_ITEM),d=b.getAttr(z["default"].HIDE_OFF_SCREEN),
e=b.dom.$carousel.children("li");g=id(b,g,h);var k=(a-1)*g+1;b.setAttr(z["default"].PAGE_SIZE,g);a>f?(c=(f-1)*g+1,b.setAttr(z["default"].PAGE_NUMBER,f),b.setAttr(z["default"].FIRST_VISIBLE_ITEM,c)):c!==k&&(f=Math.ceil(c/g),c=(f-1)*g+1,b.setAttr(z["default"].PAGE_NUMBER,f),b.setAttr(z["default"].FIRST_VISIBLE_ITEM,c));var l=c-1;var n=l+g-1;e.each(function(m,q){q.style.visibility=!d||m>=l&&m<=n?"":"hidden";q.style.width=h+"px"});return c},id=function(b,g,h){b=0;if(0<h)for(;-.5<g;)b++,g-=h;0>g&&b--;
return y["default"].isFiniteNumber(b)&&0<b?b:1},jd=function(){return function(){var b=this;this.updateRepaint=function(g){g.repaint=function(h){var f=h.getAttr("minimum_gutter_width"),a=h.getAttr("set_size"),c=h.dom.$carousel.children("li"),d=c.width();d-=2*f;c.css({width:d+"px",margin:"0 "+f+"px"});f=d+2*f;c=f*a;h.dom.$carousel.width(c);for(c={carousel:{width:c},items:[]};a--;)c.items[a]={width:d,outerWidth:f};h.updateDimensionsCache(c);h.gotoIndex(h.getAttr("firstVisibleItem"),{animationDuration:0,
ignorePause:!0});h.triggerEvent("repaint")}};this.getStrategy=function(){return b.strategy};this.register=function(){qa["default"].display[S.SINGLE_ELEMENT]||pa["default"].registerStrategy("display",S.SINGLE_ELEMENT,b.strategy)};this.strategy=y["default"].copy(qa["default"].display.single);this.updateRepaint(this.strategy)}}(),kd=function(){function b(){}b.registerStrategy=function(g){switch(g){case S.SEARCH_GRID:(new hd).register();break;case S.SINGLE_ELEMENT:(new jd).register();break;default:throw Error("Invalid carousel Strategy type");
}};return b}(),nd=function(){return function(){var b=this;this.register=function(){qa["default"].transition[ma.SEARCH_GRID]||pa["default"].registerStrategy("transition",ma.SEARCH_GRID,b.strategy)};this.gotoPage=function(g,h,f){var a=g.getAttr(z["default"].TOTAL_PAGES),c=g.getAttr(z["default"].CIRCULAR),d=g.getAttr(z["default"].PAGE_SIZE),e=g.getAttr(z["default"].SET_SIZE),k=d*(h-1)+1;f=f||{};xb(g,f);0<h&&h<=a&&g.setAttr(z["default"].PAGE_NUMBER,h);!c&&1>h?(h=1,f.animationDuration=NaN):!c&&h>a&&(h=
a,f.animationDuration=Math.pow(g.getAttr(z["default"].ANIMATION_SPEED),g.getAttr(z["default"].SPRINGINESS)));h===a&&(k=Math.min(k,e-d+1));b.gotoIndex(g,k,f)};this.gotoIndex=function(g,h,f){f=f||{};xb(g,f);var a=g.getAttr(z["default"].CIRCULAR)&&!g.getAttr(z["default"].CURRENTLY_WRAPPING);var c=f.callback;var d=null;var e=g.getViewportWidth();ld(g,h);g.setAttr(z["default"].FIRST_VISIBLE_ITEM,h);if(1>h){if(a){d=-e;var k=function(){c&&c();b.wrapToLast(g)}}}else h>g.getAttr(z["default"].SET_SIZE)?a&&
(d=g.getAttr(z["default"].CURRENT_PIXEL)+e,k=function(){c&&c();b.wrapToFirst(g)}):d=g.getItemOffset(h);md(g,f,k,c);null!==d&&b.strategy.gotoPixel(g,d,f)};this.getStrategy=function(){return b.strategy};this.strategy=y["default"].copy(qa["default"].transition.slideHorizontal);this.strategy.gotoPage=this.gotoPage;this.strategy.gotoIndex=this.gotoIndex}}(),ld=function(b,g){var h=b.getAttr(z["default"].TOTAL_PAGES),f=b.getAttr(z["default"].PAGE_NUMBER),a=b.getAttr(z["default"].PAGE_SIZE),c=b.getAttr(z["default"].SET_SIZE),
d=Math.ceil(g/a);g===c-a+1&&d!==f&&(d=h);d!==f&&0<d&&d<=h&&b.setAttr(z["default"].PAGE_NUMBER,d)},xb=function(b,g){(void 0===g.animationDuration||0<g.animationDuration)&&!g.silent&&b.setAttr(z["default"].ANIMATING,!0)},md=function(b,g,h,f){h?(b.setAttr(z["default"].CURRENTLY_WRAPPING,!0),g.callback=h,g.easingFunction=g.easingFunction||b.getAttr(z["default"].WRAP_EASING),g.animationSpeed=1.3*(y["default"].isFiniteNumber(g.animationSpeed)?g.animationSpeed:b.getAttr(z["default"].ANIMATION_SPEED))):g.callback=
f},od=function(){function b(){}b.registerStrategy=function(g){switch(g){case ma.SEARCH_GRID:(new nd).register();break;default:throw Error("Invalid carousel Strategy type");}};return b}(),W;(function(b){b.CARD_ITEM='[data-type="mbvItem"]';b.BRAND_CONTAINER='[data-type="brandContainer"]';b.BRAND_LOGO_HEADER_CONTAINER='[data-type="brandedLogoHeaderContainer"]'})(W||(W={}));var ha;(ha||(ha={})).SEARCH_GRID="searchGrid";var sa;(function(b){b.BrandVideoProduct="BrandVideoProduct";b.BrandVideoStore="BrandVideoStore";
b.ProductWithTintedCta="ProductWithTintedCta"})(sa||(sa={}));var aa=function(){function b(){}b.navigatorInternal=navigator;b.isIOS=function(){return y["default"].capabilities.ios};b.isIOSWebView=function(){return y["default"].capabilities.isAmazonApp&&y["default"].capabilities.ios};b.isWebView=function(){return y["default"].capabilities.isAmazonApp};b.isSafari=function(){return!(!b.navigatorInternal.vendor||!b.navigatorInternal.vendor.match(/apple/i))};return b}(),yb=function(){return function(b,
g,h,f){var a=this;this.viewMetricsHistoryMap={isViewedLogged:!1,isAdUnitViewedLogged:!1,isProgressFiveSecondsLogged:!1,isFirstQuartileLogged:!1,isMidpointLogged:!1,isThirdQuartileLogged:!1,isCompleteLogged:!1,isUnmuteLogged:!1};this.onVideoTimeUpdated=function(c,d,e,k){var l,n,m=a.adUnitManager?e:c,q=0;a.adUnitManager&&(q=a.adUnitManager.calculateVideoDurationTotalMsRelativeToAdUnit(e));if(!a.viewMetricsHistoryMap.isAdUnitViewedLogged&&2E3<=q){var v=!0;if(null===(l=a.eventHandlerOptions)||void 0===
l?0:l.shouldCheckObstruction)a.adUnitManager.forceVisibilityCheck(),e=a.adUnitManager.calculateVideoDurationTotalMsRelativeToAdUnit(e),2E3>e?v=!1:(null===(n=a.adUnitManager)||void 0===n?void 0:n.handleViewableImpressionForElements(),q=e);v&&(a.viewMetricsHistoryMap.isAdUnitViewedLogged=!0,n=a.adUnitManager.getAdUnitPercentInView(),a.metricsManager.reportViewMetricsAdUnitViewed(a.videoAdAttributes,q,n))}!a.viewMetricsHistoryMap.isViewedLogged&&2E3<=m&&(a.viewMetricsHistoryMap.isViewedLogged=!0,a.metricsManager.reportViewMetricsVideoViewed(a.videoAdAttributes,
m,k));!a.viewMetricsHistoryMap.isProgressFiveSecondsLogged&&5E3<=c&&(a.viewMetricsHistoryMap.isProgressFiveSecondsLogged=!0,a.metricsManager.reportViewMetricsVideoProgressFiveSeconds(a.videoAdAttributes));!a.viewMetricsHistoryMap.isFirstQuartileLogged&&c>=.25*d&&(a.viewMetricsHistoryMap.isFirstQuartileLogged=!0,a.metricsManager.reportViewMetricsVideoFirstQuartile(a.videoAdAttributes));!a.viewMetricsHistoryMap.isMidpointLogged&&c>=.5*d&&(a.viewMetricsHistoryMap.isMidpointLogged=!0,a.metricsManager.reportViewMetricsVideoMidpoint(a.videoAdAttributes));
!a.viewMetricsHistoryMap.isThirdQuartileLogged&&c>=.75*d&&(a.viewMetricsHistoryMap.isThirdQuartileLogged=!0,a.metricsManager.reportViewMetricsVideoThirdQuartile(a.videoAdAttributes))};this.onVideoReadyForPlayback=function(c,d,e,k){a.metricsManager.reportVideoReadyForPlayback(c,d,e,a.videoAdAttributes,k)};this.onTimeToFirstFrame=function(c,d,e){a.metricsManager.reportTimeToFirstFrame(c,d,e,a.videoAdAttributes)};this.onTimeToFirstInterrupt=function(c,d,e){a.metricsManager.reportTimeToFirstInterrupt(c,
d,e,a.videoAdAttributes)};this.onClientLoadToFirstFrame=function(c,d,e){a.metricsManager.reportClientLoadToFirstFrame(c,d,e,a.videoAdAttributes)};this.onVideoPlaybackFailure=function(c,d,e){a.metricsManager.reportVideoPlaybackFailure(c,e,d,a.videoAdAttributes)};this.onVideoPlaying=function(c,d,e){a.metricsManager.reportVideoPlaybackStarted(c,d,e,a.videoAdAttributes)};this.onVideoPlaybackPaused=function(c,d,e){a.metricsManager.reportVideoPaused(c,d,e,a.videoAdAttributes)};this.onPlaybackCompleted=
function(c,d){a.viewMetricsHistoryMap.isCompleteLogged||(a.viewMetricsHistoryMap.isCompleteLogged=!0,a.metricsManager.reportViewMetricsVideoComplete(a.videoAdAttributes));a.metricsManager.reportPlaybackCompleted(c,d,a.videoAdAttributes);if(a.eventHandlerOptions&&a.eventHandlerOptions.onPlaybackCompletedCallback)a.eventHandlerOptions.onPlaybackCompletedCallback()};this.onVideoBufferingStarted=function(c,d,e){a.bufferStartTimeMs=c;a.metricsManager.reportVideoBufferingStarted(c,d,e,a.videoAdAttributes)};
this.onVideoBufferingEnded=function(c,d,e){a.bufferStartTimeMs=0;a.metricsManager.reportVideoBufferingEnded(c,d,e,a.videoAdAttributes)};this.onVideoPlaybackFailedAfterPlayError=function(){a.metricsManager.reportPlaybackFailedToStartAfterPlay(a.videoAdAttributes)};this.onVideoAborted=function(c){a.metricsManager.reportVideoAborted(c,a.videoAdAttributes)};this.onVideoPlayPromiseRejected=function(c){a.metricsManager.reportVideoPlayPromiseRejected(c,a.videoAdAttributes)};this.onVideoPlayPromiseNotSupported=
function(){a.metricsManager.reportVideoPlayPromiseNotSupported(a.videoAdAttributes)};this.onVideoMuted=function(c,d){a.metricsManager.reportVideoSoundOff(c,d,a.videoAdAttributes)};this.onVideoUnmuted=function(c,d){a.viewMetricsHistoryMap.isUnmuteLogged||(a.viewMetricsHistoryMap.isUnmuteLogged=!0,a.metricsManager.reportViewMetricsVideoUnmute(a.videoAdAttributes));a.metricsManager.reportVideoSoundOn(c,d,a.videoAdAttributes)};this.onCcOn=function(c,d){a.metricsManager.reportCaptionsOn(c,a.videoAdAttributes,
d)};this.onCcOff=function(c,d){a.metricsManager.reportCaptionsOff(c,a.videoAdAttributes,d)};this.onCcLoadFailure=function(c){var d,e;a.metricsManager.reportCaptionsLoadFailure(""+(null===(d=c.target)||void 0===d?void 0:d.src),""+(null===(e=c.target)||void 0===e?void 0:e.readyState),a.videoAdAttributes)};this.onVideoDurationPlayed=function(c,d,e){a.metricsManager.reportVideoDurationPlayed(c,d,e,a.videoAdAttributes)};this.onVideoClicked=function(c){var d;a.metricsManager.reportVideoClicked(c,a.videoAdAttributes);
if(null===(d=a.eventHandlerOptions)||void 0===d?0:d.onImmersiveVideoCallback)a.eventHandlerOptions.onImmersiveVideoCallback(a.videoAdAttributes)};this.onVideoOnScreen=function(c){a.metricsManager.reportVideoOnScreen(c,a.videoAdAttributes)};this.onVideoOffScreen=function(c,d){a.metricsManager.reportVideoOffScreen(c,0!==a.bufferStartTimeMs,d,a.videoAdAttributes)};this.onVideoPlaybackInitiated=function(c){a.metricsManager.reportVideoPlaybackInitiated(c,a.videoAdAttributes)};this.onVideoPlayFromPause=
function(c){a.metricsManager.reportVideoPlayFromPause(c,a.videoAdAttributes)};this.onVideoPauseInitiated=function(c){a.metricsManager.reportVideoPauseInitiated(c,a.videoAdAttributes)};this.onVideoPreviewImageNotMediaAmazon=function(){a.metricsManager.reportVideoPreviewImageNotMediaAmazon(a.videoAdAttributes)};this.onVideoPauseButtonTriggered=function(c){a.metricsManager.reportVideoPauseButtonTriggered(c,a.videoAdAttributes)};this.onVideoViewed=function(c){a.metricsManager.reportVideoView(c,aa.isIOSWebView(),
a.videoAdAttributes)};this.onVideoClearedOnHiddenBrowser=function(){a.metricsManager.reportVideoClearedOnHiddenBrowser(a.videoAdAttributes)};this.onVideoLoadedOnVisibleBrowser=function(){a.metricsManager.reportVideoLoadedOnVisibleBrowser(a.videoAdAttributes)};this.onAudioToggleIconDisplayed=function(){a.metricsManager.reportAudioToggleIconDisplayed(a.videoAdAttributes)};this.onPauseIconDisplayed=function(){a.metricsManager.reportPauseIconDisplayed(a.videoAdAttributes)};this.onCcIconDisplayed=function(){a.metricsManager.reportCcIconDisplayed(a.videoAdAttributes)};
this.onVideoPausedDueToAutoplayDisabled=function(){a.metricsManager.reportVideoPausedOnAutoplayDisabled(a.videoAdAttributes)};this.onAdblockDetected=function(){a.metricsManager.reportAdblockDetected(a.videoAdAttributes)};this.metricsManager=b;this.videoAdAttributes=g;this.bufferStartTimeMs=0;this.eventHandlerOptions=h;this.adUnitManager=f}}(),zb=function(){return function(b,g){var h=this;this.reportIfBoundaryCrossed=function(f,a,c,d,e){h.isValidBoundaryTime(c)&&(f<=a?h.insideInterval(f,a)&&h.callback(h.boundaryTime,
d,e):(h.insideInterval(0,a)||h.insideInterval(f,c))&&h.callback(h.boundaryTime,d,e))};this.insideInterval=function(f,a){return h.boundaryTime>f&&h.boundaryTime<=a};this.isValidBoundaryTime=function(f){return 0<=h.boundaryTime&&h.boundaryTime<=f};this.boundaryTime=b;this.callback=g}}(),pd=function(b,g,h){y["default"].on("a:truncate:"+b+":updated",function(f){var a,c;f=f.truncateInstance;var d=x["default"].cardRoot.querySelector(g),e=null===d||void 0===d?void 0:d.getAttribute(h);d&&e&&f.getTruncatedText()!==
f.getFullText()&&(null===(c=null===(a=f._$cut)||void 0===a?void 0:a.html)||void 0===c?void 0:c.call(a,e))});Gc.refreshAutoTruncate()},Oa=function(){return y["default"].capabilities&&y["default"].capabilities.isAmazonApp},qd=function(){return new Promise(function(b){P.when("mash").execute(b)})},rd=function(b){return Oa()?new Promise(function(g){P.when("MShopChrome").execute(function(h){var f,a;null===(f=h.getBottomBarsHeight)||void 0===f?void 0:f.call(h,{successCallback:function(c){b.bottomHeightSetter(c.visibleHeight)}});
null===(a=h.getChromeInfo)||void 0===a?void 0:a.call(h,{successCallback:function(c){var d=c.portraitChromeHeight;c.isTransparentNav&&b.topHeightSetter(d)}})});P.when("mash").execute(function(h){var f=function(a){a=a.detail;b.bottomHeightSetter(null===a||void 0===a?void 0:a.visibleHeight)};h.addEventListener("bottomBarsUpdate",f);g(function(){return h.removeEventListener("bottomBarsUpdate",f)})})}):Promise.resolve(function(){})},sd=function(b){return Oa()?new Promise(function(g){P.when("mash").execute(function(h){var f,
a,c;null===(c=null===(a=null===(f=h.appCX)||void 0===f?void 0:f.uiOrchestrator)||void 0===a?void 0:a.getObstructions)||void 0===c?void 0:c.call(a,{successCallback:function(e){b(Ab(e))}});var d=function(e){b(Ab(e.detail))};h.addEventListener("obstructionsChanged",d);g(function(){return h.removeEventListener("obstructionsChanged",d)})})}):Promise.resolve(function(){})},Ab=function(b){var g,h,f=b.isFullyObstructed;b=b.boundingBoxes;return{isFullyObstructed:void 0===f?!1:f,top:(null===(g=null===b||void 0===
b?void 0:b.find(function(a){return 0===a.top}))||void 0===g?void 0:g.height)||0,bottom:(null===(h=null===b||void 0===b?void 0:b.find(function(a){return 0!==a.top}))||void 0===h?void 0:h.height)||0}},ia=function(){function b(){}b.getObstructionRatio=function(g,h){var f,a,c;void 0===h&&(h=!1);var d=Y(),e=U(),k=g.getBoundingClientRect();h=this.getPointsToCheck(k,e.innerHeight,h);if(null===h||void 0===h||!h.length)return 0;k=[];try{for(var l=p.__values(h),n=l.next();!n.done;n=l.next()){var m=p.__read(n.value,
2),q=m[0],v=m[1],u=d.elementsFromPoint(q,v);try{for(var w=(a=void 0,p.__values(u)),A=w.next();!A.done;A=w.next()){var B=A.value;if(!this.shouldSkipElement(B,g)){if(B===g||g.contains(B))break;var G=e.getComputedStyle(B);if(!this.isInvisibleElement(G)&&!this.isTransparentElement(G)){k.push([q,v]);break}}}}catch(C){a={error:C}}finally{try{A&&!A.done&&(c=w.return)&&c.call(w)}finally{if(a)throw a.error;}}}}catch(C){var J={error:C}}finally{try{n&&!n.done&&(f=l.return)&&f.call(l)}finally{if(J)throw J.error;
}}return k.length/h.length};b.shouldSkipElement=function(g,h){h=Y();return!(g instanceof HTMLElement)||g===h.body||"HTML"===g.tagName};b.isInvisibleElement=function(g){return"none"===g.display||"hidden"===g.visibility||"0"===g.opacity||"none"===g.pointerEvents||.7>parseFloat(g.opacity)};b.isTransparentElement=function(g){var h=g.backgroundColor;return("transparent"===h||"rgba(0, 0, 0, 0)"===h||""===h)&&!g.backgroundImage.includes("url")};b.getPointsToCheck=function(g,h,f){var a=[.25,.75],c=function(n,
m){var q,v=[];try{for(var u=p.__values(m),w=u.next();!w.done;w=u.next())v.push([g.left+g.width*w.value,n])}catch(B){var A={error:B}}finally{try{w&&!w.done&&(q=u.return)&&q.call(u)}finally{if(A)throw A.error;}}return v},d=Math.min(10,Math.ceil(g.height/50));f=function(n){if(!n)return a;n=Math.min(4,Math.ceil(g.width/100));for(var m=[],q=0;q<n;q++)m.push((q+.5)/n);return m}(f);for(var e=[],k=0;k<d;k++){var l=g.top+g.height*(k+.5)/d;0<=l&&l<=h&&e.push.apply(e,p.__spread(c(l,f)))}return e};b.nativeBottomBarHeight=
0;b.nativeTopBarHeight=0;b.isFullyObstructedNative=!1;b.getNativeTopBarHeight=function(){return b.nativeTopBarHeight};b.getNativeBottomBarHeight=function(){return b.nativeBottomBarHeight};b.getIsFullyObstructedNative=function(){return b.isFullyObstructedNative};b.setupMashObstructionListeners=function(g){return sd(function(h){var f=h.isFullyObstructed,a=h.top;b.nativeBottomBarHeight=h.bottom;b.nativeTopBarHeight=a;b.isFullyObstructedNative=f;null===g||void 0===g?void 0:g()})};b.setupMShopChromeListeners=
function(g){return rd({topHeightSetter:function(h){b.nativeTopBarHeight=h;null===g||void 0===g?void 0:g()},bottomHeightSetter:function(h){b.nativeBottomBarHeight=h;null===g||void 0===g?void 0:g()}})};b.getPercentInView=function(g,h){if(b.getIsFullyObstructedNative())return 0;var f=U();try{var a=f.innerWidth||f.clientWidth||0,c=f.innerHeight||f.clientHeight||0,d=b.getNormalizedBoundingRect(g);g=c;var e=d.top,k=d.bottom;g=Math.max(c-b.getNativeTopBarHeight()-b.getNativeBottomBarHeight(),0);e=Math.max(d.top-
b.getNativeTopBarHeight(),0);k=Math.max(d.bottom-b.getNativeTopBarHeight(),0);var l=b.getViewableSegment(e,k,g),n=b.getViewableSegment(d.left,d.right,a);c=void 0;c=(null===h||void 0===h?0:h.shouldAreaOnlyUseElementWidth)?d.width:Math.min(d.width,a);return l*n/(d.height*c)}catch(m){return 0}};b.getViewableSegment=function(g,h,f){return g>f&&h>f?0:Math.min(0<g?f-g:0<h?Math.min(h,f):0,h-g)};b.getNormalizedBoundingRect=function(g){g=g.getBoundingClientRect();g.height=g.height||g.bottom-g.top;g.width=
g.width||g.right-g.left;return g};return b}(),L;(function(b){b.PLAYING="playing";b.PAUSED="paused";b.BUFFERING="buffering";b.INITIATED="initiated";b.END="ended"})(L||(L={}));var td=function(){return function(b,g,h,f,a,c,d){var e=this;void 0===h&&(h=[]);void 0===f&&(f=[]);void 0===a&&(a=x["default"].cardRoot);void 0===d&&(d=!1);var k,l;this.generateNewTextTrack=function(m){if(!m||!m.cues||0===m.cues.length)return null;var q=e.videoElement.addTextTrack("captions"),v=m.cues;m=function(w){var A=v[w];
w=A.startTime;var B=A.endTime;A=A.text.trim();var G=A.split(" "),J=A.length-G.length,C=B-w,H=w,K=[];G.forEach(function(I){var T=K.join(" ");if(32<T.length+I.length){var ba=H+(T.length-K.length+1)/J*C;q.addCue(new VTTCue(H,ba,T));H=ba;K=[]}K.push(I)});0<K.length&&q.addCue(new VTTCue(H,B,K.join(" ")))};for(var u=0;u<v.length;u++)m(u);q.mode="hidden";return q};this.checkAndUpdateCC=function(){var m;if(e.ccText){var q=null===(m=e.videoElement.textTracks)||void 0===m?void 0:m[0];(m=null===q||void 0===
q?void 0:q.activeCues)&&0<m.length&&""===e.ccText.innerHTML&&(e.ccText.innerHTML=m[0].text)}};this.play=function(m){e.initiatedPlayTime||(e.initiatedPlayTime=m);e.checkAndUpdateCC();return e.playbackState!==L.PLAYING&&e.videoElement.paused?(m=e.playInternal())?m:Promise.reject("NotSupported"):Promise.resolve()};this.pause=function(){e.firstFramePlayed||e.firstInterrupt||!e.initiatedPlayTime||e.handleFirstInterrupt();e.playbackState!==L.PAUSED&&e.playbackState===L.PLAYING&&(e.playbackState=L.PAUSED,
e.videoElement.pause())};this.seekToStart=function(){e.accrueContinuousPlaybackDuration(e.getCurrentTimeMs());e.ccText&&(e.ccText.innerHTML="");e.lastOnTimeUpdateCurrentTimeMs=0;e.videoElement.currentTime=0};this.mute=function(){e.videoElement.muted=!0};this.unmute=function(){e.videoElement.muted=!1};this.isMuted=function(){return e.videoElement.muted};this.getCaptionLang=function(){return null!=e.videoElement.textTracks[0].language?e.videoElement.textTracks[0].language:"No Language Given"};this.getCurrentTimeMs=
function(){return Math.round(1E3*e.videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*e.videoElement.duration)};this.getDroppedFrames=function(){return e.videoElement.getVideoPlaybackQuality?e.videoElement.getVideoPlaybackQuality().droppedVideoFrames:void 0!==e.videoElement.webkitDroppedFrameCount?e.videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return e.continuousDurationAccruedPlayTimeMs+(e.getCurrentTimeMs()-e.continuousDurationStartTimeMs)};
this.resetContinuousPlaybackDurationMs=function(){var m=e.getCurrentTimeMs();e.continuousDurationAccruedPlayTimeMs=0;m===e.getDurationMs()?e.continuousDurationStartTimeMs=0:e.continuousDurationStartTimeMs=m;e.continuousDurationBoundaryChecks.forEach(function(q){q.resetReported()})};this.getPercentDownloaded=function(){var m=e.videoElement.buffered;if(!m)return 0;for(var q=0,v=0;v<m.length;v++)q+=m.end(v)-m.start(v);return q/e.videoElement.duration};this.load=function(){e.videoElement.load()};this.isNavBackLoadPending=
function(){return e.navBackLoadPending};this.attachLoadStartCallback=function(m){e.videoElement.addEventListener("loadstart",function(){return m()},{once:!0})};this.loadVideoOnBrowserVisible=function(){var m=e.videoElement.dataset.videoSource;!e.videoElement.src&&m&&(e.videoElement.src=m,e.navBackLoadPending=!0,e.load(),e.eventHandler.onVideoLoadedOnVisibleBrowser())};this.clear=function(){e.videoElement.dataset.videoSource=e.videoElement.src;e.videoElement.removeAttribute("src");e.load();e.eventHandler.onVideoClearedOnHiddenBrowser();
e.handleFirstInterrupt()};this.hasSrcAttr=function(){return e.videoElement.hasAttribute("src")};this.getDateTime=function(){return Date.now()};this.playInternal=function(){return e.shouldDelayVideoPlayback?4===e.videoElement.readyState?e.videoElement.play():(new Promise(function(m){e.videoElement.addEventListener("canplaythrough",m,{once:!0})})).then(function(){return e.videoElement.play()}):e.videoElement.play()};this.videoOnCanPlayEvent=function(){e.stopVideoLoadingAnimation();if(!e.assetLoaded){var m=
e.getDateTime()-e.loadStartTime;e.eventHandler.onVideoReadyForPlayback(m,e.retryLoadCount,e.getPercentDownloaded(),e.getDurationMs());e.assetLoaded=!0}};this.stopVideoLoadingAnimation=function(){if(e.isVideoLoadingAnimationVisible){var m=e.videoContainer.querySelector("[data-type=loadingAnimation]");m&&(m.style.visibility="hidden",e.isVideoLoadingAnimationVisible=!1)}};this.videoOnLoadStartEvent=function(){e.navBackLoadPending=!1};this.videoOnErrorEvent=function(){!e.assetLoaded&&3>e.retryLoadCount?
(e.retryLoadCount++,setTimeout(e.videoElement.load.bind(e.videoElement),2E3)):(e.stopVideoLoadingAnimation(),e.handleVideoPlaybackFailureEvent())};this.videoOnPlayingEvent=function(){e.handleFirstFramePlayedEvent();if(e.playbackState===L.BUFFERING)e.eventHandler.onVideoBufferingEnded(e.getCurrentTimeMs(),e.getPercentDownloaded(),e.getDroppedFrames());if(e.playbackState!==L.END)e.eventHandler.onVideoPlaying(e.getCurrentTimeMs(),e.getPercentDownloaded(),e.getDroppedFrames());e.playbackState=L.PLAYING};
this.videoOnPauseEvent=function(){e.videoElement.currentTime!==e.videoElement.duration&&(e.playbackState=L.PAUSED,e.eventHandler.onVideoPlaybackPaused(e.getCurrentTimeMs(),e.getPercentDownloaded(),e.getDroppedFrames()))};this.videoOnEndedEvent=function(){return p.__awaiter(e,void 0,void 0,function(){return p.__generator(this,function(m){switch(m.label){case 0:return this.playbackState=L.END,this.ccText&&(this.ccText.innerHTML=""),this.accrueContinuousPlaybackDuration(this.getDurationMs()),this.eventHandler.onPlaybackCompleted(this.getDurationMs(),
this.getDroppedFrames()),this.videoElement.dataset.disableLooping&&"false"!==this.videoElement.dataset.disableLooping?[3,2]:[4,this.playInternal()];case 1:m.sent(),m.label=2;case 2:return[2]}})})};this.videoOnWaitingEvent=function(){e.playbackState=L.BUFFERING;e.eventHandler.onVideoBufferingStarted(e.getCurrentTimeMs(),e.getPercentDownloaded(),e.getDroppedFrames())};this.videoOnTimeUpdateEvent=function(){var m=e.getCurrentTimeMs(),q=e.getContinuousPlaybackDurationMs();e.continuousDurationBoundaryChecks.forEach(function(u){u.reportIfBoundaryCrossed(q)});
e.boundaryChecks.forEach(function(u){u.reportIfBoundaryCrossed(e.lastOnTimeUpdateCurrentTimeMs,m,e.getDurationMs(),e.getPercentDownloaded(),e.getDroppedFrames())});e.lastOnTimeUpdateCurrentTimeMs=m;var v=ia.getPercentInView(e.videoElement);e.eventHandler.onVideoTimeUpdated(m,e.getDurationMs(),q,v)};this.videoOnAbortEvent=function(){e.stopVideoLoadingAnimation();e.eventHandler.onVideoAborted(e.getCurrentTimeMs())};this.handleFirstFramePlayedEvent=function(){if(!e.firstFramePlayed&&!e.firstInterrupt&&
e.initiatedPlayTime){var m=e.getDateTime()-e.initiatedPlayTime;e.eventHandler.onTimeToFirstFrame(m,e.getPercentDownloaded(),e.getDroppedFrames());e.firstFramePlayed=!0;e.clientInitiatedStartTime&&(m=e.getDateTime()-e.clientInitiatedStartTime,e.eventHandler.onClientLoadToFirstFrame(m,e.getPercentDownloaded(),e.getDroppedFrames()))}};this.handleFirstInterrupt=function(){if(!e.firstFramePlayed&&!e.firstInterrupt&&e.initiatedPlayTime){var m=e.getDateTime()-e.initiatedPlayTime;e.eventHandler.onTimeToFirstInterrupt(m,
e.getPercentDownloaded(),e.getDroppedFrames());e.firstInterrupt=!0}};this.handleVideoPlaybackFailureEvent=function(){if(e.videoElement.error){var m=e.translateVideoErrorCode(e.videoElement.error.code);e.eventHandler.onVideoPlaybackFailure(e.getCurrentTimeMs(),m,e.videoElement.error.message)}};this.translateVideoErrorCode=function(m){switch(m){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"UNKNOWN"}};
this.accrueContinuousPlaybackDuration=function(m){e.continuousDurationAccruedPlayTimeMs+=m-e.continuousDurationStartTimeMs;e.continuousDurationStartTimeMs=0};this.videoElement=b;this.eventHandler=g;this.lastOnTimeUpdateCurrentTimeMs=this.continuousDurationAccruedPlayTimeMs=this.continuousDurationStartTimeMs=0;this.boundaryChecks=h;this.continuousDurationBoundaryChecks=f;this.playbackState=L.INITIATED;this.loadStartTime=this.getDateTime();this.assetLoaded=!1;this.retryLoadCount=0;this.firstInterrupt=
this.firstFramePlayed=!1;this.isVideoLoadingAnimationVisible=!0;this.videoContainer=a;this.clientInitiatedStartTime=c;this.videoElement.oncanplay=this.videoOnCanPlayEvent;this.videoElement.onerror=this.videoOnErrorEvent;this.videoElement.onplaying=this.videoOnPlayingEvent;this.videoElement.onpause=this.videoOnPauseEvent;this.videoElement.onended=this.videoOnEndedEvent;this.videoElement.onwaiting=this.videoOnWaitingEvent;this.videoElement.ontimeupdate=this.videoOnTimeUpdateEvent;this.videoElement.onabort=
this.videoOnAbortEvent;this.videoElement.onloadstart=this.videoOnLoadStartEvent;this.navBackLoadPending=!1;this.shouldDelayVideoPlayback=d;4===this.videoElement.readyState&&(this.eventHandler.onVideoReadyForPlayback(0,0,this.getPercentDownloaded(),this.getDurationMs()),this.assetLoaded=!0,this.stopVideoLoadingAnimation());if(this.videoElement.error&&this.videoElement.error.code)this.videoElement.onerror("TriggeredBeforeInit");b=this.videoElement.dataset.poster;this.videoElement.poster!==b&&(this.videoElement.poster=
b);var n=null===(k=this.videoElement.textTracks)||void 0===k?void 0:k[0];this.ccText=a.querySelector('[data-type="ccText"]');a="true"===this.videoElement.dataset.isVerticalVideo;n&&this.ccText&&(n.mode="hidden",a?null===(l=this.videoElement.querySelector("track"))||void 0===l?void 0:l.addEventListener("load",function(){var m=e.generateNewTextTrack(n);m&&m.addEventListener("cuechange",function(){var q=m.activeCues;this.ccText.innerHTML=q&&0<q.length?q[0].text:""}.bind(e))}):n.addEventListener("cuechange",
function(){var m=n.activeCues;this.ccText.innerHTML=m&&0<m.length?m[0].text:""}.bind(this)))}}(),ca=function(){function b(){}b.handleViewableImpression=function(){b.registeredElements.forEach(function(h){h.viewableImpressionFired=!0});var g=Y();D.removeEventListenerSafely(g,"click",1,b.throttledOnBrowserViewChangeForClickEvent)};b.shouldCheckObstruction=function(g){return!g.viewableImpressionFired};b.registeredElements=[];b.attachedToViewWillDisappear=!1;b.hasSetupNativeObstructionListeners=!1;b.registerElement=
function(g,h,f,a,c,d,e,k){g={callback:d,dispatchOnElementInView:f,dispatchOnElementOutOfView:a,element:g,isInView:void 0,ratioInView:h,recurring:c,eventData:e,options:k};0===b.registeredElements.length&&b.attachListeners(k);b.registeredElements.push(g);b.handleViewChange(g);return g};b.deregisterElement=function(g,h,f,a,c){b.registeredElements=b.registeredElements.filter(function(d){return!(d.element===g&&d.ratioInView===h&&d.dispatchOnElementInView===f&&d.dispatchOnElementOutOfView===a&&d.recurring===
c)});0===b.registeredElements.length&&b.detachListeners()};b.emitViewabilityChange=function(g,h){g.isInView=h;g.callback(g.ratioInView,h,g.eventData);g.recurring||b.deregisterElement(g.element,g.ratioInView,g.dispatchOnElementInView,g.dispatchOnElementOutOfView,g.recurring)};b.shouldThrottleObstructionCheck=function(g){return 200>Date.now()-g};b.checkObstruction=function(){var g=0,h=0;return function(f,a){var c,d;void 0===a&&(a=!1);if(b.shouldCheckObstruction(f)){var e=Date.now();!a&&b.shouldThrottleObstructionCheck(g)?
b.emitViewabilityChange(f,h>=f.ratioInView):(g=e,a=ia.getPercentInView(f.element,f.options),isNaN(a)||(e=ia.getObstructionRatio(f.element,null!==(d=null===(c=f.options)||void 0===c?void 0:c.isDesktop)&&void 0!==d?d:!1),h=c=a-e,b.emitViewabilityChange(f,c>=f.ratioInView)))}else b.emitViewabilityChange(f,h>=f.ratioInView)}}();b.handleRatioInViewChange=function(g,h){var f;g.dispatchOnElementInView&&h>=g.ratioInView?(null===(f=g.options)||void 0===f?0:f.shouldCheckObstructionOnRecalculation)&&.5<=h&&
!g.isInView?b.checkObstruction(g):g.isInView||b.emitViewabilityChange(g,!0):g.dispatchOnElementOutOfView&&h<g.ratioInView&&g.isInView&&b.emitViewabilityChange(g,!1)};b.handleBrowserHidden=function(g){b.handleRatioInViewChange(g,0)};b.handleViewChange=function(g){var h,f=ia.getPercentInView(g.element,g.options);isNaN(f)||((null===(h=g.options)||void 0===h?0:h.shouldCheckObstructionOnRecalculation)&&g.isInView&&.5<=f&&.5<=g.ratioInView?b.emitViewabilityChange(g,!0):b.handleRatioInViewChange(g,f))};
b.onBrowserHidden=function(){b.registeredElements.forEach(b.handleBrowserHidden)};b.onBrowserShown=function(){b.registeredElements.forEach(function(g){return b.handleViewChange(g)})};b.onBrowserVisibilityChange=function(){var g=Y().hidden;if(g)b.onBrowserHidden();else setTimeout(b.onBrowserShown,50);b.registeredElements.forEach(function(h){var f,a;null===(a=null===(f=h.options)||void 0===f?void 0:f.onBrowserVisibilityChange)||void 0===a?void 0:a.call(f,!g)})};b.toggleBrowserVisibility=function(){b.onBrowserHidden();
b.onBrowserShown()};b.attachNativeListeners=function(g){var h=function(){var f;null===(f=b.throttledOnBrowserViewChange)||void 0===f?void 0:f.call(b)};qd().then(function(f){var a,c;(null===(c=null===(a=null===f||void 0===f?void 0:f.appCX)||void 0===a?void 0:a.uiOrchestrator)||void 0===c?0:c.getObstructions)&&(null===g||void 0===g?0:g.shouldCallGetObstructionsMash)?b.mashObstructionCleanupPromise=ia.setupMashObstructionListeners(h):b.mashBottomBarUpdateCleanupPromise=ia.setupMShopChromeListeners(h);
b.hasSetupNativeObstructionListeners=!0})};b.attachListeners=function(g){Oa()&&(null===g||void 0===g?0:g.shouldCheckNativeObstructions)&&!b.hasSetupNativeObstructionListeners&&b.attachNativeListeners(g);b.throttledOnBrowserViewChange||(b.throttledOnBrowserViewChange=y["default"].throttle(function(){b.registeredElements.forEach(function(c){return b.handleViewChange(c)})},50));b.throttledOnBrowserViewChangeForClickEvent||(b.throttledOnBrowserViewChangeForClickEvent=y["default"].throttle(function(){setTimeout(function(){b.registeredElements.forEach(function(c){var d;
(null===(d=c.options)||void 0===d?0:d.shouldCheckObstruction)&&b.checkObstruction(c,!0)})},300)},50));y["default"].on("afterReady",b.throttledOnBrowserViewChange);y["default"].on(y["default"].constants.BROWSER_EVENTS.SCROLL,b.throttledOnBrowserViewChange);y["default"].on(y["default"].constants.BROWSER_EVENTS.RESIZE,b.throttledOnBrowserViewChange);y["default"].on(y["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,b.throttledOnBrowserViewChange);var h=x["default"].cardRoot.querySelector(".sbv-desktop-scroller");
h&&D.addEventListener(h,"scroll",1,b.throttledOnBrowserViewChange);h=U();var f=Y(),a=null===f||void 0===f?void 0:f.querySelector('div[cel_widget_id="gwm-window-container"]');a&&D.addEventListener(a,"scroll",1,b.throttledOnBrowserViewChange);D.addEventListener(h,"beforeunload",1,b.onBrowserHidden);D.addEventListener(f,"visibilitychange",1,b.onBrowserVisibilityChange);aa.isWebView()||(D.addEventListener(h,"focus",1,b.onBrowserShown),D.addEventListener(h,"blur",1,b.onBrowserHidden));aa.isSafari()&&!aa.isWebView()&&
(D.addEventListener(h,"pagehide",1,b.onBrowserHidden),D.addEventListener(h,"pageshow",1,b.onBrowserShown),D.addEventListener(h,"popstate",1,b.toggleBrowserVisibility));(null===g||void 0===g?0:g.shouldCheckObstruction)&&D.addEventListener(f,"click",1,b.throttledOnBrowserViewChangeForClickEvent);b.attachToViewWillDisappear()};b.detachNativeListeners=function(){var g,h;null===(g=b.mashBottomBarUpdateCleanupPromise)||void 0===g?void 0:g.then(function(f){return f()});null===(h=b.mashObstructionCleanupPromise)||
void 0===h?void 0:h.then(function(f){return f()})};b.detachListeners=function(){y["default"].off("afterReady",b.throttledOnBrowserViewChange);y["default"].off(y["default"].constants.BROWSER_EVENTS.SCROLL,b.throttledOnBrowserViewChange);y["default"].off(y["default"].constants.BROWSER_EVENTS.RESIZE,b.throttledOnBrowserViewChange);y["default"].off(y["default"].constants.BROWSER_EVENTS.ORIENTATION_CHANGE,b.throttledOnBrowserViewChange);b.detachNativeListeners();var g=x["default"].cardRoot.querySelector(".sbv-desktop-scroller");
g&&D.removeEventListener(g,"scroll",1,b.throttledOnBrowserViewChange);g=U();var h=Y(),f=null===h||void 0===h?void 0:h.querySelector('div[cel_widget_id="gwm-window-container"]');f&&D.removeEventListener(f,"scroll",1,b.throttledOnBrowserViewChange);D.removeEventListener(h,"visibilitychange",1,b.onBrowserVisibilityChange);D.removeEventListener(g,"beforeunload",1,b.onBrowserHidden);aa.isWebView()||(D.removeEventListener(g,"focus",1,b.onBrowserShown),D.removeEventListener(g,"blur",1,b.onBrowserHidden));
aa.isSafari()&&!aa.isWebView()&&(D.removeEventListener(g,"pagehide",1,b.onBrowserHidden),D.removeEventListener(g,"pageshow",1,b.onBrowserShown),D.removeEventListener(g,"popstate",1,b.toggleBrowserVisibility));D.removeEventListener(h,"click",1,b.throttledOnBrowserViewChangeForClickEvent)};b.attachToViewWillDisappear=function(){if(!b.attachedToViewWillDisappear){var g=U();b.attachedToViewWillDisappear=!0;g.app||(g.app={});b.previousViewWillDisappear=g.app.willDisappear;g.app.willDisappear=function(){b.onBrowserHidden();
b.previousViewWillDisappear&&b.previousViewWillDisappear()}}};return b}(),Pa;(function(b){b.PORTRAIT="PORTRAIT";b.LANDSCAPE="LANDSCAPE";b.SQUARE="SQUARE"})(Pa||(Pa={}));var za;(function(b){b.DESKTOP="Desktop";b.MOBILE="Mobile"})(za||(za={}));var Aa,Qa,Ba,Ca,Ra,Da,Ea,Sa,Ta,O={SBV_672322:"SBV_672322",SBV_708584:"SBV_708584",SBV_836067:"SBV_836067",SBV_842986:"SBV_842986",ADPT_SBV_1041956:"ADPT_SBV_1041956",ADPT_SEARCH_VIEWABILITY_OBSTRUCTION_1221117:"ADPT_SEARCH_VIEWABILITY_OBSTRUCTION_1221117",ADPT_SBV_DELAY_PLAYBACK_UNTIL_READY_1248744:"ADPT_SBV_DELAY_PLAYBACK_UNTIL_READY_1248744"},
da={ADPT_SBV_MSHOP_NATIVE_VIEWABILITY_OBSTRUCTION_V2_1236420:"ADPT_SBV_MSHOP_NATIVE_VIEWABILITY_OBSTRUCTION_V2_1236420"},Bb=p.__assign(p.__assign({},O),{SBV_814590:"SBV_814590"}),Cb=p.__assign(p.__assign({},Bb),{MBV_394048:"MBV_394048",SBV_414150:"SBV_414150",SBV_427616:"SBV_427616",ADPT_SBV_959560:"ADPT_SBV_959560",SBV_620753:"SBV_620753",SBV_642751:"SBV_642751",SBV_656845:"SBV_656845",SBV_668132:"SBV_668132"}),Db=p.__assign(p.__assign(p.__assign({},da),Bb),{MBV_394383:"MBV_394383",SBV_414153:"SBV_414153",
SBV_427647:"SBV_427647",ADPT_SBV_959572:"ADPT_SBV_959572",ADPT_SBV_983988:"ADPT_SBV_983988",SBV_642769:"SBV_642769",SBV_656827:"SBV_656827",SBV_668135:"SBV_668135",SBV_677302:"SBV_677302",SBV_682273:"SBV_682273",ADPT_SBV_992627:"ADPT_SBV_992627"}),Eb=p.__assign(p.__assign({},da),O),Fb=p.__assign(p.__assign({},O),{SBV_576903:"SBV_576903",SBV_576904:"SBV_576904"}),Gb=p.__assign(p.__assign(p.__assign({},da),O),{SBV_576917:"SBV_576917",SBV_576918:"SBV_576918"}),Hb=p.__assign(p.__assign({},O),{SBV_485007:"SBV_485007",
SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",ADPT_SBV_1163064:"ADPT_SBV_1163064"}),Ib=p.__assign(p.__assign({},Hb),{SBV_793878:"SBV_793878"}),Jb=p.__assign(p.__assign({},da),Hb),Ua=p.__assign(p.__assign({},O),{SBV_485007:"SBV_485007",SB_VIDEO_CONTENT_DEDUPE_454175:"SB_VIDEO_CONTENT_DEDUPE_454175",SBV_716513:"SBV_716513",ADPT_SBV_1163064:"ADPT_SBV_1163064"}),ud=p.__assign(p.__assign({},da),Ua),vd=p.__assign(p.__assign({},O),{ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1115870:"ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1115870",
ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604:"ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604",ADPT_SBV_1163064:"ADPT_SBV_1163064"}),Kb=p.__assign(p.__assign({},O),{SBV_716513:"SBV_716513",SBV_798704:"SBV_798704",ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1115870:"ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1115870",ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604:"ADPT_SB_SEARCH_STORE_CATEGORY_LINKS_SINGLE_ASIN_SBV_SPARKLE_1131604",
ADPT_SBV_1163064:"ADPT_SBV_1163064",ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394:"ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394",ADPT_SCF_1236384:"ADPT_SCF_1236384",ADPT_SBV_DISABLE_SRC_SWAP_1269759:"ADPT_SBV_DISABLE_SRC_SWAP_1269759"}),Lb=p.__assign(p.__assign(p.__assign({},O),Kb),{ADPT_SBV_890511:"ADPT_SBV_890511",ADPT_SBV_990170:"ADPT_SBV_990170",ADPT_SBV_SEARCH_1038654:"ADPT_SBV_SEARCH_1038654",ADPT_SBV_SPARKLE_DESKTOP_ASIN_LAYOUT_1217087:"ADPT_SBV_SPARKLE_DESKTOP_ASIN_LAYOUT_1217087"}),
Mb=p.__assign(p.__assign(p.__assign(p.__assign({},da),O),Kb),{SEARCH_786608:"SEARCH_786608",ADPT_SBV_877926:"ADPT_SBV_877926",ADPT_SB_SEARCH_STORE_DEALS_INGRESS_SBV_SPARKLE_P2_1183604:"ADPT_SB_SEARCH_STORE_DEALS_INGRESS_SBV_SPARKLE_P2_1183604",ADPT_SBV_VV_LUXURY_GATING_1222155:"ADPT_SBV_VV_LUXURY_GATING_1222155",ADPT_ALF_SEARCH_DEALS_PD_25_1261832:"ADPT_ALF_SEARCH_DEALS_PD_25_1261832"}),Nb=p.__assign(p.__assign(p.__assign(p.__assign({},da),O),vd),{ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394:"ADPT_SEARCH_SB_CONFIGURABLE_CARD_MOBILE_1164394"}),
Ob=p.__assign(p.__assign(p.__assign({},da),O),{HOMEPAGE_SDTECH_GWM_AUTO_COLOR_REC_1184598:"HOMEPAGE_SDTECH_GWM_AUTO_COLOR_REC_1184598",HOMEPAGE_WD_SBV_HORIZONTAL_1221173:"HOMEPAGE_WD_SBV_HORIZONTAL_1221173"}),wd=p.__assign(p.__assign({},da),O),Q=p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign({},Cb),Db),Fb),Gb),Ib),Jb),Ua),Lb),Mb),Eb),Nb),Ob),ta=za.DESKTOP,ea=za.MOBILE,xd=N.MULTI_BRAND_VIDEO,yd=N.SHORT_FORM_VIDEO,
zd=N.VIDEO_SINGLE_BRAND,Ad=N.VIDEO_PRODUCT_COLLECTION,Bd=N.VIDEO_SPLIT,Cd=N.VIDEO_STORE,Dd=N.VIDEO_STORE_PRODUCT_FEATURE,Ed=N.CONFIGURABLE,Fd=N.HOMEPAGE_WINDOW_DISPLAY;var X={};X[xd]=(Aa={},Aa[ta]=Cb,Aa[ea]=Db,Aa);X[yd]=(Qa={},Qa[ea]=Eb,Qa);X[zd]=(Ba={},Ba[ta]=Fb,Ba[ea]=Gb,Ba);X[Ad]=(Ca={},Ca[ta]=Lb,Ca[ea]=Mb,Ca);X[Bd]=(Ra={},Ra[ea]=wd,Ra);X[Cd]=(Da={},Da[ta]=Ib,Da[ea]=Jb,Da);X[Dd]=(Ea={},Ea[ta]=Ua,Ea[ea]=ud,Ea);X[Ed]=(Sa={},Sa[ea]=Nb,Sa);X[Fd]=(Ta={},Ta[ea]=Ob,Ta);X;var E;(function(b){b.C="C";b.T1=
"T1";b.T2="T2";b.T3="T3";b.T4="T4";b.T5="T5";b.T6="T6";b.T7="T7";b.T8="T8"})(E||(E={}));var Pb=function(){return function(b,g,h,f,a,c){var d=this;void 0===f&&(f={});void 0===a&&(a=!1);void 0===c&&(c=!1);this.init=function(){var e,k,l=d.videoOptions,n=l.shouldEnablePlayButton,m=l.shouldEnablePauseButton,q=void 0===m?!0:m;m=l.shouldEnableReduceMotionEffects;var v=l.isAdBlockerEnabled;v=void 0===v?!1:v;var u=l.isAutoPlayDisabled;u=void 0===u?!1:u;var w=l.clientInitiatedStartTime,A=l.shouldCheckObstruction;
A=void 0===A?!1:A;var B=l.isDesktop;B=void 0===B?!1:B;var G=l.shouldCheckNativeObstructions;G=void 0===G?!1:G;l=l.shouldCallGetObstructionsMash;l=void 0===l?!1:l;var J=d.element.querySelector("video"),C=d.buildBoundaryListeners(),H="true"===(null===J||void 0===J?void 0:J.getAttribute("data-videoloadedusinginlinescript")),K=d.videoOptions.clientWeblabHelper?d.videoOptions.clientWeblabHelper.getTreatment(Q.ADPT_SBV_DELAY_PLAYBACK_UNTIL_READY_1248744,!1)===E.T1:!1;d.videoPlayer=new td(J,d.videoEventHandler,
C,[],d.element,w,K);d.shouldDelayLoadingVideos||H||d.videoPlayer.load();d.element.querySelectorAll("a").forEach(function(I){I.addEventListener("click",d.logClick)});d.muteClickRegion=d.element.querySelector('[data-type="audioToggleContainer"]');d.muteClickRegion&&(d.muteButton=d.muteClickRegion.querySelector('[data-type="audioToggleMute"]'),d.unmuteButton=d.muteClickRegion.querySelector('[data-type="audioToggleUnmute"]'),d.setMuteButtonStatus(d.videoPlayer.isMuted()),d.muteClickRegion.addEventListener("click",
d.toggleAudio),d.isMuted=d.videoPlayer.isMuted());d.ccTrackFail=!1;d.ccTrack=d.element.querySelector('[data-type="ccTrack"]');d.ccTrack&&(d.ccTrack.onerror=d.ccLoadFailure);d.ccContainer=d.element.querySelector('[data-type="ccContainer"]');d.ccClickRegion=d.element.querySelector('[data-type="ccToggleContainer"]');d.ccClickRegion&&(d.ccButtonOff=d.ccClickRegion.querySelector('[data-type="ccToggleOff"]'),d.ccButtonOn=d.ccClickRegion.querySelector('[data-type="ccToggleOn"]'),d.ccClickRegion.addEventListener("click",
function(){return d.toggleCC()}),d.toggleCC(!1,xa.DEFAULT_OFF));d.playClickRegion=d.element.querySelector('[data-type="playIcon"]');d.playButton=null!==(k=null===(e=d.playClickRegion)||void 0===e?void 0:e.querySelector("button"))&&void 0!==k?k:null;d.hasHorizontalControls=d.element.querySelector('[data-type="hzBtnTray"]')?!0:!1;q&&(d.videoOptions.shouldEnablePlayButton=!0,d.setUpPlayButtonEvents(),d.pauseClickRegion=d.element.querySelector('[data-type="pauseIcon"]'),d.setUpPauseButtonEvents());e=
Tc("(prefers-reduced-motion: reduce)");e=m&&!(null===e||void 0===e||!e.matches);if(v)d.videoEventHandler.onAdblockDetected();d.isAutoPlayDisabled=e||v||u;d.isAutoPlayDisabled&&(n=!0,d.setUpPlayButtonEvents(),d.videoEventHandler.onVideoPausedDueToAutoplayDisabled());d.showPlayButton(n);d.handleVideoOrientation();d.skipViewabilityRegistration||(ca.registerElement(J,.5,!0,!0,!0,d.onFiftyPercentViewabilityChange,void 0,{shouldCheckObstructionOnRecalculation:A,isDesktop:B,shouldCheckNativeObstructions:G,
shouldCallGetObstructionsMash:l}),ca.registerElement(J,.01,!0,!0,!0,d.onOnePercentViewabilityChange,void 0,{onBrowserVisibilityChange:d.onBrowserVisibilityChange,shouldCheckNativeObstructions:G,shouldCallGetObstructionsMash:l}))};this.getVideoCurrentTimeMs=function(){return d.videoPlayer.getCurrentTimeMs()};this.getTotalVideoDuration=function(){return d.videoPlayer.getDurationMs()};this.loadVideo=function(){d.videoPlayer.load()};this.setMuteStatus=function(e,k){d.isMuted=e;d.setMuteButtonStatus(e);
d.muteClickRegion&&(e?(d.videoPlayer.mute(),d.videoEventHandler.onVideoMuted(d.getVideoCurrentTimeMs(),k)):(d.videoPlayer.unmute(),d.videoEventHandler.onVideoUnmuted(d.getVideoCurrentTimeMs(),k)))};this.play=function(){if(d.isPlaying())return Promise.resolve();d.videoPlayer.hasSrcAttr()||d.videoPlayer.loadVideoOnBrowserVisible();d.videoPlayer.resetContinuousPlaybackDurationMs();d.videoEventHandler.onVideoPlaybackInitiated(d.getVideoCurrentTimeMs());d.showPlayButton(!1);d.showPauseButton(!0);d.muteClickRegion&&
(d.muteClickRegion.style.display="block",d.videoEventHandler.onAudioToggleIconDisplayed(),d.muteClickRegion.style.visibility="visible");d.pauseClickRegion&&(d.pauseClickRegion.style.display="block",d.videoEventHandler.onPauseIconDisplayed(),d.pauseClickRegion.style.visibility="visible");d.ccTrack&&!d.ccTrackFail&&d.ccClickRegion&&(d.ccClickRegion.style.display="block",d.videoEventHandler.onCcIconDisplayed(),d.ccClickRegion.style.visibility="visible");return d.videoPlayer.isNavBackLoadPending()?(d.videoPlayer.attachLoadStartCallback(function(){return d.play()}),
Promise.resolve()):d.videoPlayer.play(Date.now()).then().catch(function(e){var k="string"===typeof e?e:"";e instanceof DOMException&&(k=e.name+": "+e.message);d.showPlayButton(!0);d.showPauseButton(!1);d.muteClickRegion&&(d.muteClickRegion.style.visibility="hidden");d.ccClickRegion&&(d.ccClickRegion.style.visibility="hidden");if(k.startsWith("NotSupported"))d.videoEventHandler.onVideoPlayPromiseNotSupported();d.videoEventHandler.onVideoPlayPromiseRejected(k)})};this.pause=function(e){d.isPaused()||
(d.videoEventHandler.onVideoPauseInitiated(d.getVideoCurrentTimeMs()),d.videoEventHandler.onVideoViewed(d.videoPlayer.getContinuousPlaybackDurationMs()),d.videoPlayer.resetContinuousPlaybackDurationMs(),d.showPauseButton(!1),!e&&d.videoOptions.shouldEnablePlayButton&&d.showPlayButton(!0),d.muteClickRegion&&!d.hasHorizontalControls&&(d.muteClickRegion.style.visibility="hidden"),d.videoPlayer.pause())};this.onBrowserVisibilityChange=function(e){d.videoOptions.shouldEnableVideoCleanup&&(e?d.videoPlayer.loadVideoOnBrowserVisible():
d.videoPlayer.clear())};this.onOnePercentViewabilityChange=function(e,k){e=Date.now();k?(d.onScreenStartTime=e,d.videoEventHandler.onVideoOnScreen(d.videoPlayer.getPercentDownloaded())):(d.videoPlayer.isMuted()||d.setMuteStatus(!0,V.VIDEO_OFF_SCREEN),d.videoEventHandler.onVideoOffScreen(e-d.onScreenStartTime,d.getVideoCurrentTimeMs()),d.onScreenStartTime=0,d.videoPlayer.seekToStart(),d.videoPlayer.resetContinuousPlaybackDurationMs())};this.onFiftyPercentViewabilityChange=function(e,k,l){d.isAutoPlayDisabled&&
!d.playButtonClicked||d.pauseButtonClicked||(k?d.play().catch():d.pause(l))};this.setVideoOptions=function(e){d.videoOptions=e};this.setAutoPlayDisabled=function(e){d.isAutoPlayDisabled=e};this.handleVideoOrientation=function(){var e=d.videoAdAttributes,k=e.videoPreviewImageSrc;if(e=e.videoOrientation===Pa.PORTRAIT)void 0===k&&(k=""),e=!k.startsWith("https://m.media-amazon.com");if(e)d.videoEventHandler.onVideoPreviewImageNotMediaAmazon()};this.isPlaying=function(){return d.videoPlayer.playbackState===
L.PLAYING};this.isPaused=function(){return d.videoPlayer.playbackState===L.PAUSED};this.buildBoundaryListeners=function(){return[new zb(2E3,d.videoEventHandler.onVideoDurationPlayed),new zb(15E3,d.videoEventHandler.onVideoDurationPlayed)]};this.toggleAudio=function(){var e,k,l="true"===(null===(e=d.muteClickRegion)||void 0===e?void 0:e.getAttribute("aria-pressed"));null===(k=d.muteClickRegion)||void 0===k?void 0:k.setAttribute("aria-pressed",!l+"");d.setMuteStatus(!d.videoPlayer.isMuted(),V.ICON_TAP)};
this.toggleCC=function(e,k){var l;d.ccShowing=null!==e&&void 0!==e?e:!d.ccShowing;e=null!==k&&void 0!==k?k:xa.ICON_TAP;d.ccButtonOff&&d.ccButtonOn&&(d.ccShowing?(d.videoEventHandler.onCcOn(e,d.videoPlayer.getCaptionLang()),d.ccButtonOn.style.opacity="1",d.ccButtonOff.style.opacity="0"):(d.videoEventHandler.onCcOff(e,d.videoPlayer.getCaptionLang()),d.ccButtonOn.style.opacity="0",d.ccButtonOff.style.opacity="1"));d.ccContainer&&(d.ccContainer.style.visibility=d.ccShowing?"visible":"hidden");null===
(l=d.ccClickRegion)||void 0===l?void 0:l.setAttribute("aria-pressed",""+d.ccShowing)};this.showPlayButton=function(e){d.hasHorizontalControls&&d.playClickRegion?d.playClickRegion.style.display=e?"block":"none":d.playClickRegion&&(d.playClickRegion.style.visibility=e?"inherit":"hidden")};this.showPauseButton=function(e){d.hasHorizontalControls&&d.pauseClickRegion?d.pauseClickRegion.style.display=e?"block":"none":d.pauseClickRegion&&(d.pauseClickRegion.style.visibility=e?"inherit":"hidden")};this.setUpPlayButtonEvents=
function(){d.playClickRegion&&d.playClickRegion.addEventListener("click",function(){var e;d.play();d.playButtonClicked=!0;if(d.playButtonClicked&&d.pauseButtonClicked)d.videoEventHandler.onVideoPlayFromPause(d.getVideoCurrentTimeMs());d.pauseButtonClicked=!1;null===(e=d.pauseClickRegion)||void 0===e?void 0:e.focus()})};this.setUpPauseButtonEvents=function(){d.pauseClickRegion&&d.pauseClickRegion.addEventListener("click",function(){var e;d.pause();d.pauseButtonClicked=!0;d.videoEventHandler.onVideoPauseButtonTriggered(d.getVideoCurrentTimeMs());
d.playButtonClicked=!1;null===(e=d.playButton)||void 0===e?void 0:e.focus()})};this.ccLoadFailure=function(e){d.ccTrackFail=!0;d.videoEventHandler.onCcLoadFailure(e);d.ccClickRegion&&(d.ccClickRegion.style.visibility="hidden")};this.setMuteButtonStatus=function(e){d.muteButton&&d.unmuteButton&&(e?(d.unmuteButton.style.fillOpacity="0",d.muteButton.style.fillOpacity="1"):(d.muteButton.style.fillOpacity="0",d.unmuteButton.style.fillOpacity="1"))};this.logClick=function(){d.videoEventHandler.onVideoClicked(d.getVideoCurrentTimeMs())};
this.element=b;this.videoAdAttributes=h;this.videoEventHandler=g;this.videoOptions=f;this.skipViewabilityRegistration=a;this.shouldDelayLoadingVideos=c}}(),Gd=function(b){return 9<b?String(b):"0"+b},Qb=function(b){if(0>=b)return"00:00";var g=Math.floor(b/36E5);b=[Math.floor(b/6E4%60),Math.floor(b/1E3%60)];0<g&&b.unshift(g);return b.map(Gd).join(":")},Hd=function(){function b(g){this.timerElement=g;this.msToEvent=parseInt(g.dataset.targetTime,10);this.timerElement.innerText=Qb(this.msToEvent)}b.prototype.start=
function(){var g=this;isNaN(this.msToEvent)||(this.counterStartTime=Date.now(),this.counterInterval=Hc.interval(function(){return g.updateTime()},500))};b.prototype.updateTime=function(){var g=Date.now()-this.counterStartTime;0>=this.msToEvent-g&&clearInterval(this.counterInterval);this.timerElement.innerText=Qb(this.msToEvent-g)};return b}(),Rb=function(b){null===b?ka["default"].log("No element found to initialize badge timer. returning..."):Array.prototype.slice.call(b.getElementsByClassName("badge-countdown-timer")).forEach(function(g){0===
(null===g||void 0===g?void 0:g.innerHTML.length)&&(new Hd(g)).start()})},Sb=function(){return function(b,g,h){var f=this;this.onBackgroundClicked=function(){f.metricsManager.reportBackgroundClicked(f.videoManager.getVideoCurrentTimeMs(),f.videoManager.videoAdAttributes)};this.onCtaClicked=function(){f.metricsManager.reportBrandCtaLinkClicked(f.videoManager.getVideoCurrentTimeMs(),f.videoManager.videoAdAttributes)};this.onCtaBannerClicked=function(){f.metricsManager.reportCtaBannerClicked(f.videoManager.getVideoCurrentTimeMs(),
f.videoManager.videoAdAttributes)};this.onHeadlineClicked=function(){f.metricsManager.reportHeadlineClicked(f.videoManager.getVideoCurrentTimeMs(),f.videoManager.videoAdAttributes)};this.onBrandCtaLinkClicked=function(){f.metricsManager.reportBrandCtaLinkClicked(f.videoManager.getVideoCurrentTimeMs(),f.videoManager.videoAdAttributes)};this.onBrandLogoClicked=function(){f.metricsManager.reportBrandLogoClicked(f.videoManager.getVideoCurrentTimeMs(),f.videoManager.videoAdAttributes)};this.onBrandNameClicked=
function(){f.metricsManager.reportBrandNameClicked(f.videoManager.getVideoCurrentTimeMs(),f.videoManager.videoAdAttributes)};this.onCreatorLogoClicked=function(){f.metricsManager.reportCreatorLogoClicked(f.videoManager.getVideoCurrentTimeMs(),f.videoManager.videoAdAttributes)};this.onCreatorCtaClicked=function(){f.metricsManager.reportCreatorCtaClicked(f.videoManager.getVideoCurrentTimeMs(),f.videoManager.videoAdAttributes)};this.productReceived=function(a){var c;void 0===a&&(a=0);var d=(null===(c=
f.widgetEventAttributes)||void 0===c?0:c.productAttributes)&&0<f.widgetEventAttributes.productAttributes.length?f.widgetEventAttributes.productAttributes[a]:void 0;f.metricsManager.reportProductReceived(f.videoManager.getVideoCurrentTimeMs(),f.videoManager.videoAdAttributes,d)};this.onProductClicked=function(a){var c;void 0===a&&(a=0);var d=(null===(c=f.widgetEventAttributes)||void 0===c?0:c.productAttributes)&&0<f.widgetEventAttributes.productAttributes.length?f.widgetEventAttributes.productAttributes[a]:
void 0;f.metricsManager.reportProductClicked(f.videoManager.getVideoCurrentTimeMs(),f.videoManager.videoAdAttributes,d)};this.eventBannerDisplayed=function(a){f.metricsManager.reportEventBannerDisplayed(a,f.videoManager.videoAdAttributes)};this.onEventBannerClicked=function(a){f.metricsManager.reportEventBannerClicked(a,f.videoManager.videoAdAttributes)};this.metricsManager=b;this.videoManager=g;this.widgetEventAttributes=h}}(),Tb=function(){function b(g,h){var f=this;this.setupBackgroundEvent=function(){f.widgetElements.backgroundElement&&
f.widgetElements.backgroundElement.addEventListener("click",f.widgetEventHandler.onBackgroundClicked)};this.setupBrandLogoEvent=function(){f.widgetElements.brandLogoElement&&f.widgetElements.brandLogoElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",f.widgetEventHandler.onBrandLogoClicked)});f.widgetElements.brandElement&&f.widgetElements.brandElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",f.widgetEventHandler.onBrandCtaLinkClicked)})};this.setupCallToActionEvent=
function(){f.widgetElements.callToActionElement&&f.widgetElements.callToActionElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",f.widgetEventHandler.onCtaClicked)});f.widgetElements.callToActionBannerElement&&f.widgetElements.callToActionBannerElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",f.widgetEventHandler.onCtaBannerClicked)})};this.setupHeadlineEvent=function(){f.widgetElements.headlineElement&&f.widgetElements.headlineElement.querySelectorAll("*").forEach(function(a){a.addEventListener("click",
f.widgetEventHandler.onHeadlineClicked)})};this.setupProductEvents=function(){f.widgetElements.productElements&&f.widgetElements.productElements.forEach(function(a,c){a&&(f.widgetEventHandler.productReceived(c),a.querySelectorAll("a").forEach(function(d){d.addEventListener("click",function(){f.widgetEventHandler.onProductClicked(c)})}))})};this.setUpCreatorContentEvents=function(){f.setupBrandNameEvent();f.setupCreatorCtaEvent();f.setupCreatorLogoEvent()};this.setupBrandNameEvent=function(){f.widgetElements.brandNameElement&&
f.widgetElements.brandNameElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",f.widgetEventHandler.onBrandNameClicked)})};this.setupCreatorCtaEvent=function(){f.widgetElements.creatorNameElement&&f.widgetElements.creatorNameElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",f.widgetEventHandler.onCreatorCtaClicked)})};this.setupCreatorLogoEvent=function(){f.widgetElements.creatorLogoElement&&f.widgetElements.creatorLogoElement.querySelectorAll("a").forEach(function(a){a.addEventListener("click",
f.widgetEventHandler.onCreatorLogoClicked)})};this.setupEventBannerEvents=function(){var a=x["default"].cardRoot.querySelector('[data-type="eventBannerContainer"]');if(a&&a.dataset){var c=a.dataset.layout,d=void 0===c?"":c;f.widgetEventHandler.eventBannerDisplayed(d);a.querySelectorAll("a").forEach(function(e){e.addEventListener("click",function(){return f.widgetEventHandler.onEventBannerClicked(d)})})}};this.widgetElements=g;this.widgetEventHandler=h}b.prototype.setupWidgetEvents=function(){this.setupBackgroundEvent();
this.setupBrandLogoEvent();this.setupCallToActionEvent();this.setupHeadlineEvent();this.setupProductEvents();this.setupEventBannerEvents();this.setUpCreatorContentEvents()};return b}(),Ub=function(b){return aa.isIOSWebView()||b.getTreatment(Q.SBV_836067)===E.T1},Id={shouldAreaOnlyUseElementWidth:!0},Vb=function(){return function(b,g){var h=this;this.attach=function(){h.setupAdUnitViewability()};this.setupAdUnitViewability=function(){var f=ca.registerElement(h.adUnitElement,.5,!0,!0,!0,h.onFiftyPercentViewabilityChange,
void 0,h.viewabilityOptions);h.registeredAdUnitElement=f};this.onFiftyPercentViewabilityChange=function(f,a){h.adUnitInView=a};this.forceVisibilityCheck=function(f){h.registeredAdUnitElement&&ca.checkObstruction(h.registeredAdUnitElement,!0)};this.handleViewableImpressionForElements=function(){ca.handleViewableImpression()};this.isAdUnitInView=function(){return h.adUnitInView};this.calculateVideoDurationTotalMsRelativeToAdUnit=function(f){h.isAdUnitInView()?h.videoDurationTotalMsWhenAdInViewFirst=
f-h.videoDurationStartTimeMsWhenAdInViewFirst:(h.videoDurationTotalMsWhenAdInViewFirst=0,h.videoDurationStartTimeMsWhenAdInViewFirst=f);return h.videoDurationTotalMsWhenAdInViewFirst};this.getAdUnitPercentInView=function(){return ia.getPercentInView(h.adUnitElement,h.viewabilityOptions)};this.adUnitElement=b;this.adUnitInView=!1;this.videoDurationTotalMsWhenAdInViewFirst=this.videoDurationStartTimeMsWhenAdInViewFirst=0;this.viewabilityOptions=p.__assign(p.__assign({},Id),g)}}(),ua,Jd=sa.BrandVideoProduct,
Kd=sa.BrandVideoStore,Ld=sa.ProductWithTintedCta,Wb=(ua={},ua[Jd]={brand:!0,product:!0,store:!1},ua[Ld]={brand:!1,product:!0,store:!1},ua[Kd]={brand:!0,product:!1,store:!0},ua),mc=function(){function b(g,h){var f=this;this.isALink=!1;this.videoManagers=[];this.videoPlayersStatus=[];this.impFired=[];this.mediaSourceSwapCompleted=[];this.getDynamicMetricAttributes=function(){var a;return a={},a[r.CAROUSEL_PAGE_NUMBER]=f.currentCarouselPage,a};this.updateMediaAssetSources=function(a,c){var d=f.controllerOptions.shouldDelayMediaLoading;
a&&d&&!f.mediaSourceSwapCompleted[c]&&(d=JSON.parse(a.dataset.videoAdAttributesProps),0<c&&f.videoManagers[c].loadVideo(),f.updatePreviewImageSource(a,d),f.updateProductImageSource(a,d),f.mediaSourceSwapCompleted[c]=!0)};this.updateProductImageSource=function(a,c){var d,e=c.videoAdType;e=(null!==(d=Wb[void 0===e?"":e])&&void 0!==d?d:{}).product;if(void 0===e?0:e)c=c.imageUrl,void 0===c&&(c=""),a&&c&&(a=a.querySelector('[data-type="productImage"]'))&&a.getAttribute("src")!==c&&a.setAttribute("src",
c)};this.updatePreviewImageSource=function(a,c){c=c.videoPreviewImageSrc;var d,e,k;if(a){var l=a.querySelector("video");if(l){var n=l.getAttribute("poster");n&&n!==c?(l.setAttribute("poster",c),null===(d=y["default"].trigger)||void 0===d?void 0:d.call(y["default"],"glm.Search.VideoElement.Ready",l.poster),a=a.querySelector('[data-show-background-image="true"]'),d=null===(e=null===a||void 0===a?void 0:a.getAttribute)||void 0===e?void 0:e.call(a,"data-background-image-url"),(null===a||void 0===a?0:
a.style)&&d&&(a.style.backgroundImage="url('"+d+"')")):null===(k=y["default"].trigger)||void 0===k?void 0:k.call(y["default"],"glm.Search.VideoElement.Ready",l.poster)}}};this.carouselItemsPerPage=function(){var a=f.controllerOptions.minimumGutterWidth;a=void 0===a?0:a;var c=f.carouselViewport.getBoundingClientRect().width,d=x["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].getBoundingClientRect().width;return Math.floor(c/(d+a))};this.logImpression=function(a,c){if(!f.impFired[c]&&
(a=a.querySelector('[data-type="ip"]'))){var d=a.getAttribute("data-src");d&&(a.setAttribute("src",d),f.impFired[c]=!0)}};this.pauseVideo=function(a){f.videoManagers[a].pause()};this.playVideo=function(a){f.enableAutoPlayForAllVideos();f.videoManagers[a].play().then(function(){f.currentPlayingIndex=a}).catch()};this.setupPlayButtonEventHandlers=function(a,c,d){(a=a.querySelector('[data-type="playIcon"]'))&&a.addEventListener("click",function(e){return f.onPlayBtnEventTriggered(e,c,d)})};this.updateClientMetricsContext=
function(){f.metricsManager.setClientMetricsContext({getDynamicMetricsAttributes:f.getDynamicMetricAttributes})};this.setupViewabilityEvents=function(a,c){ca.registerElement(a,.5,!0,!0,!0,f.onFiftyPercentViewabilityChange,c);ca.registerElement(a,.01,!0,!0,!0,f.onOnePercentViewabilityChange,c)};this.onPlayBtnEventTriggered=function(a,c,d){a=f.videoManagers[c].videoAdAttributes;f.metricsManager.reportVideoPlayButtonTriggered(c,a);if(null===d||void 0===d?0:d.onImmersiveVideoCallback)d.onImmersiveVideoCallback(a);
else f.toggleVideosByPlayButton(c)};this.toggleVideosByPlayButton=function(a){f.pauseVideo(f.currentPlayingIndex);f.videoManagers[a].setMuteStatus(f.videoManagers[f.currentPlayingIndex].isMuted,V.INHERIT);f.playVideo(a)};this.enableAutoPlayForAllVideos=function(){f.videoManagers.forEach(function(a){a.setAutoPlayDisabled(!1)})};this.isVideoPlaying=function(){return f.videoPlayersStatus.some(function(a){return a})};this.setConfigStyles=function(a,c){Object.assign(c.style,a)};this.carousel=ib["default"].getCarousel(x["default"].cardRoot.getElementsByClassName("a-carousel-container")[0]);
this.metricsManager=g;this.controllerOptions=h;this.currentCarouselPage=this.currentPlayingIndex=0;this.prevPlayingIndex=-1;this.updateClientMetricsContext()}b.prototype.setupEventHandlers=function(g,h,f,a){var c,d,e,k,l,n,m;void 0===a&&(a={});return p.__awaiter(this,void 0,void 0,function(){var q,v,u,w,A,B,G,J,C,H,K,I,T,ba,Va,Wa,Xa,Xb,Ya,Yb,Za,Zb,$b,Fa,ac,$a,bc,cc,dc,ec,Ga,fc,ab,bb,gc,cb,R,hc,ic,jc,ja,kc,lc,Md=this;return p.__generator(this,function(ge){q=h.videoAdType;v=void 0===q?"":q;u=null!==
(c=Wb[v])&&void 0!==c?c:{};w=u.brand;A=u.product;B=u.store;G=a.isItemOnFirstPage;C=(J=a.selectors)?J.brandElementSelector:void 0;H=this.controllerOptions;K=H.isAdBlockerEnabled;I=H.shouldDelayMediaLoading;T=H.enableAutoScroll;ba=void 0===T?!1:T;Va=H.enableImmersiveVideo;Wa=void 0===Va?!1:Va;Xa=H.showDealBadge;Xb=void 0===Xa?!1:Xa;Ya=H.shouldEnableVideoCleanup;Yb=void 0===Ya?!1:Ya;Za=H.shouldEnableReduceMotionEffects;Zb=void 0===Za?!1:Za;$b=H.clientWeblabHelper;Fa=g.querySelector('[data-type="videoContainer"]');
(ac=g.querySelectorAll("a"))&&ac.forEach(function(Nd){Nd.addEventListener("click",function(){Md.isALink=!0})});if(!Fa)return this.metricsManager.reportMissingVideoElement(h),[2,!1];$a=new Vb(g);$a.attach();bc={onPlaybackCompletedCallback:ba?this.onPlaybackCompletedCallback:void 0,onImmersiveVideoCallback:Wa?this.onImmersiveVideoCallback:void 0};cc=new yb(this.metricsManager,h,bc,$a);dc={isAdBlockerEnabled:K,shouldEnablePlayButton:!0,shouldEnableVideoCleanup:Yb,shouldEnableReduceMotionEffects:Zb,clientWeblabHelper:$b};
ec=I&&G?!1:I;Ga=new Pb(Fa,cc,h,dc,!0,ec);Ga.init();this.videoManagers.push(Ga);this.setupViewabilityEvents(Fa,f);fc={onImmersiveVideoCallback:Wa?this.onImmersiveVideoCallback:void 0};this.setupPlayButtonEventHandlers(g,f,fc);ab=g.querySelector('[data-type="storeContainer"]');bb=g.querySelector('[data-type="productContainer"]');gc=g.querySelector('[id="ctaContainer"]');cb=g.querySelector(null!==C&&void 0!==C?C:W.BRAND_LOGO_HEADER_CONTAINER);R=g.querySelector(null!==C&&void 0!==C?C:W.BRAND_CONTAINER);
hc=null!==(d=null===R||void 0===R?void 0:R.classList.contains("aok-hidden"))&&void 0!==d?d:!1;if(A){if(!bb)return this.metricsManager.reportMissingProductElement(h),[2,!1];if(ic=g.querySelectorAll('[data-type="productTitle"]')[0])ic.style.display="-webkit-box"}if(w&&null===cb&&null===R)return this.metricsManager.reportMissingBrandElement(h),[2,!1];w&&hc&&(jc=null!==(k=null===(e=null===R||void 0===R?void 0:R.querySelector('[class*="nameContainer"] span'))||void 0===e?void 0:e.textContent)&&void 0!==
k?k:"",ja=null!==(l=null===R||void 0===R?void 0:R.querySelector('a[class*="storeLink"]'))&&void 0!==l?l:null,this.metricsManager.reportMissingBrandElement(h,{storeName:jc,storeUrl:null!==(n=null===ja||void 0===ja?void 0:ja.getAttribute("href"))&&void 0!==n?n:void 0,storeCta:null!==(m=null===ja||void 0===ja?void 0:ja.text)&&void 0!==m?m:void 0}));if(B&&!ab)return[2,!1];kc=new Sb(this.metricsManager,Ga);lc=new Tb({headlineElement:ab,brandElement:R,brandLogoElement:cb,callToActionElement:gc,productElements:[bb]},
kc);lc.setupWidgetEvents();Xb&&Rb(g);return[2,!0]})})};return b}(),Od=function(b){function g(h,f){var a=b.call(this,h,f)||this;a.start=function(){return p.__awaiter(a,void 0,void 0,function(){var c,d,e,k,l,n,m=this;return p.__generator(this,function(q){switch(q.label){case 0:return c=this.controllerOptions,d=c.viewportConfig,e=c.selectors,this.carouselViewport=x["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],d&&this.setConfigStyles(d,this.carouselViewport),k=x["default"].cardRoot.querySelectorAll(W.CARD_ITEM),
k.forEach(function(v,u){return p.__awaiter(m,void 0,void 0,function(){var w,A,B;return p.__generator(this,function(G){switch(G.label){case 0:return(w=u<this.carouselItemsPerPage())?this.logImpression(v,u):this.impFired[u]=!1,this.videoPlayersStatus[u]=!1,A=p.__assign(p.__assign({},JSON.parse(v.dataset.videoAdAttributesProps)),{carouselItemIndex:u}),v.style.visibility="inherit",[4,this.setupEventHandlers(v,A,u,{isItemOnFirstPage:w,selectors:e})];case 1:B=G.sent();if(!B)return[2];w&&this.updateMediaAssetSources(v,
u);return[2]}})})}),[4,this.carousel.initialized];case 1:return q.sent(),this.displayOrHideCarouselButtons(),this.carousel.on("change:pageNumber",this.onCarouselPageChange),l=pa["default"].getCarousel(Ja.unscope(this.carouselViewport)),n=l.getAttr("name"),y["default"].on("a:carousel:"+n+":change:pageSize",this.onPageSizeChange),l.strategies.display.repaint(l),[2]}})})};a.onPageSizeChange=function(){a.displayOrHideCarouselButtons();a.updateResidualMediaAssetsOnPage(a.currentPlayingIndex)};a.displayOrHideCarouselButtons=
function(){var c=a.controllerOptions,d=c.isOptionalNavButton;if(c.shouldHideNavButtonOnPageChange){c=d?"a-carousel-goto-nextpage":"a-carousel-right";d=x["default"].cardRoot.getElementsByClassName(d?"a-carousel-goto-prevpage":"a-carousel-left")[0];c=x["default"].cardRoot.getElementsByClassName(c)[0];var e=x["default"].cardRoot.getElementsByClassName("a-carousel-page-max")[0];e=parseInt(e.innerHTML,10);d&&d.classList.toggle("aok-hidden",0===a.currentCarouselPage);c&&c.classList.toggle("aok-hidden",
a.currentCarouselPage+1===e)}};a.getNewIndicesOnPageChange=function(c,d,e){var k=a.impFired.length,l=c*e,n=d*e;if(a.controllerOptions.transitionStrategy===ha.SEARCH_GRID){var m=Math.floor(k/e);e=k-e;c===m&&(l=e);d===m&&(n=e)}return{oldFirstIndex:n,newFirstIndex:l}};a.onCarouselPageChange=function(c){if(void 0===c)a.metricsManager.reportCarouselPageChanged(-1,-1);else{var d=c.newPageNumber-1,e=c.oldPageNumber-1;a.metricsManager.reportCarouselPageChanged(d,e);c=a.carouselItemsPerPage();var k=a.getNewIndicesOnPageChange(d,
e,c);e=k.oldFirstIndex;k=k.newFirstIndex;a.logImpressionsForCarouselItems(d,k,c);a.videoManagers[k].setMuteStatus(a.videoManagers[a.currentPlayingIndex].isMuted,V.INHERIT);a.setVideosOnPreviousPageOutOfView(e,k,c);a.setNewPageAndCurrentPlayingVideo(d,k);a.setVideosOnNewPageInView(k,c);a.displayOrHideCarouselButtons()}};a.logImpressionsForCarouselItems=function(c,d,e){c=e*(c+1);e=a.impFired.length;for(c=c<=e?c:e;d<c;d++)e=x["default"].cardRoot.querySelector('[data-index="'+d+'"]'),a.updateMediaAssetSources(e,
d),a.logImpression(e,d)};a.setNewPageAndCurrentPlayingVideo=function(c,d){a.currentCarouselPage=c;a.isVideoOnCurrentCarouselPage(a.currentPlayingIndex,c)&&a.controllerOptions.transitionStrategy!==ha.SEARCH_GRID||(a.currentPlayingIndex=d)};a.setVideosOnPreviousPageOutOfView=function(c,d,e){a.onFiftyPercentViewabilityChange(0,!1,a.currentPlayingIndex);e=c+e;for(a.controllerOptions.transitionStrategy===ha.SEARCH_GRID&&c<d&&(e=d);c<e&&c<a.videoManagers.length;c++)a.onOnePercentViewabilityChange(0,!1,
c)};a.setVideosOnNewPageInView=function(c,d){for(var e=c;e<c+d&&e<a.videoManagers.length;e++)if(a.onOnePercentViewabilityChange(1,!0,e),a.isVideoPlaying())a.onFiftyPercentViewabilityChange(1,!0,e)};a.onFiftyPercentViewabilityChange=function(c,d,e){a.isVideoOnCurrentCarouselPage(e,a.currentCarouselPage)&&(a.isALink?(a.isALink=!1,a.videoManagers[a.currentPlayingIndex].onFiftyPercentViewabilityChange(c,d,!0)):(a.videoPlayersStatus[e]=d,a.videoManagers[a.currentPlayingIndex].onFiftyPercentViewabilityChange(c,
d)))};a.onOnePercentViewabilityChange=function(c,d,e){if(a.isVideoOnCurrentCarouselPage(e,a.currentCarouselPage))a.videoManagers[e].onOnePercentViewabilityChange(c,d)};a.isVideoOnCurrentCarouselPage=function(c,d){var e=a.carouselItemsPerPage(),k=(d+1)*e,l=k-e;if(a.controllerOptions.transitionStrategy===ha.SEARCH_GRID){var n=a.impFired.length;d===Math.floor(n/e)&&(k=n,l=n-e)}return c>=l&&c<k};a.updateResidualMediaAssetsOnPage=function(c){if(a.controllerOptions.shouldDelayMediaLoading)for(var d=a.carouselItemsPerPage();c<
(a.currentCarouselPage+1)*d&&c<a.videoManagers.length;c++){var e=x["default"].cardRoot.querySelector('[data-index="'+c+'"]');a.updateMediaAssetSources(e,c)}};a.carouselViewport=x["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0];return a}p.__extends(g,b);g.prototype.handlePageLoad=function(){var h=this,f=x["default"].cardRoot.querySelectorAll(W.CARD_ITEM);f.length&&f.forEach(function(a,c){a&&c<h.carouselItemsPerPage()&&h.logImpression(a,c)})};return g}(mc),Pd=function(){return function(){var b=
this;this.update=function(g){b.dots&&b.dots[g]&&(Uc(b.dots,"a-selected"),b.select(g))};this.getCarouselDots=function(){return b.dots};this.isCarouselDotSelected=function(g){return b.dots&&b.dots[g]?b.dots[g].classList.contains("a-selected"):!1};this.select=function(g){b.dots&&b.dots[g]&&b.dots[g].classList.add("a-selected")};(this.dots=Array.prototype.slice.call(x["default"].cardRoot.querySelectorAll(".a-dots > li")))&&0<this.dots.length&&this.select(0)}}(),Qd=function(b,g){return p.__awaiter(void 0,
void 0,void 0,function(){var h;return p.__generator(this,function(f){switch(f.label){case 0:return[4,new Promise(function(a,c){xc(["@m/mash"],function(d){a(Mc(d))},c)})];case 1:return h=f.sent().navigate,(null===b||void 0===b?0:b.immersiveVideoDeepLinkUrl)&&h({url:b.immersiveVideoDeepLinkUrl,successCallback:function(){g.reportImmersiveVideoLoaded(b)},failCallback:function(a){g.reportImmersiveVideoFailed(a,b)}}),[2]}})})},Rd=function(b){function g(h,f){var a=b.call(this,h,f)||this;a.cardItemsReceived=
[];a.start=function(){return p.__awaiter(a,void 0,void 0,function(){var c,d,e,k,l=this;return p.__generator(this,function(n){switch(n.label){case 0:return c=this.controllerOptions,d=c.viewportConfig,e=c.selectors,this.carouselViewport=x["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],d&&this.setConfigStyles(d,this.carouselViewport),k=x["default"].cardRoot.querySelectorAll(W.CARD_ITEM),k.forEach(function(m,q){var v=p.__assign(p.__assign({},JSON.parse(m.dataset.videoAdAttributesProps)),
{carouselItemIndex:q}),u=l.carouselItemsPerPage(),w=q<u;w?(l.logImpression(m,q),l.handleCardItemsReceived(0,v)):l.impFired[q]=!1;l.videoPlayersStatus[q]=!1;m.style.visibility="inherit";l.setupEventHandlers(m,v,q,{isItemOnFirstPage:w,selectors:e})&&(w||q<u+1)&&l.updateMediaAssetSources(m,q)}),[4,this.carousel.initialized];case 1:return n.sent(),this.carousel.on("change:pageNumber",function(m){return l.onCarouselPageChange(m)}),[2]}})})};a.handleCardItemsReceived=function(c,d){a.cardItemsReceived[c]||
(a.metricsManager.reportCardItemReceived(c,d),a.cardItemsReceived[c]=!0)};a.onPlaybackCompletedCallback=function(){var c=a.controllerOptions.enableAutoScroll;if(void 0===c?0:c)a.autoScrolled=!0,a.carousel.gotoNextPage()};a.onCarouselPageChange=function(c){var d;if(void 0===c)a.metricsManager.reportCarouselPageChanged(-1,-1);else{var e=c.newPageNumber-1;c=c.oldPageNumber-1;null===(d=a.pagination)||void 0===d?void 0:d.update(e);a.updateCarouselFirstItemMargin(0===e);a.metricsManager.reportCarouselPageChanged(e,
c,a.autoScrolled);a.autoScrolled=!1;d=a.videoManagers[a.currentPlayingIndex].isMuted;var k=V.INHERIT;aa.isIOS()&&(d=!0,k=V.WEBKIT_MUTED);a.videoManagers[e].setMuteStatus(d,k);a.onOnePercentViewabilityChange(0,!1,a.currentPlayingIndex);a.currentPlayingIndex=e;a.currentCarouselPage=e;a.prevPlayingIndex=c;d=x["default"].cardRoot.querySelector('[data-index="'+a.currentPlayingIndex+'"]');k=x["default"].cardRoot.querySelector('[data-index="'+(a.currentPlayingIndex+1)+'"]');a.updateMediaAssetSources(k,a.currentPlayingIndex+
1);a.logImpression(d,a.currentPlayingIndex);a.handleCardItemsReceived(a.currentPlayingIndex,a.videoManagers[a.currentPlayingIndex].videoAdAttributes);a.onOnePercentViewabilityChange(1,!0,e);if(a.isVideoPlaying())a.onFiftyPercentViewabilityChange(1,!0,e);a.onFiftyPercentViewabilityChange(0,!1,c)}};a.onFiftyPercentViewabilityChange=function(c,d,e){var k=a.controllerOptions.carouselDisplayStrategy===S.SINGLE_ELEMENT?!(d&&e!==a.currentPlayingIndex):!0;e!==a.currentPlayingIndex&&e!==a.prevPlayingIndex||
!k||(a.isALink?(a.isALink=!1,a.videoManagers[e].onFiftyPercentViewabilityChange(c,d,!0)):(a.videoPlayersStatus[e]=d,a.videoManagers[e].onFiftyPercentViewabilityChange(c,d)))};a.onOnePercentViewabilityChange=function(c,d,e){if(e===a.currentCarouselPage)a.videoManagers[e].onOnePercentViewabilityChange(c,d)};a.getCarouselFirstItemMarginCalculations=function(c,d,e,k){switch(k){case S.SINGLE_ELEMENT:return(c-d)/2+e;default:return(c-d-5)/2}};a.updateCarouselFirstItemMargin=function(c){var d=a.controllerOptions,
e=d.minimumGutterWidth;e=void 0===e?9:e;var k=d.carouselDisplayStrategy;if(d.shouldPeekCarouselItems){d=x["default"].cardRoot.getElementsByClassName("a-carousel")[0];var l=e,n=x["default"].cardRoot.querySelectorAll(W.CARD_ITEM);c?1===n.length&&(l=0):l=a.getCarouselFirstItemMarginCalculations(screen.width,n[0].clientWidth,e,k);d.style.marginLeft=l.toString()+"px"}};a.updateCarouselFirstItemMargin(!0);a.autoScrolled=!1;a.controllerOptions.enablePaginationDots&&(a.pagination=new Pd);a.carouselViewport=
x["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0];return a}p.__extends(g,b);g.prototype.handlePageLoad=function(){var h=this,f=x["default"].cardRoot.querySelectorAll(W.CARD_ITEM);f.length&&f.forEach(function(a,c){a&&c<h.carouselItemsPerPage()&&(a=JSON.parse(f[c].dataset.videoAdAttributesProps),h.logImpression(f[c],c),h.handleCardItemsReceived(c,a))})};g.prototype.onImmersiveVideoCallback=function(h){Qd(h,this.metricsManager)};return g}(mc),nc;(function(b){b.BRANDED_PDP="branded-pdp";
b.UNBRANDED_PDP="unbranded-pdp";b.BRANDED_PDP_WITH_LOGO_HEADLINE="brand_logo-headline"})(nc||(nc={}));var oc;(function(b){b.Asin="ASIN";b.Brand="BRAND";b.Video="VIDEO";b.Uri="URI"})(oc||(oc={}));var va;(function(b){b.DETAIL="Detail";b.SEARCH="Search"})(va||(va={}));var Ha;(Ha||(Ha={})).SEARCH_GRID="searchGrid";var pc;(pc||(pc={})).SponsoredBrandsIngress="sponsoredbrands";var na;(function(b){b.AF="AF";b[b.NONE=0]="NONE";b[b.MICRO=100]="MICRO";b[b.SMALL=500]="SMALL";b[b.LARGE=1E3]="LARGE"})(na||(na=
{}));var qc=function(){return function(b,g){var h,f=this;this.getTreatment=function(l,n){void 0===n&&(n=!0);if(0===f.weblabsMap.size)ka["default"].log("There are no weblabs information found by ClientWebLapHlper","ERROR",f.attribution);else{if(f.weblabsMap.has(l)){var m=f.weblabsMap.get(l);if(void 0===m){ka["default"].log("No treatment found in weblab map for "+l,"ERROR",f.attribution);return}if(n)try{Oc["default"].trigger(l,m)}catch(q){}return m}ka["default"].log("Get treatment for unknown weblab",
"ERROR",f.attribution)}};var a=new Map;b=b.split(",").filter(function(l){return 0<l.length});if(0<b.length)try{for(var c=p.__values(b),d=c.next();!d.done;d=c.next()){var e=d.value.split(":");a.set(e[0].trim(),e[1].trim())}}catch(l){var k={error:l}}finally{try{d&&!d.done&&(h=c.return)&&h.call(c)}finally{if(k)throw k.error;}}this.weblabsMap=a;this.attribution=g}}(),rc;(function(b){b.DEFAULT="Default";b.PRODUCT_WITH_TINTED_CTA="ProductWithTintedCta";b.STORE_VERTICAL_VIDEO="StoreVerticalVideo"})(rc||
(rc={}));var db;(function(b){b.DEFAULT="Default";b.PRODUCT_WITH_TINTED_CTA="ProductWithTintedCta"})(db||(db={}));var sc;(function(b){b.DEFAULT="Default";b.DEALS="Deals"})(sc||(sc={}));var Sd={method:"HEAD",mode:"no-cors",headers:{"Content-Type":"plain/text"}},tc=function(b){return"mobile"===ya()||(null===b||void 0===b?void 0:b.getTreatment(Q.ADPT_SBV_1041956))!==E.T1?Promise.resolve(!1):Xc("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?_=1607460946161",2E3,Sd).then(function(){return!1}).catch(function(){return!0})},
Vd=function(b){return p.__awaiter(void 0,void 0,void 0,function(){var g,h,f,a,c,d,e,k,l,n;return p.__generator(this,function(m){switch(m.label){case 0:g=b.cardName;h=b.isDesktop;f=b.viewMetricsOptions;a=void 0===f?{}:f;c=b.visibilityThreshold;if(!x["default"].cardRoot.dataset.props)return F.count(g+"-NoProps"),[2];h&&Td();lb();d=JSON.parse(x["default"].cardRoot.dataset.props);m.label=1;case 1:return m.trys.push([1,3,,4]),e=new qc(d.weblabs,d.widgetType),k=new tb({clientId:d.clientId,deviceEnv:vb(),
deviceOs:wb(),deviceType:ya(),language:d.language,marketplaceId:d.marketplaceId,pageType:d.pageType,stage:Na.getStage(),weblabs:d.weblabs,widgetGroupId:d.widgetGroupId,widgetIndex:d.widgetIndex,widgetType:d.widgetType,requestId:d.requestId,searchQuery:d.searchQuery,experience:d.experience,experienceVariation:d.experienceVariation},ub(d.marketplaceId),p.__assign({},a)),d.widgetType===N.SHORT_FORM_VIDEO&&wa["default"].visible().then(function(){k.reportWidgetOnScreen()}),b.strategy===Ha.SEARCH_GRID&&
(od.registerStrategy(ma.SEARCH_GRID),kd.registerStrategy(S.SEARCH_GRID)),[4,Ud(k,b,e)];case 2:return l=m.sent(),d.experience===db.PRODUCT_WITH_TINTED_CTA.toString()&&pd("sbvTintedCtaText",'[id="ctaLink"]',"data-alternatectatext"),null!==c&&void 0!==c?c===na.AF?P.when("af").execute(function(){return eb(e,d,k,l,b)}):wa["default"].visible(c).then(function(){eb(e,d,k,l,b)}):eb(e,d,k,l,b),[3,4];case 3:return n=m.sent(),ka["default"].log(n,"ERROR",d.widgetType),ka["default"].log("SBV multi-brand-video client setup failed",
"ERROR",d.widgetType),[3,4];case 4:return[2]}})})},Ud=function(b,g,h){return p.__awaiter(void 0,void 0,void 0,function(){var f,a,c,d,e,k;return p.__generator(this,function(l){switch(l.label){case 0:return f=g.controllerOptions,a=g.isDesktop,c=g.shouldDelayMediaLoading,d=g.showDealBadge,[4,tc(h)];case 1:return e=l.sent(),k=p.__assign(p.__assign({},f),{isAdBlockerEnabled:e,shouldDelayMediaLoading:c,showDealBadge:d,shouldEnableVideoCleanup:Ub(h),shouldEnableReduceMotionEffects:h.getTreatment(Q.SBV_842986)===
E.T1,clientWeblabHelper:h}),[2,a?new Od(b,k):new Rd(b,k)]}})})},eb=function(b,g,h,f,a){return p.__awaiter(void 0,void 0,void 0,function(){var c,d,e,k;return p.__generator(this,function(l){switch(l.label){case 0:c=a.cardName;d=a.minNumberOfVideos;e=void 0===d?2:d;k=x["default"].cardRoot.querySelectorAll(W.CARD_ITEM);if(null===k||void 0===k||!k.length)return F.count(c+"-NoAds"),h.reportNoAdError(),[2];(null===k||void 0===k?void 0:k.length)<e&&(F.count(c+"-NumOfAdsLessThanMin"),h.reportNumOfAdsLessThanMinRequirement());
if(g.pageType===va.DETAIL){l=x["default"].cardRoot.getElementsByClassName("a-carousel-header-row")[0];var n=x["default"].cardRoot.getElementsByClassName("a-carousel-heading")[0];l&&n&&(n.classList.add("featureHeading"),l.style.visibility="visible")}h.reportResponseReceived(k.length);Wd(b,h,a);return[4,f.start()];case 1:return l.sent(),[2]}})})},Wd=function(b,g,h){return p.__awaiter(void 0,void 0,void 0,function(){var f,a,c;return p.__generator(this,function(d){f=b.getTreatment(Q.SBV_672322)===E.T1;
a=h.cardName;c=h.enableAdFeedback;pb(g,{cardName:a,enableAdFeedback:c,isAdFeedbackForCards:f});return[2]})})},Td=function(){var b=x["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],g=x["default"].cardRoot.getElementsByClassName("a-carousel-right")[0];if(b){var h=b.getElementsByClassName("a-carousel-button")[0];b.style.height="100%";h.style.top="45%"}g&&(g.style.height="100%",g.getElementsByClassName("a-carousel-button")[0].style.top="45%")},Xd=function(){return function(b,g,h,f,a,
c,d){var e=this;void 0===f&&(f=!1);void 0===a&&(a=!1);void 0===c&&(c=!1);void 0===d&&(d=!1);this.isALink=!1;this.videoManagers=[];this.videoPlayersStatus=[];this.impFired=[];this.carouselItemsPerPage=function(){var k=e.carouselViewport.clientWidth,l=x["default"].cardRoot.getElementsByClassName("a-carousel-card")[0].clientWidth;return Math.floor(k/(l+18))};this.start=function(){return p.__awaiter(e,void 0,void 0,function(){var k,l,n=this;return p.__generator(this,function(m){switch(m.label){case 0:return this.carouselViewport=
x["default"].cardRoot.getElementsByClassName("a-carousel-viewport")[0],k=x["default"].cardRoot.querySelectorAll('[data-type="mbvItem"]'),k.forEach(function(q,v){var u,w,A,B,G,J;v<n.carouselItemsPerPage()?n.logImpression(q,v):n.impFired[v]=!1;n.videoPlayersStatus[v]=!1;var C=JSON.parse(q.dataset.videoAdAttributesProps);q.style.visibility="inherit";q.querySelectorAll('[data-type="productTitle"]')[0].style.display="-webkit-box";var H=q.querySelector('[data-type="videoContainer"]'),K=q.querySelector('[data-type="productContainer"]'),
I=q.querySelector('[data-type="brandContainer"]'),T=null!==(u=null===I||void 0===I?void 0:I.classList.contains("aok-hidden"))&&void 0!==u?u:!1;(u=q.querySelectorAll("a"))&&u.forEach(function(ba){ba.addEventListener("click",function(){n.isALink=!0})});H?K?null===I?n.metricsManager.reportMissingBrandElement(C):(T&&(T=null!==(A=null===(w=null===I||void 0===I?void 0:I.querySelector('[class*="nameContainer"] span'))||void 0===w?void 0:w.textContent)&&void 0!==A?A:"",w=null!==(B=null===I||void 0===I?void 0:
I.querySelector('a[class*="storeLink"]'))&&void 0!==B?B:null,n.metricsManager.reportMissingBrandElement(C,{storeName:T,storeUrl:null!==(G=null===w||void 0===w?void 0:w.getAttribute("href"))&&void 0!==G?G:void 0,storeCta:null!==(J=null===w||void 0===w?void 0:w.text)&&void 0!==J?J:void 0})),B=new Vb(q),B.attach(),B=new yb(n.metricsManager,C,{},B),C=new Pb(H,B,C,{isAdBlockerEnabled:n.isAdBlockerEnabled,shouldEnablePlayButton:!0,shouldEnableVideoCleanup:n.shouldEnableVideoCleanup,shouldEnableReduceMotionEffects:n.shouldEnableReduceMotionEffects,
clientWeblabHelper:n.clientWeblabHelper},!0,n.shouldDelayLoadingVideos),C.init(),n.videoManagers.push(C),ca.registerElement(H,.5,!0,!0,!0,n.onFiftyPercentViewabilityChange,v),ca.registerElement(H,.01,!0,!0,!0,n.onOnePercentViewabilityChange,v),H=new Sb(n.metricsManager,C),(new Tb({brandElement:I,productElements:[K]},H)).setupWidgetEvents(),(K=q.querySelector('[data-type="playIcon"]'))&&K.addEventListener("click",function(ba){return n.onPlayBtnEventTriggered(ba,v)}),n.shouldShowDealBadge&&Rb(q)):n.metricsManager.reportMissingProductElement(C):
n.metricsManager.reportMissingVideoElement(C)}),[4,this.carousel.initialized];case 1:return m.sent(),this.carousel.on("change:pageNumber",this.onCarouselPageChange),l=pa["default"].getCarousel(Ja.unscope(this.carouselViewport)),l.strategies.display.repaint(l),[2]}})})};this.getDynamicMetricAttributes=function(){var k;return k={},k[r.CAROUSEL_ITEM_INDEX]=e.currentPlayingIndex,k[r.CAROUSEL_PAGE_NUMBER]=e.currentCarouselPage,k};this.logImpression=function(k,l){if(!e.impFired[l]&&(k=k.querySelector('[data-type="ip"]'))){var n=
k.getAttribute("data-src");n&&(k.setAttribute("src",n),e.impFired[l]=!0)}};this.updateClientMetricsContext=function(){e.metricsManager.setClientMetricsContext({getDynamicMetricsAttributes:e.getDynamicMetricAttributes})};this.onCarouselPageChange=function(k){if(void 0===k)e.metricsManager.reportCarouselPageChanged(-1,-1);else{var l=k.newPageNumber-1,n=k.oldPageNumber-1;e.metricsManager.reportCarouselPageChanged(l,n);k=e.carouselItemsPerPage();var m=l*k;n*=k;var q=k*(l+1),v=e.impFired.length;q=q<=v?
q:v;for(v=m;v<q;v++){var u=x["default"].cardRoot.querySelector('[data-index="'+v+'"]');e.logImpression(u,v)}e.videoManagers[m].setMuteStatus(e.videoManagers[e.currentPlayingIndex].isMuted,V.INHERIT);e.onFiftyPercentViewabilityChange(0,!1,e.currentPlayingIndex);for(q=n;q<n+k&&q<e.videoManagers.length;q++)e.onOnePercentViewabilityChange(0,!1,q);e.currentCarouselPage=l;e.isVideoOnCurrentCarouselPage(e.currentPlayingIndex,l)||(e.currentPlayingIndex=m);for(q=m;q<m+k&&q<e.videoManagers.length;q++)if(e.onOnePercentViewabilityChange(1,
!0,q),e.isMbvVideoPlaying())e.onFiftyPercentViewabilityChange(1,!0,q)}};this.onPlayBtnEventTriggered=function(k,l){e.metricsManager.reportVideoPlayButtonTriggered(l,e.videoManagers[l].videoAdAttributes);e.pauseVideo(e.currentPlayingIndex);e.videoManagers[l].setMuteStatus(e.videoManagers[e.currentPlayingIndex].isMuted,V.INHERIT);e.playVideo(l)};this.pauseVideo=function(k){e.videoManagers[k].pause()};this.playVideo=function(k){e.enableAutoPlayForAllVideos();e.videoManagers[k].play();e.currentPlayingIndex=
k};this.isMbvVideoPlaying=function(){return e.videoPlayersStatus.some(function(k){return k})};this.onFiftyPercentViewabilityChange=function(k,l,n){e.isVideoOnCurrentCarouselPage(n,e.currentCarouselPage)&&(e.isALink?(e.isALink=!1,e.videoManagers[e.currentPlayingIndex].onFiftyPercentViewabilityChange(k,l,!0)):(e.videoPlayersStatus[n]=l,e.videoManagers[e.currentPlayingIndex].onFiftyPercentViewabilityChange(k,l)))};this.onOnePercentViewabilityChange=function(k,l,n){if(e.isVideoOnCurrentCarouselPage(n,
e.currentCarouselPage))e.videoManagers[n].onOnePercentViewabilityChange(k,l)};this.enableAutoPlayForAllVideos=function(){e.videoManagers.forEach(function(k){k.setAutoPlayDisabled(!1)})};this.isVideoOnCurrentCarouselPage=function(k,l){var n=e.carouselItemsPerPage();l=(l+1)*n;return k>=l-n&&k<l};this.carousel=ib["default"].getCarousel(x["default"].cardRoot.getElementsByClassName("a-carousel-container")[0]);this.metricsManager=b;this.shouldDelayLoadingVideos=g;this.clientWeblabHelper=h;this.shouldShowDealBadge=
f;this.shouldEnableVideoCleanup=a;this.shouldEnableReduceMotionEffects=c;this.currentCarouselPage=this.currentPlayingIndex=0;this.isAdBlockerEnabled=d;this.updateClientMetricsContext()}}(),oa=function(b,g){return b.querySelector("[class*="+g+"]")},Yd=function(b,g,h){b=JSON.parse(b);b.adCreativeMetaData=g.adCreativeMetaData;b.feedbackFormContainerId=h;return encodeURI(JSON.stringify(b))},Zd=function(b,g,h,f,a){return p.__awaiter(void 0,void 0,void 0,function(){var c,d,e,k,l,n,m;return p.__generator(this,
function(q){c="adFeedbackModal_"+b;q=(null===(m=oa(g,"ad-feedback-modal-container"))||void 0===m?void 0:m.className)||"";d="."+g.className+" ."+q.replace(" ",".");k=(e=h().adCreativeMetaData.adCreativeDetails)?e.length:0;l={a11yOpenMessage:a?a:"",width:Math.max(560,132*k+160),a11yCloseButtonMessage:f};try{return n=Pc["default"].create(c,d,l),[2,n]}catch(v){throw F.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+v);}})})},be=function(b,g,h,f,a,c){var d=
"rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var e=oa(fa["default"].cardRoot,d);b.on("beforeShow",function(){return p.__awaiter(void 0,void 0,void 0,function(){var k;return p.__generator(this,function(l){switch(l.label){case 0:return k=$d(b,g,h),[4,b.render(function(n){var m="250px",q=h().adCreativeMetaData.adCreativeDetails;q&&2>q.length&&(m="150px");e.style.marginTop=m;n.innerHTML="";m=n.appendChild;q=document.getElementsByTagName("html")[0].dir;
var v=fa["default"].createElement("div"),u=fa["default"].createElement("div");v.innerHTML=a;"rtl"===q?(v.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
u.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(v.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),u.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
u.appendChild(v);m.call(n,u);m=document.getElementsByTagName("html")[0].dir;q=fa["default"].createElement("div");"rtl"===m?q.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):q.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");ae(e,q,f,k,c);n.appendChild(q)})];case 1:return l.sent(),[2]}})})})},$d=function(b,g,h){h=h();var f=h.adCreativeMetaData.adCreativeDetails;
null===f||void 0===f?void 0:f.sort(function(a,c){return a.adCreativeIndex<c.adCreativeIndex?-1:1});return Yd(g,h,b.id)},ae=function(b,g,h,f,a){g.appendChild(b);"function"==typeof F.uet&&F.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});Qc["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===h?"en-US":h}},{pl:f,deviceType:"desktop"}).then(function(c){return p.__awaiter(void 0,
void 0,void 0,function(){var d,e,k;return p.__generator(this,function(l){"function"==typeof F.uet&&F.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});F.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);d=fa["default"].createElement("div");d.innerHTML=String(c.responseBody);for(e=0;e<d.children.length;++e)k=d.children[e],"SCRIPT"===k.tagName?fb("script",k,g):"LINK"===k.tagName?fb("link",k,g):fb("div",k,g);g.removeChild(b);return[2]})})}).catch(function(){"function"==
typeof F.uet&&F.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});F.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);g.innerHTML=a});"function"==typeof F.uex&&F.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},fb=function(b,g,h){var f=fa["default"].createElement(b);f.innerHTML=g.innerHTML;g.getAttributeNames().forEach(function(a){f.setAttribute(a,g.getAttribute(a)||"")});h.appendChild(f)},uc={},ce=function(b,g){return p.__awaiter(void 0,
void 0,void 0,function(){var h,f,a,c,d,e,k,l,n,m,q;return p.__generator(this,function(v){h=oa(b,"ad-feedback-primary-link");f=g().adFeedbackLabelId;a=jb["default"].setup();c="open-modal"+f;d=g().adCreativeMetaData.adCreativeDetails;e=b.dataset;k=e.isDsaEnabled;l=e.weblabTreatment;n=e.closeButtonAriaText;m=e.adFeedbackTitle;q=String(k);"undefined"===q&&(q=d&&0<d.length?d[0].selectionSignals?"true":"false":"false");"true"===q&&"T1"!==l&&(q="false");a.attach(c,h);a.define(c,"click",function(){return p.__awaiter(void 0,
void 0,void 0,function(){var u;return p.__generator(this,function(w){switch(w.label){case 0:return(u=uc[f])?[3,2]:[4,Zd(f,b,g,n,m)];case 1:u=w.sent();var A=b.dataset,B=A.formHeaderText,G=A.dsaFormHeaderText;be(u,A.adFeedbackPayload,g,A.currentLocale,"true"===q?G:B,A.formLoadErrorText);uc[f]=u;w.label=2;case 2:return u.show(),[2]}})})});try{h.addEventListener("keydown",function(u){if(" "===u.key||"Enter"===u.key)u.preventDefault(),h.click()})}catch(u){console.log("Couldnt add keydown event listner")}return[2]})})},
de=function(b,g){var h=jb["default"].setup(),f="mouse-enter"+g;g="mouse-leave"+g;var a=oa(b,"ad-feedback-primary-link"),c=oa(b,"ad-feedback-text-desktop"),d=oa(b,"ad-feedback-sprite");h.attach(f,a);h.define(f,"mouseenter",function(){d.style.backgroundPosition="0px -12px";c.style.color="#111111"});h.attach(g,a);h.define(g,"mouseleave",function(){d.style.backgroundPosition="0px 0px";c.style.color="#555"})},vc=function(b){return p.__awaiter(void 0,void 0,void 0,function(){var g,h,f,a;return p.__generator(this,
function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),g=b(),h=x["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+g.adFeedbackLabelId)[0],f=h.dataset.isSponsoredLabelActive,"false"===(f||"false").toLowerCase()?[2]:[4,de(h,g.adFeedbackLabelId)];case 1:return c.sent(),[4,ce(h,b)];case 2:return c.sent(),[3,4];case 3:throw a=c.sent(),F.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+a);case 4:return[2]}})})},
gb=function(){return p.__awaiter(void 0,void 0,void 0,function(){var b,g,h,f,a,c,d,e,k,l,n;return p.__generator(this,function(m){switch(m.label){case 0:if(!x["default"].cardRoot.dataset.props)return F.count("sbvMultiBrandVideoNoProps"),[2];b=JSON.parse(x["default"].cardRoot.dataset.props);g=new qc(b.weblabs,N.MULTI_BRAND_VIDEO);h=b.pageType;a=(f=h===va.DETAIL)&&g.getTreatment(Q.ADPT_SBV_959560)===E.T1;c=h===va.SEARCH&&g.getTreatment(Q.SBV_620753)===E.T1;d=f&&g.getTreatment(Q.SBV_668132)===E.T1;e=
g.getTreatment(Q.MBV_394048)||"";k=ee(e);if(!a&&!c)return[3,2];l=g.getTreatment(Q.SBV_642751)===E.T1;n={shouldLogViewMetrics:!0,shouldBillViewMetrics:!0};return[4,Vd({cardName:"multi-brand-video-desktop",controllerOptions:{isOptionalNavButton:c,minimumGutterWidth:c?0:18,shouldHideNavButtonOnPageChange:c,transitionStrategy:c?ha.SEARCH_GRID:void 0,viewportConfig:{height:"380px"}},enableAdFeedback:vc,isDesktop:!0,shouldDelayMediaLoading:l,visibilityThreshold:k,viewMetricsOptions:n,showDealBadge:d,showEELBadge:g.getTreatment(Q.SBV_656845)===
E.T1,strategy:c?Ha.SEARCH_GRID:void 0})];case 1:return m.sent(),[3,3];case 2:lb(),fe(),null!==k?wa["default"].visible(k).then(function(){wc(g,b,e,d)}):wc(g,b,e,d),m.label=3;case 3:return[2]}})})},wc=function(b,g,h,f){void 0===f&&(f=!1);return p.__awaiter(void 0,void 0,void 0,function(){var a,c,d,e,k,l,n,m,q,v,u;return p.__generator(this,function(w){switch(w.label){case 0:a=b.getTreatment(Q.SBV_672322)===E.T1;c={shouldLogViewMetrics:!0,shouldBillViewMetrics:!0};d=h===E.T4||h===E.T5||h===E.T6||h===
E.T7;e=new tb({clientId:g.clientId,deviceEnv:vb(),deviceOs:wb(),deviceType:ya(),language:g.language,marketplaceId:g.marketplaceId,pageType:g.pageType,requestId:g.requestId,stage:Na.getStage(),weblabs:g.weblabs,widgetGroupId:g.widgetGroupId,widgetIndex:void 0,widgetType:g.widgetType},ub(g.marketplaceId),c);k=x["default"].cardRoot.querySelectorAll('[data-type="mbvItem"]');if(null===k||void 0===k||!k.length)return F.count("sbvMultiBrandVideoNoAds"),e.reportNoAdError(),[2];2>(null===k||void 0===k?void 0:
k.length)&&(F.count("sbvMultiBrandVideoNumOfAdsLessThanMin"),e.reportNumOfAdsLessThanMinRequirement());l=x["default"].cardRoot.getElementsByClassName("a-carousel-header-row")[0];n=x["default"].cardRoot.getElementsByClassName("a-carousel-heading")[0];n.classList.add("featureHeading");l.style.visibility="visible";Ma();e.reportResponseReceived(k.length);pb(e,{cardName:"sbvMultiBrandVideo",enableAdFeedback:vc,isAdFeedbackForCards:a});m=Ub(b);q=b.getTreatment(Q.SBV_842986)===E.T1;return[4,tc(b)];case 1:return v=
w.sent(),u=new Xd(e,d,b,f,m,q,v),[4,u.start()];case 2:return w.sent(),[2]}})})},fe=function(){var b=x["default"].cardRoot.getElementsByClassName("a-carousel-left")[0],g=x["default"].cardRoot.getElementsByClassName("a-carousel-right")[0];b.style.height="100%";g.style.height="100%";b=b.getElementsByClassName("a-carousel-button")[0];g=g.getElementsByClassName("a-carousel-button")[0];b.style.top="45%";g.style.top="45%"},ee=function(b){switch(b){case E.T1:case E.T5:return na.NONE;case E.T2:case E.T6:return na.MICRO;
case E.T3:case E.T7:return na.SMALL;default:return null}};Ia._operationNames=[];Ia.card=function(){return p.__awaiter(void 0,void 0,void 0,function(){return p.__generator(this,function(b){wa["default"].pageReady.then(gb,gb);return[2]})})};Ia.initOnReady=gb});
