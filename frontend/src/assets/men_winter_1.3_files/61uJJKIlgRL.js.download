'use strict';mix_d("SBXGwentPHDCards__lifestyle-image-v4-creative-desktop-dp:lifestyle-image-v4-creative-desktop-dp__9OJ1z_rb","exports @c/remote-operations tslib @c/pagemarker @c/dom @c/logger @c/aui-utils @c/metrics @c/aui-feature-detect @p/A @c/browser-operations @p/a-ajax @c/aui-modal @c/scoped-dom @c/aui-untrusted-ajax".split(" "),function(Qa,rb,y,sb,ua,Ra,Sa,L,tb,ub,va,vb,wb,xb,yb){function N(b){return b&&"object"===typeof b&&"default"in b?b:{"default":b}}function O(b,a){return function(d){d=
w(b,d);return a?a(d):d}}function Ta(b,a,d,f){a?(v("Send"+b+"Success"),d&&v("Send"+b+"Success_"+d),f&&v("Send"+b+"Success_"+f)):(v("Send"+b+"Failure"),d&&v("Send"+b+"Failure_"+d),f&&v("Send"+b+"Failure_"+f))}function Ua(b){return Array.isArray(b)?b.map(function(a){return y.__assign(y.__assign({},a),{width:0,height:0})}):{url:b.url,width:0,height:0}}function zb(b){b.getElements('[data-mix-operations~="dare-adb--countdown"]').forEach(function(a){var d,f,c,e,g=null===(f=null===(d=a.parentElement)||void 0===
d?void 0:d.parentElement)||void 0===f?void 0:f.dataset.timestamp;if(g){var h=null===(e=null===(c=a.parentElement)||void 0===c?void 0:c.parentElement)||void 0===e?void 0:e.dataset.template;if(h){var l=(new Date(g)).getTime();d=function(){var m,n=(new Date).getTime();n=Math.ceil((l-n)/1E3);if(0>n&&"undefined"!==typeof k)clearInterval(k),n=null===(m=a.parentElement)||void 0===m?void 0:m.parentElement,(null===n||void 0===n?0:n.nextElementSibling)&&n.remove();else{m=[];var p=Math.floor(n/3600%24);0<=p&&
m.push(("0"+p).slice(-2));m.push(("0"+Math.floor(n/60%60)).slice(-2));m.push(("0"+Math.floor(n%60)).slice(-2));a.innerText=h.replace(h,m.join(":"))}};d();var k=setInterval(d,1E3)}else b.log("no template string for automated deal badge countdown","WARN")}else b.log("no timestamp for automated deal badge countdown","WARN")})}function Ab(b){b.getElement&&b.getElements('[data-dare~="call-to-action"]').forEach(function(a){var d,f,c,e=b.getElement('[data-dare~="call-to-action--fallback"]',null!==(d=a.parentElement)&&
void 0!==d?d:void 0),g=b.getElement(".a-truncate",a)||b.getElement("span[data-dare-max-rows]",a);d=b.getElement(".a-truncate-full",a)||b.getElement('span[class*="_truncatedText_"]',a);g&&d&&(d.clientHeight>g.clientHeight&&e?(e.style.display="block",null===(f=a.parentElement)||void 0===f?void 0:f.removeChild(a)):(e=b.getElement('[data-dare~="call-to-action--chevron"]',a))&&!d.hasAttribute("data-dare-chevron")&&(a=d.innerText.split(" "),f=a.pop(),e=e.innerHTML,a="<span>".concat(a.join(" ")," </span><span>").concat(null===
(c=null!==f&&void 0!==f?f:"")||void 0===c?void 0:c.trim(),"&nbsp;").concat(e,"</span>"),d.innerHTML=a,d.setAttribute("data-dare-chevron","true")))})}function wa(b){return P&&P.AUI_BUILD_DATE?!0:(b.log("AUI P not found","ERROR"),!1)}function Bb(b,a){var d=this;wa(b)&&P.when("A").execute(function(f){var c=f.capabilities.mobile;P.when(c?"a-secondary-view":"a-modal").execute(function(e){return na(d,void 0,void 0,function(){var g,h=this;return oa(this,function(l){g=function(k,m){return na(h,void 0,void 0,
function(){var n,p,t,r,u,q,z,A,B,H;return oa(this,function(E){switch(E.label){case 0:n=k.currentTarget;if(!(n instanceof HTMLElement))return b.log("energy-efficiency-".concat(m," click target not an html element"),"WARN"),[2];if(e.get(n))return[2];if(n.dataset.dareEeModalContent)try{p=JSON.parse(n.dataset.dareEeModalContent)}catch(ba){return ba instanceof Error&&b.log(ba,"ERROR"),b.log("failed to parse eel payload","ERROR"),[2]}a:{var D=p;if("object"!==typeof D)var I=!1;else{I=0;for(D=[Object.getOwnPropertyDescriptor(D,
"closeButtonLabel"),Object.getOwnPropertyDescriptor(D,"ficheImageUrl"),Object.getOwnPropertyDescriptor(D,"ficheTitle"),Object.getOwnPropertyDescriptor(D,"id"),Object.getOwnPropertyDescriptor(D,"labelImageUrl"),Object.getOwnPropertyDescriptor(D,"labelTitle"),Object.getOwnPropertyDescriptor(D,"modalTitle")];I<D.length;I++){var M=D[I];if("string"!==typeof(null===M||void 0===M?void 0:M.value)){I=!1;break a}}I=!0}}if(!I)return b.log("energy-efficiency-".concat(m," data is invalid: ").concat(n.dataset.content),
"WARN"),[2];"fiche"!==m||p.ficheImageUrl&&p.ficheTitle||b.log("energy-efficiency-".concat(m," payload is missing expected fiche data: ").concat(JSON.stringify(p)),"WARN");E.label=1;case 1:return E.trys.push([1,5,,6]),t="fiche"===m?p.ficheTitle:p.labelTitle,r="fiche"===m?p.ficheImageUrl:p.labelImageUrl,u=b.createElement("img"),u.setAttribute("alt",null!==t&&void 0!==t?t:""),u.setAttribute("src",null!==r&&void 0!==r?r:""),null!==a&&void 0!==a&&a.generateModalContent?[4,a.generateModalContent(pa(pa({},
p),{activeTab:m}))]:[3,3];case 2:return z=E.sent(),[3,4];case 3:z=null,E.label=4;case 4:return q=z,A=e.create(n,{closeButtonLabel:p.closeButtonLabel,header:c?void 0:p.modalTitle,inlineContent:c||!q?u.outerHTML:q.outerHTML,popoverLabel:null!==(H=c?t:p.modalTitle)&&void 0!==H?H:"",width:c?void 0:"800"}),A.show(),[3,6];case 5:return B=E.sent(),B instanceof Error&&b.log(B,"ERROR"),b.log("failed to create eel popover","ERROR"),[3,6];case 6:return[2]}})})};b.addEventListener("dare-ee--label-click","click",
function(k){return na(h,void 0,void 0,function(){return oa(this,function(m){switch(m.label){case 0:return[4,g(k,"label")];case 1:return m.sent(),[2]}})})});b.addEventListener("dare-ee--fiche-click","click",function(k){return na(h,void 0,void 0,function(){return oa(this,function(m){switch(m.label){case 0:return[4,g(k,"fiche")];case 1:return m.sent(),[2]}})})});return[2]})})})})}function Cb(b){function a(c){try{fetch(c,{method:"GET",mode:"no-cors",cache:"no-store"}).catch(function(e){b.log("Network error when invoking AAX Click URL. Error: ".concat(e),
"WARN")})}catch(e){b.log("Failed to execute fetch() when invoking AAX Click URL. Error: ".concat(e),"WARN")}}var d=this;if(wa(b)){var f;b.addEventListener("dare-rcc--click","click",function(c){return Db(d,void 0,void 0,function(){var e,g,h,l,k;return Eb(this,function(m){e=c.currentTarget;e instanceof HTMLElement||b.log("Rufus conversation trigger is not an HTML element","WARN");g=null===e||void 0===e?void 0:e.dataset.query;g||(b.log("Rufus conversation trigger lacks query","ERROR"),g="");h=null===
e||void 0===e?void 0:e.dataset.asinid;h||(b.log("Rufus conversation trigger lacks ASIN ID","ERROR"),h="");l=null===e||void 0===e?void 0:e.dataset.aaxclickurl;l&&""!==l||(b.log("Rufus conversation trigger lacks AAX Click URL","ERROR"),l="");k=null===e||void 0===e?void 0:e.dataset.percolaterequestid;k||(b.log("Rufus conversation trigger lacks percolateRequestId","ERROR"),k=Math.random().toString(36).substr(2,10));if("undefined"!==typeof f)try{f.dispatchEvent({detail:{action:{actionId:Fb.SPARKLE_RELATED_QUESTION,
actionType:Gb.INVOKE_NILE_BACKEND_API_WITH_ASIN,payload:{qis:Hb.NileAdsSparkleRelatedQuestion,searchRequestId:k,triggerRequest:Ib.SPARKLE_RELATED_QUESTION,inContextAsin:h,query:g}}},type:Jb["savx:deeplinking"]}),""!==l&&a(l)}catch(n){n instanceof Error&&b.log(n,"ERROR"),b.log("Failed to dispatch Rufus conversation mash event","ERROR")}else b.log("Failed to dispatch event due to missing MASH");return[2]})})});P.when("mash").execute(function(c){f=c})}}function Kb(b,a){a=a||{};var d=a.isAutoPlayDisabled,
f=void 0===d?!1:d;d=a.clientExecutionMode;var c=void 0===d?void 0:d;d=a.clientInitiatedStartTime;var e=void 0===d?Date.now():d;a=a.metricsOptions;var g=void 0===a?void 0:a;b.getElements('[data-dare="Video"]').forEach(function(h){try{new Lb({el:h,strategy:b,isAutoPlayDisabled:f,clientExecutionMode:c,clientInitiatedStartTime:e,metricsOptions:g})}catch(l){b.log(l instanceof Error?l:"failed to initialize VideoPlayer","ERROR")}})}function Mb(b){var a,d,f=null!==(a=null===b||void 0===b?void 0:b.strategy)&&
void 0!==a?a:new Nb;a=null===b||void 0===b?void 0:b.operations;b=null===(d=null===b||void 0===b?void 0:b.options)||void 0===d?void 0:d.videoOptions;try{zb(f)}catch(k){k instanceof Error&&f.log(k,"ERROR"),f.log("failed to enable automated deal badges","ERROR")}try{Ab(f)}catch(k){k instanceof Error&&f.log(k,"ERROR"),f.log("failed to enable calls to action","ERROR")}try{var c=f.getElements('[data-dare="clamped-text"]');if(c.length&&!("-webkit-line-clamp"in c[0].style||"lineClamp"in c[0].style)){for(d=
0;d<c.length;d++){var e=c[d],g=parseInt(e.getAttribute("data-dare-max-rows")||"1"),h=Math.ceil(parseFloat(getComputedStyle(e).lineHeight||"1.3em")),l=g*h;if(!(e.scrollHeight<=l)){for(;e.scrollHeight>l;)e.innerText=e.innerText.slice(0,-1);e.innerText=e.innerText.slice(0,-3);e.innerText+="\u2026"}}f.log("polyfill applied to clamped text","WARN")}}catch(k){k instanceof Error&&f.log(k,"ERROR"),f.log("failed to enable clamped text","ERROR")}try{Bb(f,{generateModalContent:null===a||void 0===a?void 0:a.generateEnergyEfficiencyModalContent})}catch(k){k instanceof
Error&&f.log(k,"ERROR"),f.log("failed to enable energy efficiency buttons","ERROR")}try{Cb(f)}catch(k){k instanceof Error&&f.log(k,"ERROR"),f.log("failed to enable rufus conversation cue","ERROR")}try{Kb(f,b)}catch(k){k instanceof Error&&f.log(k,"ERROR"),f.log("failed to enable video player","ERROR")}}var xa=N(sb),F=N(ua),J=N(Ra),Ob=N(Sa),qa=N(L),Pb=N(tb),Y=N(ub),ya=N(va),Qb=N(vb),Va=N(wb),za=N(xb),Rb=N(yb),R,ka;(function(b){b.Cornerstone="CSTONE";b.Axiom="AXIOM"})(ka||(ka={}));var Sb=(R={},R.e="basebe.ClientErrors.5",
R.i="basebe.Impressions.8",R.c="basebe.Clicks.6",R.s="basebe.Swipes.6",R.v="basebe.Viewabilities.6",R.vc="basebe.VisualCompleteness.8",R.ss="basebe.slideshow.2",R.ia="basebe.ImpressionsV2.4",R.iv2="basebe.ImpressionsV3.2",R),Wa=function(b,a){return"matches"in b?b.matches(a):"msMatchesSelector"in b?b.msMatchesSelector(a):"webkitMatchesSelector"in b?b.webkitMatchesSelector(a):0<=C(a,x().ownerDocument.body).indexOf(b)},x=function(b,a){a=a||F["default"].cardRoot;return!b||Wa(a,b)?a:a.querySelector(b)},
C=function(b,a){return Array.prototype.slice.call((a||F["default"].cardRoot).querySelectorAll(b))},w=function(b,a){return(a=x("["+b+"]",a))?a.getAttribute(b):null},Xa=function(b,a){a:{for(var d="["+b+"]";a&&a!==F["default"].cardRoot;){if(Wa(a,d))break a;a=a.parentElement}a=null}return a?a.getAttribute(b):null},Ya=function(b){if(b)return b=b.getBoundingClientRect(),{left:b.left,right:b.right,top:b.top,bottom:b.bottom};b=T();return{left:0,top:0,right:b.innerWidth,bottom:b.innerHeight}},T=function(){return x().ownerDocument.defaultView},
Za=function(b,a){var d=T(),f,c=function(){f||(f=d.setTimeout(b,a))};c.cancel=function(){d.clearTimeout(f);f=0};return c},ra=function(b,a,d){var f=(d||{}).ms||25,c=(d||{}).el||T(),e=Ob["default"].throttle(a,f);c.addEventListener(b,e);return function(){c.removeEventListener(b,e)}},U=function(b,a){J["default"].log(b,"ERROR",a||"SBX_GWENT")},$a=function(b){var a;b=/\?([^#]+)/.exec(b);if(!b)return[];b=b[1].split("&");var d=null;try{for(var f=y.__values(b),c=f.next();!c.done;c=f.next()){var e=c.value;if(0===
e.indexOf("ref_=")){d=e;break}}}catch(h){var g={error:h}}finally{try{c&&!c.done&&(a=f.return)&&a.call(f)}finally{if(g)throw g.error;}}return d?(g=d.split("=").pop()||"")?g.split("_"):[]:[]},ab=function(b,a,d){var f={};if(5<d.length){f.el=d.pop()||null;a:{var c;try{for(var e=y.__values(d),g=e.next();!g.done;g=e.next()){var h=g.value;if(/^\d+$/.test(h)){var l=h;break a}}}catch(m){var k={error:m}}finally{try{g&&!g.done&&(c=e.return)&&c.call(e)}finally{if(k)throw k.error;}}l=null}f.index=l;f.asin=Xa("data-asin",
a);f.type=Xa("data-avar",a)}b.c(f,a)},Tb=function(b,a){var d=$a(a.href);ab(b,a,d)},Ub=function(b,a){var d=T(),f=function(c){2!==c.button&&(Tb(b,a),c.metaKey||c.altKey||c.shiftKey||c.ctrlKey||1===c.button||"_blank"===a.target||(c.preventDefault(),d.setTimeout(function(){d.open(a.href,a.target||"_top")},50)))};a.addEventListener("click",f);a.addEventListener("auxclick",f)},bb=function(b,a,d){var f=x("[data-active]"),c=(null===f||void 0===f?void 0:f.dataset)||{};f=c.paginationId;c=c.index;a.c({el:"sb-slideshow-arrow",
type:b,asin:void 0===f?null:f,index:void 0===c?null:c},d)},Wb=function(b,a){C("[href]",a).filter(function(d){return!d.classList.contains("a-carousel-button")}).forEach(function(d){Ub(b,d)});C('[data-mix-operations="dare-rcc--click"]',a).forEach(function(d){d.addEventListener("click",function(){return b.c({el:"rufus-conversation-cue"},a)})});C(".amazon-follow",a).forEach(function(d){d.addEventListener("click",function(){var f=$a("?&ref_="+d.getAttribute("data-ref"));ab(b,d,f)})});C('[data-mix-operations="handleNext"]').forEach(function(d){d.addEventListener("click",
function(){bb("next",b,a)})});C('[data-mix-operations="handlePrev"]').forEach(function(d){d.addEventListener("click",function(){bb("prev",b,a)})});C('[data-mix-operations="handlePaginationClick"]').forEach(function(d){d.addEventListener("click",function(){var f=d.dataset||{},c=f.paginationId;f=f.index;b.c({el:"sb-slideshow-pagination",type:"pagination",index:void 0===f?null:f,asin:void 0===c?null:c},a)})});C('[data-mix-operations="hotSpotClick"]').forEach(function(d){d.addEventListener("click",function(){var f,
c=(d.dataset||{}).asinid;c=void 0===c?null:c;var e=d.style,g=e.left;e=e.top;var h=x('[data-asin="'+c+'"]')||void 0;h=((null===(f=x("[data-asinindex]",h))||void 0===f?void 0:f.dataset)||{}).asinindex;f=void 0===h?null:h;g={x:parseFloat(g),y:parseFloat(e)};g=JSON.stringify(g);c=y.__assign({type:g},{asin:c,el:"hotspot",index:f});b.c(c,d)})});Vb(b)},Vb=function(b){var a=x('[class*="seeProducts"]'),d=x('[data-mix-operations="expandHandler"]'),f=C('[class*="sidebarButton"]'),c=[a,d].concat(f);if(c.length){var e=
[];c.forEach(function(h){if(h){var l=h instanceof HTMLButtonElement&&!w("data-index",h)?"seeProducts":h instanceof HTMLButtonElement?"asinSidebar":"shoppableImageCollapsed",k={asin:h.dataset.asinid||null,index:h.dataset.index||null,el:l};l=function(){if(h){var m=y.__assign({type:"collapsed"},k);b.c(m,h);g(c,e)}};e.push(l);h.addEventListener("click",l)}});var g=function(h,l){h.forEach(function(k,m){k&&k.removeEventListener("click",l[m])})}}},Aa=O("data-card-metrics-id",function(b){return(b||"").split("_")[0]}),
Ba=O("data-var",function(b){x('[data-mix-operations="dare-rcc--click"]')&&(b=(b||"")+"-rufusConversationCue");return b}),Xb=O("data-rid"),Yb=O("data-cid"),Zb=O("data-iid"),cb=O("data-aid"),db=O("data-aidx"),$b=O("data-idt",function(b){switch(b){case ka.Axiom:return ka.Axiom;default:return ka.Cornerstone}}),sa=O("data-rctx",function(b){return b?JSON.parse(b):{sid:"",cid:"",mid:"",aigen:null}}),Ca=O("data-wl",function(b){return b?b.split(","):[]}),ac=O("data-slot"),Da=O("data-ts"),Ea=function(){var b=
T();return b.innerWidth+"x"+b.innerHeight},Fa=function(b){return(b=b||F["default"].cardRoot)?(b=b.getBoundingClientRect(),{width:b.width,height:b.height}):{width:0,height:0}},ea=function(b,a){var d;a=a||F["default"].cardRoot;return(b=null===(d=a.querySelector('[class*="'+b+'"]'))||void 0===d?void 0:d.getAttribute("src"))?b:null},Ga=function(b){return{id:w("data-asin",b),prime:!!x(".a-icon-prime",b),price:!!x(".a-price",b),savings:!!x('.a-price[data-a-strike="true"]',b),rating:w("data-rt",b),badge:w("data-deal",
b)}},la=0,Ha=0,eb=!1,V=window.P,fb=Y["default"].capabilities&&Y["default"].capabilities.isAmazonApp,bc=function(){return V?new Promise(function(b){V.when("mash").execute("sb-viewability",function(a){var d,f;null!==(f=null===(d=a.appCX)||void 0===d?void 0:d.uiOrchestrator)&&void 0!==f&&f.getObstructions?a.appCX.uiOrchestrator.getObstructions({successCallback:function(){v("NewMashApiAvailable");b(!0)},failCallback:function(){v("NewMashApiNotAvailable");b(!1)}}):(v("NewMashApiNotAvailable"),b(!1))})}):
(v("NewMashApiNotAvailable"),Promise.resolve(!1))},cc=function(b){return fb&&"T1"===w("data-vcpmfullnativetreatment",b)?bc().then(function(a){return a}):Promise.resolve(!1)},fa={},Ja=function(b,a,d){void 0===d&&(d=!1);var f=b.getBoundingClientRect(),c=f.width*f.height,e=w("data-viewpixel",b);if(c){f=c=dc(f,c)/c;var g=w("data-vcpmtreatment",b)||"C";if(.5<=f&&"T1"===g){var h,l,k,m=b.getBoundingClientRect(),n=w("data-device",b)||"";g=0;var p=Math.max(0,m.left),t=Math.min(window.innerWidth,m.right),r=
Math.max(0,m.top);m=Math.min(window.innerHeight,m.bottom);var u=Math.max(0,t-p);var q=Math.max(0,m-r);if(0===u||0===q)b=0;else{var z=y.__read([Math.ceil(q/("mobile"===n?20:30)),Math.ceil(u/("mobile"===n?30:50))],2);n=z[0];z=z[1];for(var A=[],B=0;B<n;B++)for(var H=0;H<z;H++){var E=p+u*H/z,D=r+q*B/n;E>=p&&E<=t&&D>=r&&D<=m&&A.push([E,D])}try{for(var I=y.__values(A),M=I.next();!M.done;M=I.next()){var ba=y.__read(M.value,2);E=ba[0];D=ba[1];var ha=x().ownerDocument.elementsFromPoint(E,D);try{for(var W=
(l=void 0,y.__values(ha)),G=W.next();!G.done;G=W.next()){var ca=G.value;if(ca instanceof HTMLElement){if(ca===b||b.contains(ca))break;if(ca!==document.body&&"HTML"!==ca.tagName){var X=window.getComputedStyle(ca);if(!("none"===X.display||"hidden"===X.visibility||"0"===X.opacity||"none"===X.pointerEvents||.7>parseFloat(X.opacity))){var ia=X.backgroundColor;if("transparent"!==ia&&"rgba(0, 0, 0, 0)"!==ia&&""!==ia||X.backgroundImage.includes("url")){g++;break}}}}}}catch(Ia){l={error:Ia}}finally{try{G&&
!G.done&&(k=W.return)&&k.call(W)}finally{if(l)throw l.error;}}}}catch(Ia){var K={error:Ia}}finally{try{M&&!M.done&&(h=I.return)&&h.call(I)}finally{if(K)throw K.error;}}b=0===A.length?0:1-g/A.length}.5<=f&&(.5>c*b?v("LossOfImpresionFromObstruction"):v("NoLossOfImpressionFromObstruction"));f=c*b}.5<=f?v("PercentageInViewPortAbove50"):v("PercentageInViewPortBelow50");if(d)if(.5<=f)if(a)a();else return!0;else if(a)a.cancel();else return!0;else if(e)if(fa[e]||(fa[e]={percentageViewed:.5,startTimeInView:0}),
d=fa[e],d.percentageViewed=f,.5<=f){if(0===d.startTimeInView||1E3<Date.now()-d.startTimeInView)d.startTimeInView=Date.now();if(a)a();else return!0}else if(d.startTimeInView=0,a)a.cancel();else return!0}},ec=function(){return new Promise(function(b){if(V)try{V.when("MShopChrome").execute("sb-viewability",function(a){a&&"function"===typeof a.getBottomBarsHeight?a.getBottomBarsHeight({successCallback:function(d){v("SuccessToGetBottomBarHeight");"number"===typeof d.visibleHeight?b(d.visibleHeight):b(0)},
failCallback:function(){v("FailureToGetBottomBarHeight");J["default"].log("getBottomBarsHeight failed","ERROR","sbViewability");b(0)}}):(v("GetBottomBarsHeightNotAvailable"),b(0))})}catch(a){J["default"].log("P.when execution failed to get bottom bar height: "+a,"ERROR","sbViewability"),b(0)}else b(0)})},fc=function(){return new Promise(function(b){if(V)try{V.when("MShopChrome").execute("sb-viewability",function(a){a&&"function"===typeof a.getChromeInfo?a.getChromeInfo({successCallback:function(d){v("SuccessToGetTopBarHeight");
if(d.isTransparentNav){if(screen.orientation&&"landscape-primary"===screen.orientation.type&&"number"===typeof d.landscapeChromeHeight){b(d.landscapeChromeHeight);return}if(screen.orientation&&"portrait-primary"===screen.orientation.type&&"number"===typeof d.portraitChromeHeight){b(d.portraitChromeHeight);return}}b(0)},failCallback:function(){v("FailureToGetTopBarHeight");J["default"].log("getChromeInfo failed","ERROR","sbViewability");b(0)}}):(v("GetChromeInfoNotAvailable"),b(0))})}catch(a){J["default"].log("P.when execution failed to get top bar height: "+
a,"ERROR","sbViewability"),b(0)}else b(0)})},gc=function(b,a,d){return new Promise(function(f){try{null===V||void 0===V?void 0:V.when("mash").execute("sb-viewability",function(c){var e,g,h;null===(h=null===(g=null===(e=c.appCX)||void 0===e?void 0:e.uiOrchestrator)||void 0===g?void 0:g.getObstructions)||void 0===h?void 0:h.call(g,{successCallback:function(k){gb(k,b,d,a)},failCallback:function(){return J["default"].log("getObstructions failed for new MASH API","ERROR","sbViewability")}});var l=function(k){gb(k.detail,
b,d,a)};d&&(c.addEventListener("obstructionsChanged",l),f(function(){return c.removeEventListener("obstructionsChanged",l)}))})}catch(c){J["default"].log("P.when execution failed to get full obstruction: "+c,"ERROR","sbViewability"),f(null)}})},gb=function(b,a,d,f){var c,e,g=b.isFullyObstructed;b=b.boundingBoxes;la=(null===(c=null===b||void 0===b?void 0:b[0])||void 0===c?void 0:c.height)||0;Ha=(null===(e=null===b||void 0===b?void 0:b[1])||void 0===e?void 0:e.height)||0;eb=g||!1;null===f||void 0===
f?void 0:f(a,d)},ib=function(b,a,d,f,c){d=hb(d,f,window.innerWidth);b=hb(b,a,c);return d*b},dc=function(b,a){var d=b.top,f=b.bottom,c=b.left;b=b.right;var e=T().innerHeight,g=ib(d,f,c,b,Math.max(e,0));if(!V||0>=g)return g;if(eb)return 0;try{a=g/a;var h=ib(d-la,f-la,c,b,Math.max(e-Ha-la,0));.5<=a&&.5>h?v("LossOfImpresionFromNativeObstruction"):v("NoLossOfImpresionFromNativeObstruction");return h}catch(l){return J["default"].log("Error calculating visible area: "+l,"ERROR","sbViewability"),g}},hb=function(b,
a,d){return 0<=b?Math.max(Math.min(d-b,a-b),0):0<a?Math.max(Math.min(Math.min(a,d),a-b),0):0},jb=function(b){var a,d,f=Date.now()-(null===(a=fa[b])||void 0===a?NaN:a.startTimeInView);a=null===(d=fa[b])||void 0===d?void 0:d.percentageViewed;if(f&&a)if(d="/"===b.substr(-1)?b+"v/":b+"/v/",b=JSON.stringify({v:{def:"iab",event:"VIEWED",p:Math.round(100*fa[b].percentageViewed),t:parseFloat((f/1E3).toFixed(3))},programType:"SBC"}),"function"===typeof window.fetch)fetch(d+encodeURI(b),{method:"POST",mode:"no-cors",
headers:{"Content-Type":"application/json"},body:b}).then(function(e){e.ok||0===e.status||J["default"].log(e.status+" "+e.statusText,"ERROR","sbx-ce-vcpm-fetch");v("PixelClientCallSuccess")}).catch(function(e){v("PixelClientCallFailure");J["default"].log(e,"ERROR","sbx-ce-vcpm-fetch")});else{var c=new XMLHttpRequest;c.open("POST",d+encodeURI(b));c.setRequestHeader("Content-Type","application/json");c.onreadystatechange=function(){4===c.readyState&&(200!==c.status?J["default"].log(c.status+" "+c.statusText,
"ERROR","sbx-ce-vcpm-fetch"):v("PixelClientCallSuccess"))};c.onerror=function(){v("PixelClientCallFailure");J["default"].log("XMLHttpRequest error from old browser","ERROR","sbx-ce-vcpm-fetch")};c.send(b)}else f||v("PixelClientCallMissingTimeInView"),a||v("PixelClientCallMissingPercentageInView")},hc=function(){return Promise.all([fc(),ec()]).then(function(b){b=y.__read(b,2);var a=b[1];la=b[0];Ha=a}).catch(function(b){J["default"].log("Error calculating top and bottom bar height: "+b,"ERROR","sbViewability")})},
ic=function(b,a){var d,f=null!==a&&void 0!==a?a:x(),c=null,e=function(){Ja(f,l)},g=void 0;if("mobile-gateway-wd-atf"===(null===f||void 0===f?void 0:f.dataset.slot)){var h=null===(d=x().ownerDocument)||void 0===d?void 0:d.querySelector('div[cel_widget_id="gwm-window-container"]');h&&(g={el:h})}var l=Za(function(){var p=w("data-viewpixel",f);p&&(jb(p),p=x("[data-viewpixel]"),null===p||void 0===p?void 0:p.removeAttribute("data-viewpixel"));k();m();n();c&&c();b.v(null,a)},1E3);kb(f,l).then(function(p){c=
p});var k=ra("scroll",e,g),m=ra("resize",e,g),n=ra("click",e,g);e()},kb=function(b,a){return cc(b).then(function(d){if(d)return gc(b,Ja,a);fb&&"T1"===w("data-vcpmnativetreatment",b)&&hc();return null})},jc=function(b){if(b)for(var a=function(f){var c=b[f];0===f&&kb(c);f=Za(function(){var e=w("data-viewpixel",c);e&&(jb(e),null===c||void 0===c?void 0:c.removeAttribute("data-viewpixel"))},1E3);Ja(c,f)},d=0;d<b.length;d++)a(d)},lb=function(b,a){var d=null,f=null;b.addEventListener("touchstart",function(c){d=
c.touches[0].pageX});b.addEventListener("touchmove",function(c){null===d&&(d=c.touches[0].pageX);f=c.touches[0].pageX});b.addEventListener("touchend",function(){null!==d&&null!==f&&a(f-d);d=f=null})},kc=function(b){if(Pb["default"].isSupported("touch")){var a=x("[data-track-swipe]"),d=x("[data-trackswipe]"),f=function(c){var e=Math.abs(c);if(30<e){var g=C("[data-viewpixel]");jc(g);b.s({direction:0>c?"left":"right",length:e})}};a?lb(a,f):d&&lb(d,f)}},lc=function(b,a){var d=Date.now();a=C("img",a);
var f=a.length,c=0,e=function(){++c===f&&b.vc({delay:Date.now()-d})};a.forEach(function(g){null!==w("data-lazy",g)&&null!==w("data-src",g)?g.addEventListener("load",function(){g.src===g.dataset.src&&e()}):g.complete?e():g.addEventListener("load",e)})},mc=function(b){var a=b.campaignId,d=b.idType,f=b.slotName,c=b.market,e={eventV1:{anonymizedRequestId:b.anonymizedRequestId,campaignId:a,slotName:f,idType:d,market:c,customerId:b.customerId,sessionId:b.sessionId,lob:b.lob},eventV2:{campaignId:a,slotName:f,
idType:d,market:c,joinId:b.joinId}},g=function(h,l,k){try{var m=qa["default"],n=m.event,p=y.__assign({},e[l]);if(k)for(var t in k)Object.prototype.hasOwnProperty.call(k,t)&&(p[t]=k[t]);n.call(m,p,"base-be",Sb[h],{ssd:!0})}catch(r){U(r)}};return{i:g.bind(null,"i","eventV1"),v:g.bind(null,"v","eventV1"),vc:g.bind(null,"vc","eventV1"),c:g.bind(null,"c","eventV1"),s:g.bind(null,"s","eventV1"),ss:g.bind(null,"ss","eventV1"),ia:g.bind(null,"ia","eventV1"),iv2:g.bind(null,"iv2","eventV2"),e:function(h){g("e",
"eventV1",h&&{name:h.name,message:h.message,stack:h.stack})}}},mb=function(b){var a=Yb(b);var d=sa(b).mid;a=mc({anonymizedRequestId:Xb(),campaignId:a,idType:$b(b),slotName:ac(),market:d,customerId:null,sessionId:null,lob:"UNKNOWN",joinId:null});var f=T();d=f.innerWidth;f=f.innerHeight;var c=Fa(b),e=c.width;c=c.height;var g=sa(b).aigen;a.i({asins:[].map.call(C("[data-asin]",b),Ga),creativeType:Aa(),creativeVariation:Ba(b),version:Da(b),viewport:Ea(),weblabs:Ca(b),adWidth:Math.round(e),adHeight:Math.round(c),
viewportWidth:Math.round(d),viewportHeight:Math.round(f),storeBannerUrl:ea("storeBanner",b),customImageUrl:ea("lifestyleImage",b),isAiGen:!!g});Wb(a,b);lc(a,b);ic(a,b);kc(a);f=T();d=f.innerWidth;f=f.innerHeight;c=Fa(b);e=c.width;c=c.height;g=sa(b).aigen;a.ia&&a.ia({asins:[].map.call(C("[data-asin]",b),Ga),creativeType:Aa(),creativeVariation:Ba(b),version:Da(b),viewport:Ea(),weblabs:Ca(b),adIndex:db(b),adId:cb(b),adWidth:Math.round(e),adHeight:Math.round(c),viewportWidth:Math.round(d),viewportHeight:Math.round(f),
storeBannerUrl:ea("storeBanner",b),customImageUrl:ea("lifestyleImage",b),isAiGen:!!g});f=T();d=f.innerWidth;f=f.innerHeight;c=Fa(b);e=c.width;c=c.height;g=sa(b).aigen;a.iv2&&a.iv2({asins:[].map.call(C("[data-asin]",b),Ga),creativeType:Aa(),creativeVariation:Ba(b),version:Da(b),viewport:Ea(),weblabs:Ca(b),adIndex:db(b),adId:cb(b),adWidth:Math.round(e),adHeight:Math.round(c),viewportWidth:Math.round(d),viewportHeight:Math.round(f),storeBannerUrl:ea("storeBanner",b),customImageUrl:ea("lifestyleImage",
b),isAiGen:!!g})},v=function(b,a){void 0===a&&(a=1);qa["default"].count("sbxGwentClient"+b,a)},Q={log:function(b){var a=T();var d=Zb();(a=d&&a.sbxGwentClient&&"number"===typeof a.sbxGwentClient[d]?Date.now()-a.sbxGwentClient[d]:null)?v(b,a):v("NoPageTime")}},nc=function(b){var a=b.url,d=b.onSuccess,f=b.onError;a||f();Qb["default"].get(a,{success:function(c){c&&"ok"===c.status?d(c):f()},error:f,abort:f})},Ka;(Ka||(Ka={})).adFeedbackHandler="adFeedbackHandler";var oc=function(b,a,d,f,c){try{var e=JSON.parse(b),
g=y.__read(e,6),h=g[0],l=g[1],k=g[2],m=g[3],n=g[4],p=g[5],t=[];Array.isArray(h)?h.forEach(function(u){return t.push({campaignId:d,creativeId:u})}):t.push({campaignId:d,creativeId:h});var r={adCreativeMetaData:{adCreativeId:Array.isArray(h)?h[0]:h,adId:a,adImpressionId:l,adNetwork:"aax",adProgramId:1010,adCreativeDetails:t},adPlacementMetaData:{adElementId:k,pageType:m,pageUrl:n,searchTerms:p,slotName:f,adProgramId:1010}};return c+"?pl="+encodeURIComponent(JSON.stringify(r))}catch(u){return null}},
nb=function(b){var a=ya["default"].setup().define,d=!!w("data-ad-feedback-clicks"),f=!!w("data-ad-feedback-simulate"),c=b||"AdFeedbackSuccess",e="AdFeedbackPlaceholderClick",g=!1;d&&a(Ka.adFeedbackHandler,"click",function(){Q.log(e);"AdFeedbackPlaceholderClick"===e&&(g=!0)});b=w("data-ad-feedback");a=w("data-ad-feedback-url")||"/gp/aq-feedback/lazyLoad/handler/af-link-handler.html";if(b){d=w("data-slot");var h=w("data-aid"),l=w("data-cid");b=oc(b,h,l,d,a);nc({url:b,onSuccess:function(k){var m=k.html;
var n=x('[data-id="afb-content"]');n&&m?(n.innerHTML=m,m=n):m=null;if(k=k.script)n=x().ownerDocument.createElement("script"),n.type="text/javascript",n.innerHTML=k,x().appendChild(n);Q.log(c);e="AdFeedbackLinkClick";m&&g&&f&&((k=x("a",m))?(k.click(),k=!0):k=!1,Q.log(k?"AdFeedbackSimulateClickSuccess":"AdFeedbackSimulateClickFail"))},onError:function(){Q.log("AdFeedbackFallback");g&&f&&Q.log("AdFeedbackSimulateClickFail")}})}},ma=function(b,a){var d,f=[];try{for(var c=y.__values(b.split(/[-_]/)),e=
c.next();!e.done;e=c.next()){var g=e.value;f.push(g.charAt(0).toUpperCase()+g.slice(1));if("creativeLevel"===a&&("desktop"===g||"mobile"===g))break}}catch(l){var h={error:l}}finally{try{e&&!e.done&&(d=c.return)&&d.call(c)}finally{if(h)throw h.error;}}return f.join("")},qc=function(b,a,d,f,c,e,g,h,l,k,m){return y.__awaiter(void 0,void 0,void 0,function(){var n,p,t;return y.__generator(this,function(r){switch(r.label){case 0:n=function(){return{adCreativeMetaData:{adCreativeDetails:pc(a,h,l,k,m)},adFeedbackLabelId:b}},
p=function(u){var q=u.baseMessage,z=u.deviceType,A=u.tabletEnv,B=u.slotName;B=y.__read([ma(u.creativeId,"creativeLevel"),ma(B,"slotLevel")],2);u=B[0];B=B[1];v(q);z&&(z=q+"_"+z,A&&(z+="_"+A),v(z));u&&v(q+"_"+u);B&&v(q+"_"+B)},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,d(n)];case 2:return r.sent(),p({baseMessage:"EnableAdFeedbackSuccess",deviceType:f,tabletEnv:c,creativeId:e,slotName:g}),[3,4];case 3:return t=r.sent(),p({baseMessage:"EnableAdFeedbackFailure",deviceType:f,tabletEnv:c,creativeId:e,
slotName:g}),U(t),[3,4];case 4:return[2]}})})},rc=function(b){if(b){var a=b.split(" ");a.map(function(d,f){0<f&&(a[f]=d.substring(3,d.length))});a.pop();a.shift();return a}},pc=function(b,a,d,f,c){var e=[],g=w("data-card-metrics-id")||"",h=w("data-slot")||"";g=y.__read([ma(g,"creativeLevel"),ma(h,"slotLevel")],2);var l=g[0],k=g[1];c&&c()!==b.length&&(b=b.filter(function(m){return x('[data-aid="'+m.adId+'"]')}));b.forEach(function(m,n){var p='[data-aid="'+m.adId+'"]';for(var t=x(p),r=a&&a()||document.body,
u,q=0;(d?q<d.length:0>q)&&!(u=x(p+' div[class*="'+(null===d||void 0===d?void 0:d[q])+'"] img'));q++);u?v("AfImagePresent_"+l):v("AfImageMissing_"+l);p=(null===u||void 0===u?void 0:u.getAttribute("src"))||void 0;q=rc((null===u||void 0===u?void 0:u.getAttribute("srcset"))||void 0);var z=(null===q||void 0===q?void 0:q.length)||1;u=[];for(var A=0;A<z;A++)u.push({url:(null===q||void 0===q?void 0:q[A])||""});p={url:p?p:""};Ta("SelectionSignals",m.selectionSignals,l,k);Ta("AdvertiserIdNS",m.advertiserIdNS,
l,k);if(t){(q=1===b.length||f)||(t=Ya(t),r?((q=x('[data-index="'+n+'"]'))?q=0===q.offsetHeight&&0===q.offsetWidth?!0:!1:(J["default"].log("container Element for ad number "+n+" is not found","WARN","DSA/AdFeedback"),q=!0),q?q=!1:(r=Ya(r),t.left===r.left||t.right===r.right?(q=t.left,(q=q>=r.left&&q<=r.right)||(t=t.right,q=t>=r.left&&t<=r.right),r=q):(q=t.left,(q=q>r.left&&q<r.right)||(t=t.right,q=t>r.left&&t<r.right),r=q),q=r)):q=void 0);if(q){r=e.push;t=m.campaignId;q=m.adId;z=m.title;u={lowResolutionImage:Ua(p),
highResolutionImages:Ua(u)};if(m.selectionSignals){p=m.selectionSignals;switch(p.pastActivity){case "STORE_ONLY":A=1;break;default:A=0}p=y.__assign(y.__assign({},p),{pastActivity:A})}else p=void 0;r.call(e,{campaignId:t,adId:q,adCreativeIndex:n,title:z,adCreativeImage:u,selectionSignals:p,advertiserIdNS:m.advertiserIdNS})}v("adElementPresent_"+l)}else v("adElementMissing"),J["default"].log("adElement is not found: "+JSON.stringify(m),"WARN","DSA/AdFeedback"),v("adElementMissing_"+l)});return e},ob=
function(){C('[data-id="cta"]').forEach(function(b){if(b.parentElement){var a=x('[data-id*="cta-fallback"]',b.parentElement),d=x(".a-truncate",b),f=x(".a-truncate-full",b);d&&f&&(f.clientHeight>d.clientHeight&&a?(a.style.display="block",b.parentElement.removeChild(b)):(a=b.parentElement.getAttribute("aria-hidden"),a&&"false"!==a||(a=b.getAttribute("data-label")||f.innerHTML,b.parentElement.setAttribute("aria-label",a)),(d=x('[data-id*="cta-chevron"]',b))&&!f.hasAttribute("data-chevron")&&(f.setAttribute("data-chevron",
"true"),b=f.innerHTML.split(" "),a=b.pop(),d=d.innerHTML,f.innerHTML="<span>"+b.join(" ")+" </span><span>"+a+"&nbsp;"+d+"</span>")))}})},sc=function(b){var a=w("data-src",b)||"",d=w("data-srcset",b)||"",f=b.cloneNode();f.removeAttribute("data-src");f.removeAttribute("data-srcset");f.removeAttribute("data-lazy");f.srcset=d;f.src=a;b.parentNode&&b.parentNode.insertBefore(f,b);f.onload=function(){b.style.opacity="0";Q.log("LazyLoaded")}},tc=function(){var b=C('[class*="eelModalRoot"]');b&&b.forEach(function(a,
d){var f=w("data-modal-trigger",a),c=w("data-title",a),e=w("data-modal-settings",a);e=JSON.parse(e||"{}");if(f){d="eel-cards-modal-"+d;var g="."+a.className.split(" ")[0],h=Va["default"].create(d,g,{closeButton:(null===e||void 0===e?void 0:e.closeButton)||!1,a11yOpenMessage:c||"Energy Efficiency & Product Fiche",width:(null===e||void 0===e?void 0:e.width)||800});c=va.setup();e=c.define;c=c.attach;h.once("beforeShow",function(){Y["default"].loadDescendantImagesManually(a)});e("modal-handler-"+f,["click"],
function(){h.show()});e("modal-close-handler-"+f,["click"],function(){h.hide()});e=x('[data-mix-operations="modal-handler-'+f+'"]');f=x('[data-mix-operations="modal-close-handler-'+f+'"]');e&&f&&(c("modalHandler",e),c("modalClose",f))}})},uc=function(b){var a=function(f,c){f={$event:{preventDefault:Y["default"].$.noop,stopPropagation:Y["default"].$.noop},$target:f.getContent().find('[data-a-tab-name="'+c+'"]'),data:{name:"energyEfficiencyTabSet"}};Y["default"].trigger("a:declarative:a-tabs:click",
f)},d=function(f,c){var e=f&&f.$event,g=f&&f.data||{},h=g.name;e&&e.preventDefault&&e.preventDefault();e&&e.stopPropagation&&e.stopPropagation();f&&e&&g&&h&&c&&(e=c.get(h),e||(Y["default"].on("a:popover:beforeShow:"+h,function(l){var k,m,n;l.popover&&l.popover.getContent&&(l=l.popover.getContent(),null===(m=null===(k=null===l||void 0===l?void 0:l.find(".a-manually-loaded"))||void 0===k?void 0:k.parent())||void 0===m?void 0:m.css("min-height",null!==(n=g.modalHeight)&&void 0!==n?n:800),Y["default"].loadDescendantImagesManually(l))}),
e=c.create(f.$target,g)),e&&(e.show(),g.activeTabName&&a(e,g.activeTabName)))};b&&b.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",function(f){Y["default"].declarative("card-energy-efficiency-secondary-view","click",function(c){d(c,f)})})},wc=function(){C("span[data-ad-deal-end-time]").forEach(function(b){var a=w("data-ad-deal-end-time",b);b&&null!==a&&vc(b,a)})},vc=function(b,a){var d=Sa.interval(function(){var f=(new Date(a)).getTime(),c=Date.now();c=Math.floor((f-c)/1E3);
if(0>c)clearInterval(d);else{var e=Math.floor(c/60%60);f=Math.floor(c%60);c=("0"+Math.floor(c/3600%24)).slice(-2);e=("0"+e).slice(-2);f=("0"+f).slice(-2);b.innerText=c+":"+e+":"+f}},1E3)},La=function(b,a,d){void 0===d&&(d=za["default"].cardRoot);for(;b&&b!==d;){if(b.matches(a))return b;b=b.parentElement}return(null===b||void 0===b?0:b.matches(a))?b:null},xc=function(){var b=C("[data-sbelementid]");b.length&&b.forEach(function(a){var d=a.dataset.sbelementid;d&&a.addEventListener("click",function(f){var c=
f.target,e=La(c,"a");if(!e)if(d.includes("_asin_")){e=La(c,"[data-asin]");if(!e)return;e=x("a",e);if(La(c,"button[data-mix-operations]")||!e)return}else return;f.preventDefault();f.stopPropagation();f=f.ctrlKey||f.metaKey;var g=new URL(e.href);g.pathname.endsWith("/")||(g.pathname+="/");g.searchParams.set("_encoding","UTF8");g.searchParams.set("ref_",d);c=x("[data-sbqueryparameters]");c=((null===c||void 0===c?void 0:c.dataset)||{}).sbqueryparameters;if(c=void 0===c?null:c)c=function(h){try{var l=
JSON.parse(h);return"object"!==typeof l||null===l?void 0:l}catch(k){U("Error parsing JSON in enableClickTracking",k)}}(c),Object.entries(c||{}).forEach(function(h){var l=y.__read(h,2);h=l[0];l=l[1];h&&l&&(d.includes("_asin_")?["lp_mat_key","lp_query","lp_slot","lp_page_asin","lp_asins"].includes(h)||g.searchParams.set(h,l):g.searchParams.set(h,l))});c=g.toString();f||"_blank"===e.target?window.open(c,"_blank"):window.location.href=c})})},ja=function(b,a){return b.querySelector("[class*="+a+"]")},
yc=function(b,a,d){b=JSON.parse(b);b.adCreativeMetaData=a.adCreativeMetaData;b.feedbackFormContainerId=d;return encodeURI(JSON.stringify(b))},zc=function(b,a,d,f,c){return y.__awaiter(void 0,void 0,void 0,function(){var e,g,h,l,k,m,n;return y.__generator(this,function(p){e="adFeedbackModal_"+b;p=(null===(n=ja(a,"ad-feedback-modal-container"))||void 0===n?void 0:n.className)||"";g="."+a.className+" ."+p.replace(" ",".");l=(h=d().adCreativeMetaData.adCreativeDetails)?h.length:0;k={a11yOpenMessage:c?
c:"",width:Math.max(560,132*l+160),a11yCloseButtonMessage:f};try{return m=Va["default"].create(e,g,k),[2,m]}catch(t){throw L.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+t);}})})},Cc=function(b,a,d,f,c,e){var g="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var h=ja(F["default"].cardRoot,g);b.on("beforeShow",function(){return y.__awaiter(void 0,void 0,void 0,function(){var l;
return y.__generator(this,function(k){switch(k.label){case 0:return l=Ac(b,a,d),[4,b.render(function(m){var n="250px",p=d().adCreativeMetaData.adCreativeDetails;p&&2>p.length&&(n="150px");h.style.marginTop=n;m.innerHTML="";n=m.appendChild;p=document.getElementsByTagName("html")[0].dir;var t=F["default"].createElement("div"),r=F["default"].createElement("div");t.innerHTML=c;"rtl"===p?(t.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
r.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(t.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),r.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
r.appendChild(t);n.call(m,r);n=document.getElementsByTagName("html")[0].dir;p=F["default"].createElement("div");"rtl"===n?p.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):p.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");Bc(h,p,f,l,e);m.appendChild(p)})];case 1:return k.sent(),[2]}})})})},Ac=function(b,a,d){d=d();var f=d.adCreativeMetaData.adCreativeDetails;
null===f||void 0===f?void 0:f.sort(function(c,e){return c.adCreativeIndex<e.adCreativeIndex?-1:1});return yc(a,d,b.id)},Bc=function(b,a,d,f,c){a.appendChild(b);"function"==typeof L.uet&&L.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});Rb["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===d?"en-US":d}},{pl:f,deviceType:"desktop"}).then(function(e){return y.__awaiter(void 0,
void 0,void 0,function(){var g,h,l;return y.__generator(this,function(k){"function"==typeof L.uet&&L.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});L.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);g=F["default"].createElement("div");g.innerHTML=String(e.responseBody);for(h=0;h<g.children.length;++h)l=g.children[h],"SCRIPT"===l.tagName?Ma("script",l,a):"LINK"===l.tagName?Ma("link",l,a):Ma("div",l,a);a.removeChild(b);return[2]})})}).catch(function(){"function"==
typeof L.uet&&L.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});L.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);a.innerHTML=c});"function"==typeof L.uex&&L.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},Ma=function(b,a,d){var f=F["default"].createElement(b);f.innerHTML=a.innerHTML;a.getAttributeNames().forEach(function(c){f.setAttribute(c,a.getAttribute(c)||"")});d.appendChild(f)},pb={},Dc=function(b,a){return y.__awaiter(void 0,
void 0,void 0,function(){var d,f,c,e,g,h,l,k,m,n,p;return y.__generator(this,function(t){d=ja(b,"ad-feedback-primary-link");f=a().adFeedbackLabelId;c=ya["default"].setup();e="open-modal"+f;g=a().adCreativeMetaData.adCreativeDetails;h=b.dataset;l=h.isDsaEnabled;k=h.weblabTreatment;m=h.closeButtonAriaText;n=h.adFeedbackTitle;p=String(l);"undefined"===p&&(p=g&&0<g.length?g[0].selectionSignals?"true":"false":"false");"true"===p&&"T1"!==k&&(p="false");c.attach(e,d);c.define(e,"click",function(){return y.__awaiter(void 0,
void 0,void 0,function(){var r;return y.__generator(this,function(u){switch(u.label){case 0:return(r=pb[f])?[3,2]:[4,zc(f,b,a,m,n)];case 1:r=u.sent();var q=b.dataset,z=q.formHeaderText,A=q.dsaFormHeaderText;Cc(r,q.adFeedbackPayload,a,q.currentLocale,"true"===p?A:z,q.formLoadErrorText);pb[f]=r;u.label=2;case 2:return r.show(),[2]}})})});try{d.addEventListener("keydown",function(r){if(" "===r.key||"Enter"===r.key)r.preventDefault(),d.click()})}catch(r){console.log("Couldnt add keydown event listner")}return[2]})})},
Ec=function(b,a){var d=ya["default"].setup(),f="mouse-enter"+a;a="mouse-leave"+a;var c=ja(b,"ad-feedback-primary-link"),e=ja(b,"ad-feedback-text-desktop"),g=ja(b,"ad-feedback-sprite");d.attach(f,c);d.define(f,"mouseenter",function(){g.style.backgroundPosition="0px -12px";e.style.color="#111111"});d.attach(a,c);d.define(a,"mouseleave",function(){g.style.backgroundPosition="0px 0px";e.style.color="#555"})};(function(b,a,d,f){function c(e){return e instanceof d?e:new d(function(g){g(e)})}return new (d||
(d=Promise))(function(e,g){function h(m){try{k(f.next(m))}catch(n){g(n)}}function l(m){try{k(f["throw"](m))}catch(n){g(n)}}function k(m){m.done?e(m.value):c(m.value).then(h,l)}k((f=f.apply(b,a||[])).next())})});(function(b,a){function d(k){return function(m){return f([k,m])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,k[0]&&(c=0)),c;)try{if(e=1,g&&(h=k[0]&2?g["return"]:k[0]?g["throw"]||((h=g["return"])&&h.call(g),0):g.next)&&!(h=h.call(g,k[1])).done)return h;
if(g=0,h)k=[k[0]&2,h.value];switch(k[0]){case 0:case 1:h=k;break;case 4:return c.label++,{value:k[1],done:!1};case 5:c.label++;g=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(h=c.trys,h=0<h.length&&h[h.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!h||k[1]>h[0]&&k[1]<h[3]))c.label=k[1];else if(6===k[0]&&c.label<h[1])c.label=h[1],h=k;else if(h&&c.label<h[2])c.label=h[2],c.ops.push(k);else{h[2]&&c.ops.pop();c.trys.pop();continue}}k=a.call(b,c)}catch(m){k=
[6,m],g=0}finally{e=h=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},e,g,h,l=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return l.next=d(0),l["throw"]=d(1),l["return"]=d(2),"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l});"VIEWED PROGRESS_5_SEC FIRST_QUARTILE MIDPOINT THIRD_QUARTILE COMPLETE UNMUTE".split(" ");var Na={"basebe.Clicks.6":"basebe.Clicks.6",
"basebe.Impressions.8":"basebe.Impressions.8","basebe.carousel.1":"basebe.carousel.1"};var ta={};ta[Na["basebe.Clicks.6"]]="base-be";ta[Na["basebe.Impressions.8"]]="base-be";ta[Na["basebe.carousel.1"]]="base-be";ta;var Jb={"savx:action":"savx:action","savx:deeplinking":"savx:deeplinking"},Fb={SPARKLE_RELATED_QUESTION:"SPARKLE_RELATED_QUESTION"},Gb={INVOKE_NILE_BACKEND_API:"INVOKE_NILE_BACKEND_API",INVOKE_NILE_BACKEND_API_WITH_ASIN:"INVOKE_NILE_BACKEND_API_WITH_ASIN"},Hb={NileAdsSparkleRelatedQuestion:"NileAdsSparkleRelatedQuestion"},
Ib={SPARKLE_RELATED_QUESTION:"SPARKLE_RELATED_QUESTION"},pa=function(){pa=Object.assign||function(b){for(var a,d=1,f=arguments.length;d<f;d++){a=arguments[d];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c])}return b};return pa.apply(this,arguments)},na=function(b,a,d,f){function c(e){return e instanceof d?e:new d(function(g){g(e)})}return new (d||(d=Promise))(function(e,g){function h(m){try{k(f.next(m))}catch(n){g(n)}}function l(m){try{k(f["throw"](m))}catch(n){g(n)}}function k(m){m.done?
e(m.value):c(m.value).then(h,l)}k((f=f.apply(b,a||[])).next())})},oa=function(b,a){function d(k){return function(m){return f([k,m])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,k[0]&&(c=0)),c;)try{if(e=1,g&&(h=k[0]&2?g["return"]:k[0]?g["throw"]||((h=g["return"])&&h.call(g),0):g.next)&&!(h=h.call(g,k[1])).done)return h;if(g=0,h)k=[k[0]&2,h.value];switch(k[0]){case 0:case 1:h=k;break;case 4:return c.label++,{value:k[1],done:!1};case 5:c.label++;g=k[1];k=[0];
continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(h=c.trys,h=0<h.length&&h[h.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!h||k[1]>h[0]&&k[1]<h[3]))c.label=k[1];else if(6===k[0]&&c.label<h[1])c.label=h[1],h=k;else if(h&&c.label<h[2])c.label=h[2],c.ops.push(k);else{h[2]&&c.ops.pop();c.trys.pop();continue}}k=a.call(b,c)}catch(m){k=[6,m],g=0}finally{e=h=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},
trys:[],ops:[]},e,g,h,l=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return l.next=d(0),l["throw"]=d(1),l["return"]=d(2),"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},Db=function(b,a,d,f){function c(e){return e instanceof d?e:new d(function(g){g(e)})}return new (d||(d=Promise))(function(e,g){function h(m){try{k(f.next(m))}catch(n){g(n)}}function l(m){try{k(f["throw"](m))}catch(n){g(n)}}function k(m){m.done?e(m.value):c(m.value).then(h,l)}k((f=
f.apply(b,a||[])).next())})},Eb=function(b,a){function d(k){return function(m){return f([k,m])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,k[0]&&(c=0)),c;)try{if(e=1,g&&(h=k[0]&2?g["return"]:k[0]?g["throw"]||((h=g["return"])&&h.call(g),0):g.next)&&!(h=h.call(g,k[1])).done)return h;if(g=0,h)k=[k[0]&2,h.value];switch(k[0]){case 0:case 1:h=k;break;case 4:return c.label++,{value:k[1],done:!1};case 5:c.label++;g=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();
continue;default:if(!(h=c.trys,h=0<h.length&&h[h.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!h||k[1]>h[0]&&k[1]<h[3]))c.label=k[1];else if(6===k[0]&&c.label<h[1])c.label=h[1],h=k;else if(h&&c.label<h[2])c.label=h[2],c.ops.push(k);else{h[2]&&c.ops.pop();c.trys.pop();continue}}k=a.call(b,c)}catch(m){k=[6,m],g=0}finally{e=h=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},e,g,h,l=Object.create(("function"===
typeof Iterator?Iterator:Object).prototype);return l.next=d(0),l["throw"]=d(1),l["return"]=d(2),"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},Fc=function(){return function(){}}(),Gc=function(){function b(){}b.prototype.logNexusEvent=function(a,d,f,c){var e,g=null===(e=this.getWindow().ue)||void 0===e?void 0:e.event;g?g(a,d,f,c):this.log("unable to log nexus event due to no window.ue!","ERROR")};b.prototype.logCount=function(a,d,f){var c,e=null===(c=this.getWindow().ue)||
void 0===c?void 0:c.count;if(e)return e(a,d,f);this.log("unable to log count due to no window.ue!","ERROR")};b.prototype.getWidgetDimensions=function(){var a,d,f=this.getWindow(),c=f.innerWidth;f=f.innerHeight;var e=null!==(d=null===(a=this.getElement())||void 0===a?void 0:a.getBoundingClientRect())&&void 0!==d?d:{};a=e.width;d=e.height;return{width:void 0===a?0:a,height:void 0===d?0:d,viewportWidth:c,viewportHeight:f}};return b}(),Hc=function(){function b(a){var d=this;this.eventSequence=this.dictionaryIndex=
this.batchSize=0;this.eventsDictionary={};this.eventsQueue=[];this.highPriorityFlushInterval=1E3;this.lowPriorityFlushInterval=1E4;this.reverseEventsDictionary={};this.currentlyFlushing=!1;this.endpoint=a.endpoint;this.strategy=a.strategy;a=this.strategy.getWindow();a.addEventListener("beforeunload",function(){return d.beforeUnload()});a.addEventListener("blur",function(){return d.beforeUnload()});a.addEventListener("pagehide",function(){return d.beforeUnload()});this.strategy.getDocument().addEventListener("visibilitychange",
function(){return d.beforeUnload()});if(a.app){var f=a.app.willDisappear;a.app.willDisappear=function(){f&&f();d.beforeUnload()}}}b.prototype.flush=function(a){var d,f;void 0===a&&(a=!1);this.currentlyFlushing||(this.currentlyFlushing=!0,null!==(f=null===(d=this.eventsQueue)||void 0===d?void 0:d.length)&&void 0!==f&&f&&(a||this.strategy.getWindow().navigator.onLine?(a=JSON.stringify({cs:{dct:this.reverseEventsDictionary},events:this.eventsQueue}),this.send(a),this.dictionaryIndex=this.batchSize=0,
this.eventsDictionary={},this.eventsQueue=[],this.reverseEventsDictionary={},this.highPriorityTimer&&(clearInterval(this.highPriorityTimer),this.highPriorityTimer=0),this.lowPriorityTimer&&(clearInterval(this.lowPriorityTimer),this.lowPriorityTimer=0)):this.strategy.log("Unable to flush due to not forced and not online","WARN")),this.currentlyFlushing=!1)};b.prototype.queueEvent=function(a,d){var f=this,c;void 0===d&&(d={highPriority:!0});this.eventSequence+=1;if(1E3<this.eventSequence)return this.strategy.log("Sushi client max calls reached",
"WARN"),!1;if(!a||Array.isArray(a)||"object"!==typeof a)return this.strategy.log("Invalid data passed to SushiClient queueEvent","WARN"),!1;a.timestamp=this.getCurrentIsoString();a.sequence=this.eventSequence;a.messageId=[null!==(c=a.request_id)&&void 0!==c?c:"undefined",Date.now?Date.now():(new Date).getTime(),this.eventSequence].join("-");try{var e=JSON.stringify(a)}catch(g){return this.strategy.log(g instanceof Error?g:"unable to stringify event data!","ERROR"),!1}c=e.length;(499===this.eventsQueue.length||
524288<this.batchSize+c)&&this.flush(!0);this.batchSize+=c;a={data:this.compressData(a)};this.eventsQueue.push(a);d.highPriority?0===this.highPriorityFlushInterval?this.flush():this.highPriorityTimer||(this.highPriorityTimer=setTimeout(function(){return f.flush()},this.highPriorityFlushInterval,this,!1)):this.lowPriorityTimer||(this.lowPriorityTimer=setTimeout(function(){return f.flush()},this.lowPriorityFlushInterval,this,!1));return!0};b.prototype.beforeUnload=function(){this.flush()};b.prototype.compressData=
function(a){var d=this;if(!a||!this.isEncodable(a))return a;if(Array.isArray(a))return a.map(function(c){return d.compressData(c)});if("object"===typeof a){var f={};Object.entries(a).forEach(function(c){var e=c[0];c=c[1];f[d.encodeValue(e)]=["messageId","timestamp"].includes(e)?c:d.compressData(c)});return f}switch(typeof a){case "number":case "string":case "symbol":return this.encodeValue(a);default:return this.encodeValue("".concat(a))}};b.prototype.isEncodable=function(a){if(!a||"function"===typeof a)return!1;
switch(typeof a){case "boolean":return!1;case "number":return this.isEncodableNumber(a);case "string":return this.isEncodableString(a);default:return!0}};b.prototype.isEncodableNumber=function(a){return!(isNaN(a)||Infinity===a)&&this.isEncodableString(a.toString())};b.prototype.isEncodableString=function(a){return a.length>("#"+this.dictionaryIndex).length||"#"===a.charAt(0)};b.prototype.encodeValue=function(a){if(this.eventsDictionary[a])return this.eventsDictionary[a];this.dictionaryIndex+=1;var d=
"".concat("#").concat(this.dictionaryIndex);this.eventsDictionary[a]=d;this.reverseEventsDictionary[d]=a;return d};b.prototype.getCurrentIsoString=function(){var a=new Date;try{return a.toISOString()}catch(d){return"".concat(a.getFullYear(),"-").concat("".concat(a.getMonth()+1).padStart(2,"0"),"-").concat("".concat(a.getDate()).padStart(2,"0"),"T").concat("".concat(a.getUTCHours()).padStart(2,"0"),":").concat(a.getUTCMinutes(),":").concat(a.getUTCSeconds(),".").concat(String((a.getUTCMilliseconds()/
1E3).toFixed(3)).slice(2,5),"Z")}};b.prototype.send=function(a){var d;if(!a||"string"!==typeof a)throw Error('invalid payload "'.concat(a,'"!'));var f=this.strategy.getWindow();if(!((null===(d=f.navigator)||void 0===d?0:d.sendBeacon)&&f.navigator.sendBeacon(this.endpoint,a))){if(f.XDomainRequest)d=new f.XDomainRequest,d.onerror=function(){},d.ontimeout=function(){},d.onprogress=function(){},d.onload=function(){},d.timeout=0;else if(f.XMLHttpRequest){if(d=new f.XMLHttpRequest,!("withCredentials"in
d))throw Error("request missing withCredentials!");}else throw Error("unable to construct AJAX request due to no XDomainRequest or XMLHttpRequest!");d.open("POST",this.endpoint,!0);d.setRequestHeader&&d.setRequestHeader("Content-Type","text/plain");d.send(a)}};return b}(),Ic=function(){var b=function(a,d){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(f[e]=c[e])};return b(a,d)};return function(a,
d){function f(){this.constructor=a}if("function"!==typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");b(a,d);a.prototype=null===d?Object.create(d):(f.prototype=d.prototype,new f)}}(),da=function(){da=Object.assign||function(b){for(var a,d=1,f=arguments.length;d<f;d++){a=arguments[d];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c])}return b};return da.apply(this,arguments)},Oa=function(b,a,d,f){function c(e){return e instanceof
d?e:new d(function(g){g(e)})}return new (d||(d=Promise))(function(e,g){function h(m){try{k(f.next(m))}catch(n){g(n)}}function l(m){try{k(f["throw"](m))}catch(n){g(n)}}function k(m){m.done?e(m.value):c(m.value).then(h,l)}k((f=f.apply(b,a||[])).next())})},Pa=function(b,a){function d(k){return function(m){return f([k,m])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,k[0]&&(c=0)),c;)try{if(e=1,g&&(h=k[0]&2?g["return"]:k[0]?g["throw"]||((h=g["return"])&&h.call(g),
0):g.next)&&!(h=h.call(g,k[1])).done)return h;if(g=0,h)k=[k[0]&2,h.value];switch(k[0]){case 0:case 1:h=k;break;case 4:return c.label++,{value:k[1],done:!1};case 5:c.label++;g=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(h=c.trys,h=0<h.length&&h[h.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!h||k[1]>h[0]&&k[1]<h[3]))c.label=k[1];else if(6===k[0]&&c.label<h[1])c.label=h[1],h=k;else if(h&&c.label<h[2])c.label=h[2],c.ops.push(k);else{h[2]&&c.ops.pop();c.trys.pop();
continue}}k=a.call(b,c)}catch(m){k=[6,m],g=0}finally{e=h=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},e,g,h,l=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return l.next=d(0),l["throw"]=d(1),l["return"]=d(2),"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},Jc={shouldLogViewMetrics:!1},Kc=function(b){function a(d){var f,c,e,g=b.call(this)||this;g.metricsSequenceNumber=
0;g.strategy=d.strategy;g.instrumentationPixelUrl=null!==(f=d.instrumentationPixelUrl)&&void 0!==f?f:"";g.metricsOptions=da(da({},Jc),d.metricsOptions);g.defaultAttributes=Object.assign({},g.getDefaultAttributes());g.getDeviceMetrics();if(d.sushiClient)g.sushiClient=d.sushiClient;else{var h;d=g.strategy;var l;f=null===(l=d.getElement('[data-attributelevel="CAMPAIGN"]'))||void 0===l?void 0:l.getAttribute("data-marketplaceid");if(!f)throw Error("unable to get marketplace!");a:switch(f){case "ATVPDKIKX0DER":case "A2EUQ1WTGCTBG2":case "A1AM78C64UM0Y8":case "A3P3J5A7D2ZVXI":case "A2Q3Y263D00KWC":case "AZXD3QD5B39HD":case "A1ZXRLSQW2V54D":case "A1NOHO22DE3OHQ":case "A2WDZJZ5TCRMLH":case "A2IDBVIE7EAGN4":l=
"NA";break a;case "A1F83G8C2ARO7P":case "A1PA6795UKMFR9":case "A13V1IB3VIYZZH":case "APJ6JRA9NG5V4":case "A3HOBANJMCMD83":case "A1RKKUPIHCS9HS":case "AJZF8LZ1EJVJN":case "ARBP9OOSHTCHU":case "AUJPM9XGFJRC7":case "A21TJRUUN4KGV":case "A2XZLSVIQ0F4JT":case "A1805IZSGTT6HS":case "A1M3WC0SJ3A38T":case "A2VIGQ35RCS4UG":case "A34GYYCZVDBSIK":case "A17E79C6D8DWNP":case "A1MQPSGJ6U9Q54":case "A33AVAJ2PDY3EV":case "A3CQBQD3RGPJR8":case "A1C3SOZRARQ6R3":case "AKY4K4WKH21YQ":case "A2NODRKZP88ZB9":case "AT614YYYNOC1S":case "AMEN7PMS3EDWL":case "A1YFOMBPFBRY22":case "A3OCL2LJ6GDH9T":case "A3PJZM0QIA8QDU":case "AE08WJ6YKNBMC":case "A3TFQ1G9L8TQ5L":case "A28R8C7NBKEWEA":case "AQGJ466SKA0F0":l=
"EU";break a;case "A1VC38T7YXB528":case "A39IBJ37TRP1C6":case "A1RNPCQ4K8U27I":case "A19VAU5U5O7RUS":case "A1DQ6JV7I20JSG":case "AD2EMQ3L3PG8S":case "A38NPJYVS5YHNH":case "AAHKV2X7AFYLW":l="FE";break a;default:throw Error();}d=null===(h=d.getWindow().location)||void 0===h?void 0:h.hostname;h=["localhost","mix.corp.amazon.com","development.amazon.com"].includes(d)||/^[a-z]{2}-development\.amazon\.com$/.test(d)?"beta":/^pre-prod\.amazon\.(com|[a-z]{2})$/.test(d)||/^pre-prod\.amazon\.com?\.[a-z]{2}$/.test(d)||
/^[a-z]{2}-pre-prod\.amazon\.com$/.test(d)?"gamma":"prod";h="https://unagi-".concat(l.toLowerCase(),".amazon.com/1/events/com.amazon.eel.sbv.client.").concat(h,".").concat("NA"===l?"events":l.toLowerCase());g.sushiClient=new Hc({endpoint:h,strategy:g.strategy})}if(g.metricsOptions.shouldLogViewMetrics){g.instrumentationPixelUrl||(g.instrumentationPixelUrl=null!==(e=null===(c=g.strategy.getElement("[data-instrumentationpixelurl]"))||void 0===c?void 0:c.dataset.instrumentationpixelurl)&&void 0!==e?
e:"");if(!g.instrumentationPixelUrl)throw Error("No instrumentation pixel url found for view metrics");g.instrumentationPixelUrl=g.instrumentationPixelUrl.endsWith("/")?g.instrumentationPixelUrl.concat("v/"):g.instrumentationPixelUrl.concat("/v/")}return g}Ic(a,b);a.prototype.logEvent=function(d,f){return Oa(this,void 0,void 0,function(){var c,e,g,h;return Pa(this,function(l){this.metricsSequenceNumber+=1;c=null===(h=null===(g=this.strategy.getWindow().navigator)||void 0===g?void 0:g.connection)||
void 0===h?void 0:h.type;e=da(da(da(da({},this.strategy.getWidgetDimensions()),this.defaultAttributes),null!==f&&void 0!==f?f:{}),{eventType:d,metricsSequenceNumber:this.metricsSequenceNumber,networkType:c});this.sushiClient.queueEvent(e);return[2]})})};a.prototype.logViewMetric=function(d,f){return Oa(this,void 0,void 0,function(){var c,e,g,h,l;return Pa(this,function(k){switch(k.label){case 0:if(!this.metricsOptions.shouldLogViewMetrics)return this.strategy.log("View metrics logging is disabled, skipping logging for event ".concat(d),
"WARN"),[2];c=JSON.stringify(f);k.label=1;case 1:k.trys.push([1,3,,4]);e=this.instrumentationPixelUrl+encodeURI(c);if(!e)throw this.logEvent("ViewMetricsPostFailure",{viewMetricsFailure:d}),Error("No url found for view metrics post");return[4,fetch(e,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:c}).then(function(m){if(!m.ok&&0!==m.status)throw Error(m.status+" "+m.statusText);})];case 2:return k.sent(),[3,4];case 3:return g=k.sent(),this.logEvent("ViewMetricsPostFailure",
{viewMetricsFailure:d,errorMessage:null!==(h=g.message)&&void 0!==h?h:String(g)}),this.strategy.log("view metrics post failure: ".concat(null!==(l=g.message)&&void 0!==l?l:String(g)),"ERROR"),[3,4];case 4:return[2]}})})};a.prototype.getDeviceMetrics=function(){return Oa(this,void 0,void 0,function(){var d=this;return Pa(this,function(f){return wa(this.strategy)?[2,new Promise(function(c){P.when("A").execute(function(e){d.defaultAttributes.deviceEnv=e.capabilities.isAmazonApp?"app":"web";d.defaultAttributes.deviceType=
e.capabilities.mobile?"mobile":e.capabilities.tablet?"tablet":"desktop";d.defaultAttributes.deviceOs="unrecognized";"desktop"!==d.defaultAttributes.deviceType&&(d.defaultAttributes.deviceOs=e.capabilities.android?"android":e.capabilities.ios?"ios":d.defaultAttributes.deviceOs,"unrecognized"===d.defaultAttributes.deviceOs&&["motorola edge","Moto"].forEach(function(g){navigator.userAgent.includes(g)&&(d.defaultAttributes.deviceOs="android")}));c()})})]:[2]})})};a.prototype.getDefaultAttributes=function(){var d=
this.strategy.getElement('[data-attributelevel="CAMPAIGN"]');if(d){var f=d.dataset;d=f.clientid;var c=f.language,e=f.marketplaceid,g=f.pagenumber,h=f.pagetype,l=f.requestid,k=f.searchquery,m=f.stage,n=f.templatename,p=f.videoorientation,t=f.weblabs,r=f.widgetgroupid;f=f.widgettype;return{deviceEnv:"",deviceOs:"",deviceType:"",clientId:void 0===d?"":d,language:void 0===c?"":c,marketplaceId:void 0===e?"":e,pageNumber:void 0===g?"":g,pageType:void 0===h?"":h,requestId:void 0===l?"":l,searchQuery:void 0===
k?"":k,stage:void 0===m?"":m,templateName:void 0===n?"":n,videoOrientation:void 0===p?"":p,weblabs:void 0===t?"":t,widgetGroupId:void 0===r?"":r,widgetType:void 0===f?"":f}}};return a}(Fc),S=function(){S=Object.assign||function(b){for(var a,d=1,f=arguments.length;d<f;d++){a=arguments[d];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c])}return b};return S.apply(this,arguments)},Lc=function(b,a,d,f){function c(e){return e instanceof d?e:new d(function(g){g(e)})}return new (d||(d=
Promise))(function(e,g){function h(m){try{k(f.next(m))}catch(n){g(n)}}function l(m){try{k(f["throw"](m))}catch(n){g(n)}}function k(m){m.done?e(m.value):c(m.value).then(h,l)}k((f=f.apply(b,a||[])).next())})},Mc=function(b,a){function d(k){return function(m){return f([k,m])}}function f(k){if(e)throw new TypeError("Generator is already executing.");for(;l&&(l=0,k[0]&&(c=0)),c;)try{if(e=1,g&&(h=k[0]&2?g["return"]:k[0]?g["throw"]||((h=g["return"])&&h.call(g),0):g.next)&&!(h=h.call(g,k[1])).done)return h;
if(g=0,h)k=[k[0]&2,h.value];switch(k[0]){case 0:case 1:h=k;break;case 4:return c.label++,{value:k[1],done:!1};case 5:c.label++;g=k[1];k=[0];continue;case 7:k=c.ops.pop();c.trys.pop();continue;default:if(!(h=c.trys,h=0<h.length&&h[h.length-1])&&(6===k[0]||2===k[0])){c=0;continue}if(3===k[0]&&(!h||k[1]>h[0]&&k[1]<h[3]))c.label=k[1];else if(6===k[0]&&c.label<h[1])c.label=h[1],h=k;else if(h&&c.label<h[2])c.label=h[2],c.ops.push(k);else{h[2]&&c.ops.pop();c.trys.pop();continue}}k=a.call(b,c)}catch(m){k=
[6,m],g=0}finally{e=h=0}if(k[0]&5)throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},e,g,h,l=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return l.next=d(0),l["throw"]=d(1),l["return"]=d(2),"function"===typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},Nc=function(b,a,d){if(d||2===arguments.length)for(var f=0,c=a.length,e;f<c;f++)!e&&f in a||(e||(e=Array.prototype.slice.call(a,0,
f)),e[f]=a[f]);return b.concat(e||Array.prototype.slice.call(a))},Z,aa,Oc=(Z={},Z.VIEWED=!1,Z.PROGRESS_5_SEC=!1,Z.FIRST_QUARTILE=!1,Z.MIDPOINT=!1,Z.THIRD_QUARTILE=!1,Z.COMPLETE=!1,Z.UNMUTE=!1,Z),qb=(aa={},aa.VIEWED="ViewMetricsAdUnitViewed",aa.PROGRESS_5_SEC="ViewMetricsVideoProgressFiveSeconds",aa.FIRST_QUARTILE="ViewMetricsVideoFirstQuartile",aa.MIDPOINT="ViewMetricsVideoMidpoint",aa.THIRD_QUARTILE="ViewMetricsVideoThirdQuartile",aa.COMPLETE="ViewMetricsVideoComplete",aa.UNMUTE="ViewMetricsVideoUnmute",
aa),Pc=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Qc=function(){return function(b){var a=this,d,f,c;this.initializeCaptions=function(){var e,g,h=null===(e=a.videoElement.textTracks)||void 0===e?void 0:e[0];a.ccText=a._strategy.getElement('[data-daretype="ccText"]');e="true"===a.videoElement.dataset.isVerticalVideo;h&&a.ccText&&(h.mode="hidden",e?null===(g=a.videoElement.querySelector("track"))||void 0===g?void 0:g.addEventListener("load",function(){var l=a.generateNewTextTrack(h);l&&l.addEventListener("cuechange",
function(){var k=l.activeCues;k&&0<k.length&&(a.ccText.innerHTML=k[0].text)})}):h.addEventListener("cuechange",function(){var l=h.activeCues;l&&0<l.length&&(a.ccText.innerHTML=l[0].text)}))};this.videoOnCanPlayEvent=function(){if(!a.assetLoaded){var e=a.getDateTime()-a.loadStartTime;a.metricsManager.logEvent("VideoReadyForPlayback",{loadTimeMs:e,retryCount:a.retryLoadCount,percentDownloaded:a.getPercentDownloaded(),videoTotalLengthMs:a.getDurationMs()});a.assetLoaded=!0}};this.videoOnErrorEvent=function(){!a.assetLoaded&&
3>a.retryLoadCount?(a.retryLoadCount++,setTimeout(a.videoElement.load.bind(a.videoElement),2E3)):a.handleVideoPlaybackFailureEvent()};this.getVideoMetricAttributes=function(){return{videoCurrentTimeMs:a.getCurrentTimeMs(),percentDownloaded:a.getPercentDownloaded(),droppedFrames:a.getDroppedFrames(),adUnitPercentageInView:a.adUnitPercentageInView}};this.handleFirstFramePlayedEvent=function(){if(!a.firstFramePlayed&&!a.firstInterrupt&&a.initiatedPlayTime){var e=a.getDateTime()-a.initiatedPlayTime;a.metricsManager.logEvent("TimeToFirstFrame",
{percentDownloaded:a.getPercentDownloaded(),droppedFrames:a.getDroppedFrames(),loadTimeMs:e});a.firstFramePlayed=!0;a.clientInitiatedStartTime&&(e=a.getDateTime()-a.clientInitiatedStartTime,a.metricsManager.logEvent("ClientLoadToFirstFrame",{percentDownloaded:a.getPercentDownloaded(),droppedFrames:a.getDroppedFrames(),loadTimeMs:e}))}};this.handleFirstInterrupt=function(){if(!a.firstFramePlayed&&!a.firstInterrupt&&a.initiatedPlayTime){var e=a.getDateTime()-a.initiatedPlayTime;a.metricsManager.logEvent("TimeToFirstInterrupt",
{percentDownloaded:a.getPercentDownloaded(),droppedFrames:a.getDroppedFrames(),loadTimeMs:e});a.firstInterrupt=!0}};this.videoOnPlayingEvent=function(){a.handleFirstFramePlayedEvent();"buffering"===a.playbackState&&(a.bufferStartTimeMs=0,a.metricsManager.logEvent("VideoBufferingEnded",S({},a.getVideoMetricAttributes())));"ended"!==a.playbackState&&a.metricsManager.logEvent("VideoPlaybackStarted",S({},a.getVideoMetricAttributes()));a.playbackState="playing"};this.videoOnPauseEvent=function(){a.videoElement.currentTime!==
a.videoElement.duration&&(a.playbackState="paused",a.metricsManager.logEvent("VideoPaused",S({},a.getVideoMetricAttributes())))};this.videoOnEndedEvent=function(){return Lc(a,void 0,void 0,function(){return Mc(this,function(e){switch(e.label){case 0:return this.playbackState="ended",this.ccText&&(this.ccText.innerHTML=""),this.accrueContinuousPlaybackDuration(this.getDurationMs()),this.metricsManager.logEvent("PlaybackCompleted",S(S({},this.getVideoMetricAttributes()),{percentDownloaded:void 0})),
this.emitViewMetric("COMPLETE"),this.videoElement.dataset.disableLooping&&"false"!==this.videoElement.dataset.disableLooping?[3,2]:[4,this.playInternal()];case 1:e.sent(),e.label=2;case 2:return[2]}})})};this.videoOnWaitingEvent=function(){a.playbackState="buffering";a.bufferStartTimeMs=a.getCurrentTimeMs();a.metricsManager.logEvent("VideoBufferingStarted",S({},a.getVideoMetricAttributes()))};this.videoOnTimeUpdateEvent=function(){var e=a.getCurrentTimeMs(),g=a.getDurationMs(),h=a.getContinuousPlaybackDurationMs();
h=a.calculateVideoDurationTotalMsRelativeToAdUnit(h);a.lastOnTimeUpdateCurrentTimeMs=e;2E3<=h&&(h={p:Math.round(a.adUnitPercentageInView),t:parseFloat((h/1E3).toFixed(3))},a.emitViewMetric("VIEWED",h));5E3<=e&&a.emitViewMetric("PROGRESS_5_SEC");e>=.25*g&&a.emitViewMetric("FIRST_QUARTILE");e>=.5*g&&a.emitViewMetric("MIDPOINT");e>=.75*g&&a.emitViewMetric("THIRD_QUARTILE")};this.videoOnAbortEvent=function(){a.metricsManager.logEvent("VideoAborted",{videoCurrentTimeMs:a.getCurrentTimeMs()})};this.videoOnLoadStartEvent=
function(){a.navBackLoadPending=!1};this.handleVideoPlaybackFailureEvent=function(){if(a.videoElement.error){var e=a.videoElement.error,g=e.message;e=a.translateVideoErrorCode(e.code);a.metricsManager.logEvent("VideoPlaybackFailure",{videoCurrentTimeMs:a.getCurrentTimeMs(),errorCode:e,errorMessage:g});a._strategy.log("video playback failure: ".concat(e," ").concat(g),"ERROR")}};this.translateVideoErrorCode=function(e){switch(e){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";
case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"UNKNOWN"}};this.emitViewMetric=function(e,g){void 0===g&&(g=void 0);a.shouldLogViewMetrics&&!a.emittedViewMetrics[e]&&(g={v:S(S({},g),{def:"iab",event:e}),programType:"SBV"},qb[e]&&a.metricsManager.logEvent(qb[e]),a.metricsManager.logViewMetric(e,g),a.emittedViewMetrics[e]=!0)};this.calculateVideoDurationTotalMsRelativeToAdUnit=function(e){a.isAdUnitInView()?a.videoDurationTotalMsWhenAdInViewFirst=e-a.videoDurationStartTimeMsWhenAdInViewFirst:
(a.videoDurationTotalMsWhenAdInViewFirst=0,a.videoDurationStartTimeMsWhenAdInViewFirst=e);return a.videoDurationTotalMsWhenAdInViewFirst};this.isAdUnitInView=function(){return 50<=a.adUnitPercentageInView};this.pause=function(){a.firstFramePlayed||a.firstInterrupt||!a.initiatedPlayTime||a.handleFirstInterrupt();"paused"!==a.playbackState&&"playing"===a.playbackState&&(a.playbackState="paused",a.videoElement.pause())};this.play=function(e){a.initiatedPlayTime||(a.initiatedPlayTime=e);return"playing"!==
a.playbackState&&a.videoElement.paused?(e=a.playInternal())?e:Promise.reject("NotSupported"):Promise.resolve()};this.playInternal=function(){return a.videoElement.play()};this.getPercentDownloaded=function(){var e=a.videoElement.buffered;if(!e)return 0;for(var g=0,h=0;h<e.length;h++)g+=e.end(h)-e.start(h);return g/a.videoElement.duration};this.load=function(){a.videoElement.load()};this.isNavBackLoadPending=function(){return a.navBackLoadPending};this.attachLoadStartCallback=function(e){a.videoElement.addEventListener("loadstart",
function(){return e()},{once:!0})};this.mute=function(){a.videoElement.muted=!0};this.unmute=function(){a.videoElement.muted=!1};this.isMuted=function(){return a.videoElement.muted};this.getCaptionLanguage=function(){var e;return null!==(e=a.videoElement.textTracks[0].language)&&void 0!==e?e:"No Language Given"};this.getDateTime=function(){return Date.now()};this.seekToStart=function(){a.lastOnTimeUpdateCurrentTimeMs=0;a.videoElement.currentTime=0;a.ccText&&(a.ccText.innerHTML="")};this.generateNewTextTrack=
function(e){if(!e||!e.cues||0===e.cues.length)return null;var g=a.videoElement.addTextTrack("captions"),h=e.cues;e=function(k){var m=h[k];k=m.startTime;var n=m.endTime;m=m.text.trim();var p=m.split(" "),t=m.length-p.length,r=n-k,u=k,q=[];p.forEach(function(z){var A=q.join(" ");if(32<A.length+z.length){var B=u+(A.length-q.length+1)/t*r;g.addCue(new VTTCue(u,B,A));u=B;q=[]}q.push(z)});0<q.length&&g.addCue(new VTTCue(u,n,q.join(" ")))};for(var l=0;l<h.length;l++)e(l);g.mode="hidden";return g};this.getCurrentTimeMs=
function(){return Math.round(1E3*a.videoElement.currentTime)};this.getDurationMs=function(){return Math.round(1E3*a.videoElement.duration)};this.getDroppedFrames=function(){return a.videoElement.getVideoPlaybackQuality?a.videoElement.getVideoPlaybackQuality().droppedVideoFrames:void 0!==a.videoElement.webkitDroppedFrameCount?a.videoElement.webkitDroppedFrameCount:-1};this.getContinuousPlaybackDurationMs=function(){return a.continuousDurationAccruedPlayTimeMs+(a.getCurrentTimeMs()-a.continuousDurationStartTimeMs)};
this.setAdUnitViewabilityPercentage=function(e){void 0===e&&(e=0);a.adUnitPercentageInView=e};this.resetContinuousPlaybackDurationMs=function(){var e=a.getCurrentTimeMs();a.continuousDurationAccruedPlayTimeMs=0;e===a.getDurationMs()?a.continuousDurationStartTimeMs=0:a.continuousDurationStartTimeMs=e};this.accrueContinuousPlaybackDuration=function(e){a.continuousDurationAccruedPlayTimeMs+=e-a.continuousDurationStartTimeMs;a.continuousDurationStartTimeMs=0};this.hasSrcAttr=function(){return a.videoElement.hasAttribute("src")};
this.loadVideoOnBrowserVisible=function(){var e=a.videoElement.dataset.videoSource;!a.videoElement.src&&e&&(a.videoElement.src=e,a.navBackLoadPending=!0,a.load(),a.metricsManager.logEvent("VideoLoadedOnBrowserVisible"))};this.clear=function(){a.videoElement.dataset.videoSource=a.videoElement.src;a.videoElement.removeAttribute("src");a.load();a.metricsManager.logEvent("VideoClearedOnBrowserHidden")};this._strategy=b.strategy;this.videoElement=b.el;this.metricsOptions=b.metricsOptions;this.clientInitiatedStartTime=
b.clientInitiatedStartTime;this.clientExecutionMode=b.clientExecutionMode;this.shouldLogViewMetrics=null!==(f=null===(d=b.metricsOptions)||void 0===d?void 0:d.shouldLogViewMetrics)&&void 0!==f?f:!1;this.ccText=null;this.firstInterrupt=!1;this.metricsManager=null!==(c=b.metricsManager)&&void 0!==c?c:new Kc({strategy:this._strategy,metricsOptions:this.metricsOptions});this.metricsManager.logEvent("AceVideoResponseReceived",{numberOfAds:1,clientExecutionMode:this.clientExecutionMode});this.emittedViewMetrics=
S({},Oc);this.playbackState="initiated";this.loadStartTime=this.getDateTime();this.navBackLoadPending=this.firstFramePlayed=this.assetLoaded=!1;this.videoDurationStartTimeMsWhenAdInViewFirst=this.videoDurationTotalMsWhenAdInViewFirst=this.lastOnTimeUpdateCurrentTimeMs=this.continuousDurationAccruedPlayTimeMs=this.continuousDurationStartTimeMs=this.bufferStartTimeMs=this.adUnitPercentageInView=this.retryLoadCount=0;this.videoElement.oncanplay=this.videoOnCanPlayEvent;this.videoElement.onerror=this.videoOnErrorEvent;
this.videoElement.onplaying=this.videoOnPlayingEvent;this.videoElement.onpause=this.videoOnPauseEvent;this.videoElement.onended=this.videoOnEndedEvent;this.videoElement.onwaiting=this.videoOnWaitingEvent;this.videoElement.ontimeupdate=this.videoOnTimeUpdateEvent;this.videoElement.onabort=this.videoOnAbortEvent;this.videoElement.onloadstart=this.videoOnLoadStartEvent;4===this.videoElement.readyState&&(this.metricsManager.logEvent("VideoReadyForPlayback",{loadTimeMs:0,retryCount:0,percentDownloaded:this.getPercentDownloaded(),
videoTotalLengthMs:this.getDurationMs()}),this.assetLoaded=!0);this.initializeCaptions()}}(),Lb=function(){return function(b){var a=this,d,f;this.init=function(){var c,e,g;a.videoElement=a._strategy.getElement("video",a._root);a.adUnitElement=a._strategy.getElement();if(!a.videoElement)throw Error("unable to find video element");if(!a.adUnitElement)throw Error("unable to find ad unit element");if(!(a.videoElement instanceof HTMLVideoElement))throw Error("video element is not an HTMLVideoElement");
if(!(a.adUnitElement instanceof HTMLElement))throw Error("Ad unit element is not an HTMLElement");a._videoPlayer=new Qc({el:a.videoElement,strategy:a._strategy,clientInitiatedStartTime:a._clientInitiatedStartTime,clientExecutionMode:a._clientExecutionMode,metricsOptions:a.metricsOptions,metricsManager:a._metricsManager});a.videoLink=null!==(c=a._strategy.getElement('[data-daretype="video-background-link"]'))&&void 0!==c?c:null;a.muteButton=a._strategy.getElement('[data-daretype="MUTE"]',a._root);
a.muteButton&&(a.muteButtonIcon=a.muteButton.querySelector('[data-daretype="toggleOff"]'),a.unmuteButtonIcon=a.muteButton.querySelector('[data-daretype="toggleOn"]'),a.setMuteButtonState(a._videoPlayer.isMuted()),a.setupMuteButtonEvents(),a.isMuted=a._videoPlayer.isMuted(),a.isMuted||a.toggleAudio(!0));a.ccTrackFail=!1;a.ccTrack=a._strategy.getElement('[data-daretype="ccTrack"]');a.ccTrack&&(a.ccTrack.onerror=a.ccLoadFailure);a.ccContainer=a._strategy.getElement('[data-daretype="ccContainer"]');a.ccButton=
a._strategy.getElement('[data-daretype="CAPTION"]');a.ccButton&&(a.ccButtonOff=a.ccButton.querySelector('[data-daretype="toggleOff"]'),a.ccButtonOn=a.ccButton.querySelector('[data-daretype="toggleOn"]'),a.setupCcButtonEvents(),a.toggleCC(!1,"DefaultOff"));a.playButtonContainer=a._strategy.getElement('[data-daretype="PLAY-CONTAINER"]',a._root);a.playButton=null!==(g=null===(e=a.playButtonContainer)||void 0===e?void 0:e.querySelector("button"))&&void 0!==g?g:null;a.pauseButton=a._strategy.getElement('[data-daretype="PAUSE"]',
a._root);if(!a.playButtonContainer||!a.pauseButton)throw Error("unable to find play button container or pause button");a.ccButton=a._strategy.getElement('[data-daretype="CAPTION"]',a._root);a.setUpPlayButtonEvents();a.setUpPauseButtonEvents();a.setupVideoClickEvent();a.isAutoPlayDisabled&&(a._videoPlayer.metricsManager.logEvent("VideoPausedOnAutoplayDisabled"),a.showPlayButton(!0),a.showPauseButton(!1),a.showMuteButton(!1));a.setupViewabilityEvents()};this.setupViewabilityEvents=function(){if(a.videoElement)if(a.adUnitElement){a.videoObserver=
a._strategy.createIntersectionObserver(function(e){e=e[0];if(e.isIntersecting)a.handleViewabilityState(e.intersectionRatio);else a.onOnePercentViewabilityChange(!1)},{threshold:[.01,.5]});a.adUnitObserver=a._strategy.createIntersectionObserver(function(e){a.adUnitInView=Math.round(100*e[0].intersectionRatio);a.updateVideoPlayerWithAdUnitViewability(a.adUnitInView)},{threshold:Nc([],Pc,!0)});a.videoObserver.observe(a.videoElement);a.adUnitObserver.observe(a.adUnitElement);var c=a._strategy.getWindow();
c.addEventListener("visibilitychange",function(){var e,g,h,l,k,m;a.videoElement&&a.adUnitElement&&(document.hidden?(null===(e=a.videoObserver)||void 0===e?void 0:e.unobserve(a.videoElement),null===(g=a.adUnitObserver)||void 0===g?void 0:g.unobserve(a.adUnitElement),a.adUnitInView=0,a.handleViewabilityState(0),null===(h=a._videoPlayer)||void 0===h?void 0:h.clear()):(null===(l=a._videoPlayer)||void 0===l?void 0:l.loadVideoOnBrowserVisible(),null===(k=a.videoObserver)||void 0===k?void 0:k.observe(a.videoElement),
null===(m=a.adUnitObserver)||void 0===m?void 0:m.observe(a.adUnitElement)))});c.addEventListener("blur",function(){var e,g;a.videoElement&&a.adUnitElement&&(null===(e=a.videoObserver)||void 0===e?void 0:e.unobserve(a.videoElement),null===(g=a.adUnitObserver)||void 0===g?void 0:g.unobserve(a.adUnitElement),a.adUnitInView=0,a.handleViewabilityState(0))});c.addEventListener("focus",function(){var e,g;a.videoElement&&a.adUnitElement&&(null===(e=a.videoObserver)||void 0===e?void 0:e.observe(a.videoElement),
null===(g=a.adUnitObserver)||void 0===g?void 0:g.observe(a.adUnitElement))})}else a._strategy.log("Cant setup viewability events: ad unit element not found","ERROR");else a._strategy.log("Cant setup viewability events: video element not found","ERROR")};this.updateVideoPlayerWithAdUnitViewability=function(c){var e;null===(e=a._videoPlayer)||void 0===e?void 0:e.setAdUnitViewabilityPercentage(c)};this.onOnePercentViewabilityChange=function(c){var e,g,h,l,k,m,n,p=Date.now();c?(a.onScreenStartTime=p,
null===(e=a._videoPlayer)||void 0===e?void 0:e.metricsManager.logEvent("VideoOnScreen",{percentDownloaded:a._videoPlayer.getPercentDownloaded()})):((null===(g=a._videoPlayer)||void 0===g?0:g.isMuted())||a.setMuteStatus(!0,"VideoOffScreen"),c=p-a.onScreenStartTime,null===(h=a._videoPlayer)||void 0===h?void 0:h.metricsManager.logEvent("VideoOffScreen",{timeOnScreenMs:c,wasBuffering:0!==(null===(l=a._videoPlayer)||void 0===l?void 0:l.bufferStartTimeMs),videoCurrentTimeMs:null===(k=a._videoPlayer)||void 0===
k?void 0:k.getCurrentTimeMs()}),a.onScreenStartTime=0,null===(m=a._videoPlayer)||void 0===m?void 0:m.seekToStart(),null===(n=a._videoPlayer)||void 0===n?void 0:n.resetContinuousPlaybackDurationMs(),a.adUnitPercentageInView=!1)};this.onFiftyPercentViewabilityChange=function(c,e){a.isAutoPlayDisabled&&!a.playButtonClicked||a.pauseButtonClicked||(c?a.play():a.pause(e))};this.handleViewabilityState=function(c){if(0===c)a.onFiftyPercentViewabilityChange(!1,void 0),a.onOnePercentViewabilityChange(!1);else if(.5<=
c)a.onFiftyPercentViewabilityChange(!0,void 0);else if(.5>c&&.01<=c)a.onFiftyPercentViewabilityChange(!1,void 0);else a.onOnePercentViewabilityChange(!1)};this.load=function(){var c;null===(c=a._videoPlayer)||void 0===c?void 0:c.load()};this.play=function(){var c,e,g,h,l,k,m;if(a.isPlaying())return Promise.resolve();null!==(c=a._videoPlayer)&&void 0!==c&&c.hasSrcAttr()||(null===(e=a._videoPlayer)||void 0===e?void 0:e.loadVideoOnBrowserVisible());null===(g=a._videoPlayer)||void 0===g?void 0:g.resetContinuousPlaybackDurationMs();
null===(h=a._videoPlayer)||void 0===h?void 0:h.metricsManager.logEvent("VideoPlaybackInitiated",{videoCurrentTimeMs:a._videoPlayer.getCurrentTimeMs()});a.isPausedByUser=!1;a.showPlayButton(!1);a.showPauseButton(!0);a.muteButton&&(a.muteButton.style.display="block",a.muteButton.style.visibility="visible");a.pauseButton&&(a.pauseButton.style.display="block",a.pauseButton.style.visibility="visible");return(null===(l=a._videoPlayer)||void 0===l?0:l.isNavBackLoadPending())?(null===(k=a._videoPlayer)||
void 0===k?void 0:k.attachLoadStartCallback(function(){return a.play()}),Promise.resolve()):null===(m=a._videoPlayer)||void 0===m?void 0:m.play(Date.now()).then().catch(function(n){var p,t="string"===typeof n?n:"";n instanceof DOMException&&(t=n.name+": "+n.message);a.showPlayButton(!0);a.showPauseButton(!1);a.muteButton&&(a.muteButton.style.visibility="hidden");a.ccButton&&(a.ccButton.style.visibility="hidden");a._strategy.log(t,"ERROR");null===(p=a._videoPlayer)||void 0===p?void 0:p.metricsManager.logEvent("VideoPlayPromiseRejected",
{errorMessage:t})})};this.pause=function(c){var e,g;void 0===c&&(c=!1);a.isPaused()||(null===(e=a._videoPlayer)||void 0===e?void 0:e.resetContinuousPlaybackDurationMs(),a.showPauseButton(!1),c||a.showPlayButton(!0),a.muteButton&&(a.muteButton.style.visibility="hidden"),null===(g=a._videoPlayer)||void 0===g?void 0:g.pause())};this.isPaused=function(){var c;return"paused"===(null===(c=a._videoPlayer)||void 0===c?void 0:c.playbackState)};this.isPlaying=function(){var c;return"playing"===(null===(c=a._videoPlayer)||
void 0===c?void 0:c.playbackState)};this.setMuteStatus=function(c,e){var g,h,l,k,m;a.isMuted=c;a.setMuteButtonState(c);c?(null===(g=a._videoPlayer)||void 0===g?void 0:g.mute(),null===(h=a._videoPlayer)||void 0===h?void 0:h.metricsManager.logEvent("VideoSoundOff",{videoCurrentTimeMs:a._videoPlayer.getCurrentTimeMs(),soundToggleMethod:e})):(null===(l=a._videoPlayer)||void 0===l?void 0:l.unmute(),null===(k=a._videoPlayer)||void 0===k?void 0:k.metricsManager.logEvent("VideoSoundOn",{videoCurrentTimeMs:a._videoPlayer.getCurrentTimeMs(),
soundToggleMethod:e}),null===(m=a._videoPlayer)||void 0===m?void 0:m.emitViewMetric("UNMUTE"))};this.toggleAudio=function(c){var e,g,h;void 0===c&&(c=null);var l="true"===(null===(e=a.muteButton)||void 0===e?void 0:e.getAttribute("aria-pressed"));null===(g=a.muteButton)||void 0===g?void 0:g.setAttribute("aria-pressed",!l+"");a.setMuteStatus(null!==c&&void 0!==c?c:!(null===(h=a._videoPlayer)||void 0===h?0:h.isMuted()),"IconTap")};this.toggleCC=function(c,e){var g,h,l,k,m;void 0===c&&(c=void 0);void 0===
e&&(e=void 0);a.ccShowing=null!==c&&void 0!==c?c:!a.ccShowing;c=null!==e&&void 0!==e?e:"IconTap";a.ccButtonOff&&a.ccButtonOn&&(a.ccShowing?(a.ccButtonOn.style.opacity="1",a.ccButtonOff.style.opacity="0",null===(g=a._videoPlayer)||void 0===g?void 0:g.metricsManager.logEvent("CaptionsEnabled",{language:null===(h=a._videoPlayer)||void 0===h?void 0:h.getCaptionLanguage(),ccToggleCause:c})):(a.ccButtonOn.style.opacity="0",a.ccButtonOff.style.opacity="1",null===(l=a._videoPlayer)||void 0===l?void 0:l.metricsManager.logEvent("CaptionsDisabled",
{language:null===(k=a._videoPlayer)||void 0===k?void 0:k.getCaptionLanguage(),ccToggleCause:c})));a.ccContainer&&(a.ccContainer.style.visibility=a.ccShowing?"visible":"hidden");null===(m=a.ccButton)||void 0===m?void 0:m.setAttribute("aria-pressed","".concat(a.ccShowing))};this.setMuteButtonState=function(c){a.muteButtonIcon&&a.unmuteButtonIcon&&(c?(a.unmuteButtonIcon.style.opacity="0",a.muteButtonIcon.style.opacity="1"):(a.muteButtonIcon.style.opacity="0",a.unmuteButtonIcon.style.opacity="1"))};this.showPlayButton=
function(c){a.playButtonContainer&&(a.playButtonContainer.style.visibility=c?"inherit":"hidden")};this.showPauseButton=function(c){a.pauseButton&&(a.pauseButton.style.visibility=c?"inherit":"hidden")};this.showMuteButton=function(c){a.muteButton&&(a.muteButton.style.visibility=c?"inherit":"hidden")};this.showCcButton=function(c){a.ccButton&&(a.ccButton.style.visibility=c?"inherit":"hidden")};this.setupCcButtonEvents=function(){a.ccButton&&a.ccButton.addEventListener("click",function(){a.toggleCC()})};
this.ccLoadFailure=function(){a.ccTrackFail=!0;a.ccButton&&(a.ccButton.style.visibility="hidden")};this.setupMuteButtonEvents=function(){a.muteButton&&a.muteButton.addEventListener("click",function(){a.toggleAudio()})};this.setUpPlayButtonEvents=function(){a.playButtonContainer&&a.playButtonContainer.addEventListener("click",a.playButtonClickHandler)};this.playButtonClickHandler=function(){var c;a.play();a.playButtonClicked=!0;a.pauseButtonClicked=!1;null===(c=a.pauseButton)||void 0===c?void 0:c.focus()};
this.setUpPauseButtonEvents=function(){a.pauseButton&&a.pauseButton.addEventListener("click",a.pauseButtonClickHandler)};this.setupVideoClickEvent=function(){a.videoLink&&a.videoLink.addEventListener("click",function(){var c;null===(c=a._videoPlayer)||void 0===c?void 0:c.metricsManager.logEvent("VideoClicked",{videoCurrentTimeMs:a._videoPlayer.getCurrentTimeMs()})})};this.pauseButtonClickHandler=function(){var c;a.pause();a.pauseButtonClicked=!0;a.playButtonClicked=!1;null===(c=a.playButton)||void 0===
c?void 0:c.focus()};this._root=b.el;this._strategy=b.strategy;this.isAutoPlayDisabled=null!==(d=b.isAutoPlayDisabled)&&void 0!==d?d:!1;this._clientInitiatedStartTime=b.clientInitiatedStartTime;this._clientExecutionMode=null!==(f=b.clientExecutionMode)&&void 0!==f?f:"AF";this.metricsOptions=b.metricsOptions;this._metricsManager=b.metricsManager;this._videoPlayer;this.videoElement;this.adUnitElement;this.onScreenStartTime=Date.now();this.init()}}(),Rc=function(){function b(a,d){var f=F["default"].cardRoot.ownerDocument.defaultView;
if(!f)throw Error("Unable to get window");this.observer=new f.IntersectionObserver(a,d)}b.prototype.disconnect=function(){this.observer.disconnect()};b.prototype.observe=function(a){a=ua.unscope(a);if(!a)throw Error("Failed to unscope element");this.observer.observe(a)};b.prototype.takeRecords=function(){return this.observer.takeRecords()};b.prototype.unobserve=function(a){a=ua.unscope(a);if(!a)throw Error("Failed to unscope element");this.observer.unobserve(a)};Object.defineProperty(b.prototype,
"root",{get:function(){return this.observer.root},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"rootMargin",{get:function(){return this.observer.rootMargin},enumerable:!1,configurable:!0});Object.defineProperty(b.prototype,"thresholds",{get:function(){return this.observer.thresholds},enumerable:!1,configurable:!0});return b}(),Nb=function(b){function a(d){var f,c,e=b.call(this)||this;e._define=null!==(f=null===d||void 0===d?void 0:d.defineBrowserOperations)&&void 0!==f?f:va.setup().define;
e._useScopedDom=null!==(c=null===d||void 0===d?void 0:d.useScopedDom)&&void 0!==c?c:!0;return e}y.__extends(a,b);a.prototype.setOperationProxy=function(d){this.remoteOperationProxy=d};Object.defineProperty(a.prototype,"operationProxy",{get:function(){return this.remoteOperationProxy},enumerable:!1,configurable:!0});Object.defineProperty(a.prototype,"_dom",{get:function(){return this._useScopedDom?za["default"]:F["default"]},enumerable:!1,configurable:!0});a.prototype.addEventListener=function(d,f,
c){return this._define(d,f,c)};a.prototype.createElement=function(d){return this._dom.createElement(d)};a.prototype.getElement=function(d,f){f=null!==f&&void 0!==f?f:this._dom.cardRoot;d=d?f.querySelector(d):f;return d instanceof HTMLElement?d:void 0};a.prototype.getElements=function(d,f){return Array.from((null!==f&&void 0!==f?f:this._dom.cardRoot).querySelectorAll(d))};a.prototype.log=function(d,f,c){return Ra.log(d,f,null!==c&&void 0!==c?c:"DARE_CARDS")};a.prototype.matchMedia=function(d){return this.getWindow().matchMedia(d)};
a.prototype.getWindow=function(){var d,f,c=null===(d=this._dom.cardRoot.ownerDocument)||void 0===d?void 0:d.defaultView;c||(c=null===(f=F["default"].cardRoot.ownerDocument)||void 0===f?void 0:f.defaultView);if(!c)throw Error("unable to get window");return c};a.prototype.getDocument=function(){var d=this._useScopedDom?F["default"].cardRoot.ownerDocument:this._dom.cardRoot.ownerDocument;if(!d)throw Error("unable to get document");return d};a.prototype.createIntersectionObserver=function(d,f){return this._useScopedDom?
new Rc(d,f):new (this.getWindow().IntersectionObserver)(d,f)};a.prototype.pageMarker=function(d){var f=this;return new Promise(function(c,e){switch(d){case "load":xa["default"].pageLoad.then(c).catch(e);break;case "ready":xa["default"].pageReady.then(c).catch(e);break;default:f.log('unsupported Cards pageMarker "'.concat(d,'", using AUI!'),"WARN");try{P.when(d).execute(c)}catch(g){e(g instanceof Error?g:'unable to call P.when("'.concat(d,'")!'))}}})};a.prototype.logNexusEvent=function(d,f,c,e){return qa["default"].event(d,
f,c,e)};a.prototype.logCount=function(d,f,c){return qa["default"].count(d,f,c)};return a}(Gc),Sc={T1:0,T2:1E3,T3:2E3,T4:3E3,T5:4E3,T6:5E3,T7:6E3,T8:7E3,T9:8E3},Tc=function(b){"complete"===document.readyState||"interactive"===document.readyState?b():document.addEventListener("DOMContentLoaded",b)},Uc=function(b){return function(){return y.__awaiter(void 0,void 0,void 0,function(){var a,d,f,c,e,g,h,l,k,m,n,p,t,r,u,q,z,A,B;return y.__generator(this,function(H){switch(H.label){case 0:return Q.log("Loaded"),
a=b||{},d=a.loadAdFeedback,f=a.onLoad,c=a.onInit,e=a.isMobile,g=a.enableAdFeedback,h=a.creativeContainer,l=a.creativeImageContainer,k=a.bypassAdFeedbackViewportCheck,m=a.renderedAdsCount,c&&c(),[4,xa["default"].pageReady];case 1:H.sent();Q.log("Ready");try{var E=x(".sbx-no-js",void 0);E&&E.classList.remove("sbx-no-js");try{var D=C("[data-cid]");D.length?D.forEach(mb):mb()}catch(K){U(K)}try{ob(),ra("resize",ob,void 0)}catch(K){U(K)}try{C('img[data-lazy="true"]').forEach(sc)}catch(K){U(K)}x('[class*="eelModalRoot"]')?
tc():x('[data-action*="card-energy-efficiency-"]')&&uc(window.P);var I,M;if(!("-webkit-line-clamp"in F["default"].cardRoot.ownerDocument.body.style||"lineClamp"in F["default"].cardRoot.ownerDocument.body.style)){var ba=C('[class*="_sbTruncatedTitle_"]');if(ba.length)try{for(var ha=y.__values(ba),W=ha.next();!W.done;W=ha.next()){var G=W.value,ca=parseInt(G.getAttribute("data-totallines")||"1"),X=Math.ceil(parseFloat((null===(M=F["default"].cardRoot.ownerDocument.defaultView)||void 0===M?void 0:M.getComputedStyle(G).lineHeight)||
"1.3em"))*ca;if(!(G.scrollHeight<=X)){for(;G.scrollHeight>X;)G.innerText=G.innerText.slice(0,-1);G.innerText=G.innerText.slice(0,-3);G.innerText+="\u2026"}}}catch(K){var ia={error:K}}finally{try{W&&!W.done&&(I=ha.return)&&I.call(ha)}finally{if(ia)throw ia.error;}}}xc();f&&f();w("data-deal-badge-automated")&&w("data-ad-deal-end-time")&&wc();E=e;if(void 0!==E&&!window.sbxGwentClientDPR)try{window.sbxGwentClientDPR=!0,v((E?"Mobile":"Desktop")+"DPR"+(4>=Math.round(2*window.devicePixelRatio)/2?Math.round(2*
window.devicePixelRatio)/2:"4Plus"))}catch(K){U(K)}}catch(K){U(K)}n=w("data-ad-feedback-label-id");p=w("data-ad-creative-list");t=w("data-device-type")||"";r=w("data-tabletenv")||"";u=w("data-card-metrics-id")||"";q=w("data-slot")||"";z=ma(u,"creativeLevel");if(!n||!p)return[3,6];H.label=2;case 2:return H.trys.push([2,4,,5]),A=JSON.parse(p),[4,qc(n,A,g,t,r,u,q,h,l,k,m)];case 3:return H.sent(),v("NewAdFeedbackImplementationEnabled_"+z),[3,5];case 4:return B=H.sent(),d&&nb(),U("Failed to generate adFeedback rendering payload: "+
B,"DSA/AdFeedback"),v("FallbackToOldAdFeedbackImplementation_"+z),[3,5];case 5:return[3,7];case 6:d&&nb(),v("FallbackToOldAdFeedbackImplementation_"+z),U("Missing adFeedbackLabelId or adCreativeList","DSA/AdFeedback"),H.label=7;case 7:return[2]}})})}}({enableAdFeedback:function(b){return y.__awaiter(void 0,void 0,void 0,function(){var a,d,f,c;return y.__generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),a=b(),d=za["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+
a.adFeedbackLabelId)[0],f=d.dataset.isSponsoredLabelActive,"false"===(f||"false").toLowerCase()?[2]:[4,Ec(d,a.adFeedbackLabelId)];case 1:return e.sent(),[4,Dc(d,b)];case 2:return e.sent(),[3,4];case 3:throw c=e.sent(),L.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+c);case 4:return[2]}})})},loadAdFeedback:!0,onLoad:function(){Q.log("LifestyleOnLoad");var b=rb.setup(["generateEnergyEfficiencyModalContent"]);Mb({operations:b});
var a=w("data-lazy-load");a&&Tc(function(){setTimeout(function(){var d=x("img[data-lifestyle-img]"),f=d&&d.getAttribute("src");if(d&&f){f=f.replace("_QL50_","_QL70_");var c=f.replace,e=window.innerWidth,g=2<=window.devicePixelRatio?2:1,h=405*g;1470<=e?h=507*g:1400<=e?h=468*g:1250<=e&&(h=430*g);f=c.call(f,"_SX405_","_SX"+h+"_");d.setAttribute("src",f);Q.log("LazyLoadLifestyle"+a)}},Sc[a]||0)})},onInit:function(){try{P.when("af").execute(function(){return Q.log("LifestyleAF")})}catch(b){Q.log("LifestyleAFError")}},
creativeImageContainer:["container"],isMobile:!1});Qa._operationNames=["generateEnergyEfficiencyModalContent"];Qa.card=Uc});
